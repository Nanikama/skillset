<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Skillbrzee | India's Trusted Learning Platform</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800;900&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --orange:       #f97316;
      --orange-dark:  #ea580c;
      --orange-dim:   rgba(249,115,22,.12);
      --orange-glow:  rgba(249,115,22,.35);
      --gold:         #fbbf24;
      --sky:          #0ea5e9;
      --green:        #22c55e;
      --red:          #ef4444;
      --purple:       #a855f7;
      --bg0:          #050c17;
      --bg1:          #0a1628;
      --bg2:          #111e33;
      --bg3:          #192540;
      --surface:      #1b2a42;
      --surface2:     #223354;
      --text:         #eef2ff;
      --text2:        #94a3b8;
      --border:       rgba(255,255,255,.07);
      --border2:      rgba(255,255,255,.12);
      --radius-sm:    8px;
      --radius:       14px;
      --radius-lg:    20px;
      --shadow-card:  0 16px 40px rgba(0,0,0,.45);
      --transition:   .3s cubic-bezier(.4,0,.2,1);
    }
    html { scroll-behavior: smooth; font-size: 16px; }
    body { font-family: 'DM Sans', sans-serif; background: var(--bg0); color: var(--text); overflow-x: hidden; line-height: 1.6; }
    img  { display: block; max-width: 100%; }
    a    { text-decoration: none; color: inherit; }
    body::after { content:''; position:fixed; inset:0; z-index:9999; pointer-events:none; background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23noise)' opacity='.035'/%3E%3C/svg%3E"); }
    ::-webkit-scrollbar { width:5px; } ::-webkit-scrollbar-track { background:var(--bg0); } ::-webkit-scrollbar-thumb { background:var(--orange); border-radius:4px; }
    ::selection { background:var(--orange); color:#fff; }

    .cursor-dot,.cursor-ring { position:fixed; top:0; left:0; pointer-events:none; z-index:10000; border-radius:50%; transform:translate(-50%,-50%); transition:opacity .3s; }
    .cursor-dot  { width:8px; height:8px; background:var(--orange); }
    .cursor-ring { width:36px; height:36px; border:1.5px solid rgba(249,115,22,.5); transition:transform .12s,width .2s,height .2s; }
    @media (hover:none) { .cursor-dot,.cursor-ring { display:none; } }

    .container { max-width:1240px; margin:0 auto; padding:0 5%; }
    .section-tag { display:inline-flex; align-items:center; gap:7px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.28); color:var(--orange); border-radius:100px; padding:5px 15px; font-size:.75rem; font-weight:700; letter-spacing:.7px; text-transform:uppercase; margin-bottom:14px; }
    .section-tag::before { content:''; width:6px; height:6px; background:var(--orange); border-radius:50%; animation:blink 2s infinite; }
    .section-title { font-family:'Sora',sans-serif; font-weight:800; font-size:clamp(1.9rem,3.5vw,2.9rem); line-height:1.12; letter-spacing:-1px; margin-bottom:14px; }
    .section-sub { color:var(--text2); font-size:.97rem; line-height:1.75; }
    .gradient-text { background:linear-gradient(135deg,var(--orange) 0%,var(--gold) 55%,#fb923c 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
    .btn { display:inline-flex; align-items:center; gap:9px; padding:13px 26px; border-radius:var(--radius); font-weight:600; font-size:.93rem; cursor:pointer; border:none; transition:var(--transition); white-space:nowrap; }
    .btn-primary { background:linear-gradient(135deg,var(--orange),#fb923c); color:#fff; box-shadow:0 0 28px var(--orange-glow); }
    .btn-primary:hover { transform:translateY(-2px); box-shadow:0 0 44px rgba(249,115,22,.55); }
    .btn-ghost { background:transparent; color:var(--text); border:1px solid var(--border2); }
    .btn-ghost:hover { background:rgba(255,255,255,.06); border-color:rgba(255,255,255,.22); }

    .reveal { opacity:0; transform:translateY(36px); transition:opacity .75s ease,transform .75s ease; }
    .reveal.in { opacity:1; transform:none; }
    .reveal-left  { opacity:0; transform:translateX(-36px); transition:opacity .75s ease,transform .75s ease; }
    .reveal-left.in  { opacity:1; transform:none; }
    .reveal-right { opacity:0; transform:translateX(36px); transition:opacity .75s ease,transform .75s ease; }
    .reveal-right.in { opacity:1; transform:none; }
    .delay-1 { transition-delay:.12s; } .delay-2 { transition-delay:.24s; } .delay-3 { transition-delay:.36s; } .delay-4 { transition-delay:.48s; }

    .topbar { background:linear-gradient(90deg,var(--orange-dark),var(--orange),var(--gold)); color:#fff; font-size:.78rem; font-weight:600; letter-spacing:.4px; text-align:center; padding:8px 5%; position:relative; z-index:1001; }
    .topbar-close { position:absolute; right:20px; top:50%; transform:translateY(-50%); background:none; border:none; color:#fff; cursor:pointer; font-size:1rem; opacity:.8; }
    .topbar-close:hover { opacity:1; }

    .navbar { position:fixed; top:0; left:0; right:0; z-index:1000; height:70px; display:flex; align-items:center; justify-content:space-between; padding:0 5%; background:rgba(5,12,23,.8); backdrop-filter:blur(24px) saturate(180%); border-bottom:1px solid var(--border); transition:height var(--transition),background var(--transition),box-shadow var(--transition); }
    .navbar.scrolled { height:60px; background:rgba(5,12,23,.96); box-shadow:0 4px 24px rgba(0,0,0,.5); }
    .navbar.topbar-active { top:37px; }
    .nav-brand { font-family:'Sora',sans-serif; font-size:1.55rem; font-weight:900; background:linear-gradient(135deg,var(--orange),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; letter-spacing:-1px; cursor:pointer; }
    .nav-links { display:flex; align-items:center; gap:4px; list-style:none; }
    .nav-links > li { position:relative; }
    .nav-links > li > a { color:var(--text2); font-size:.88rem; font-weight:500; padding:8px 14px; border-radius:var(--radius-sm); transition:var(--transition); display:flex; align-items:center; gap:5px; }
    .nav-links > li > a:hover,.nav-links > li.active > a { color:var(--text); background:rgba(255,255,255,.06); }
    .nav-links > li > a .chevron { width:14px; height:14px; fill:none; stroke:currentColor; stroke-width:2; transition:transform .25s; }
    .nav-links > li.open > a .chevron { transform:rotate(180deg); }
    .dropdown-menu { position:absolute; top:calc(100% + 10px); left:50%; transform:translateX(-50%) translateY(8px); background:var(--surface); border:1px solid var(--border2); border-radius:var(--radius); padding:8px; min-width:220px; box-shadow:0 28px 56px rgba(0,0,0,.6); opacity:0; visibility:hidden; pointer-events:none; transition:opacity .25s,transform .25s,visibility .25s; }
    .nav-links > li:hover .dropdown-menu,.nav-links > li.open .dropdown-menu { opacity:1; visibility:visible; pointer-events:auto; transform:translateX(-50%) translateY(0); }
    .dropdown-menu a { display:flex; align-items:center; gap:10px; color:var(--text2); font-size:.85rem; padding:10px 13px; border-radius:var(--radius-sm); transition:var(--transition); }
    .dropdown-menu a::before { content:''; width:6px; height:6px; border-radius:50%; background:var(--orange-dark); flex-shrink:0; }
    .dropdown-menu a:hover { color:var(--orange); background:var(--orange-dim); }
    .btn-nav-login { background:linear-gradient(135deg,var(--orange),#fb923c) !important; color:#fff !important; border-radius:var(--radius-sm) !important; font-weight:700 !important; padding:9px 22px !important; box-shadow:0 0 18px var(--orange-glow); font-size:.88rem !important; }
    .btn-nav-login:hover { transform:translateY(-1px); box-shadow:0 0 30px rgba(249,115,22,.6) !important; }
    .nav-user-btn { display:flex; align-items:center; gap:9px; background:var(--surface); border:1px solid var(--border2); border-radius:var(--radius-sm); padding:7px 14px; cursor:pointer; transition:var(--transition); font-size:.85rem; font-weight:600; }
    .nav-user-btn:hover { border-color:rgba(249,115,22,.4); background:var(--orange-dim); }
    .nav-user-avatar { width:28px; height:28px; border-radius:50%; background:linear-gradient(135deg,var(--orange),var(--gold)); display:flex; align-items:center; justify-content:center; font-family:'Sora',sans-serif; font-weight:800; font-size:.75rem; color:#fff; flex-shrink:0; }
    .user-dropdown { position:absolute; top:calc(100% + 10px); right:0; background:var(--surface); border:1px solid var(--border2); border-radius:var(--radius); padding:8px; min-width:200px; box-shadow:0 28px 56px rgba(0,0,0,.6); opacity:0; visibility:hidden; pointer-events:none; transition:opacity .25s,visibility .25s; }
    .nav-user-wrap { position:relative; }
    .nav-user-wrap.open .user-dropdown { opacity:1; visibility:visible; pointer-events:auto; }
    .user-dropdown-header { padding:12px 13px 8px; border-bottom:1px solid var(--border); margin-bottom:6px; }
    .user-dropdown-name  { font-weight:700; font-size:.88rem; }
    .user-dropdown-email { font-size:.75rem; color:var(--text2); margin-top:2px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .user-dropdown a { display:flex; align-items:center; gap:9px; color:var(--text2); font-size:.84rem; padding:9px 13px; border-radius:var(--radius-sm); transition:var(--transition); cursor:pointer; }
    .user-dropdown a:hover { color:var(--text); background:rgba(255,255,255,.06); }
    .user-dropdown .logout-btn { color:var(--red) !important; }
    .user-dropdown .logout-btn:hover { background:rgba(239,68,68,.1) !important; }
    .hamburger { display:none; flex-direction:column; gap:5px; cursor:pointer; background:none; border:none; padding:4px; }
    .hamburger .bar { width:26px; height:2.5px; background:var(--text); border-radius:2px; transition:var(--transition); }
    .hamburger.open .bar:nth-child(1) { transform:translateY(7.5px) rotate(45deg); }
    .hamburger.open .bar:nth-child(2) { opacity:0; transform:scaleX(0); }
    .hamburger.open .bar:nth-child(3) { transform:translateY(-7.5px) rotate(-45deg); }
    .mobile-drawer { position:fixed; inset:0; z-index:999; background:rgba(5,12,23,.98); backdrop-filter:blur(24px); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px; transform:translateX(100%); transition:transform .4s cubic-bezier(.4,0,.2,1); }
    .mobile-drawer.open { transform:none; }
    .mobile-drawer a { font-family:'Sora',sans-serif; font-size:1.6rem; font-weight:700; color:var(--text2); transition:var(--transition); padding:10px 30px; border-radius:var(--radius); }
    .mobile-drawer a:hover { color:var(--orange); background:var(--orange-dim); }
    .mobile-drawer .mob-login { margin-top:16px; background:linear-gradient(135deg,var(--orange),#fb923c); color:#fff !important; font-size:1.1rem !important; box-shadow:0 0 28px var(--orange-glow); }

    .hero { min-height:100vh; position:relative; display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .hero-slides { position:absolute; inset:0; }
    .hero-slide { position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; transition:opacity 1.4s ease; }
    .hero-slide.active { opacity:1; }
    .hero-slide::after { content:''; position:absolute; inset:0; background:linear-gradient(to bottom,rgba(5,12,23,.65) 0%,rgba(5,12,23,.80) 60%,var(--bg0) 100%); }
    #particles { position:absolute; inset:0; z-index:1; pointer-events:none; }
    .hero-orb { position:absolute; border-radius:50%; filter:blur(100px); pointer-events:none; animation:float 8s ease-in-out infinite; }
    .hero-orb-1 { width:500px; height:500px; background:rgba(249,115,22,.14); top:-120px; left:-80px; }
    .hero-orb-2 { width:420px; height:420px; background:rgba(14,165,233,.09); bottom:-60px; right:-60px; animation-delay:-4s; }
    .hero-grid { position:absolute; inset:0; z-index:1; background-image:linear-gradient(rgba(255,255,255,.025) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.025) 1px,transparent 1px); background-size:64px 64px; }
    .hero-content { position:relative; z-index:2; text-align:center; max-width:820px; padding:140px 5% 80px; }
    .hero-badge { display:inline-flex; align-items:center; gap:9px; background:rgba(249,115,22,.1); border:1px solid rgba(249,115,22,.32); color:var(--orange); border-radius:100px; padding:7px 18px; font-size:.78rem; font-weight:700; letter-spacing:.6px; margin-bottom:30px; animation:fadeIn .8s .2s both; }
    .live-dot { width:8px; height:8px; background:#ef4444; border-radius:50%; animation:pulse-dot 1.6s infinite; }
    @keyframes pulse-dot { 0%,100% { box-shadow:0 0 0 0 rgba(239,68,68,.7); } 50% { box-shadow:0 0 0 6px rgba(239,68,68,0); } }
    .hero-title { font-family:'Sora',sans-serif; font-weight:900; font-size:clamp(2.6rem,6.5vw,5rem); line-height:1.06; letter-spacing:-2px; margin-bottom:26px; animation:fadeUp .9s .35s both; }
    .hero-sub { color:var(--text2); font-size:clamp(.95rem,1.5vw,1.15rem); line-height:1.8; max-width:580px; margin:0 auto 38px; animation:fadeUp .9s .5s both; }
    .hero-ctas { display:flex; gap:14px; justify-content:center; flex-wrap:wrap; animation:fadeUp .9s .65s both; }
    .slider-dots { position:absolute; bottom:32px; left:50%; transform:translateX(-50%); display:flex; gap:9px; z-index:3; }
    .slider-dot { width:8px; height:8px; background:rgba(255,255,255,.3); border-radius:50%; cursor:pointer; transition:var(--transition); border:none; }
    .slider-dot.active { width:26px; border-radius:4px; background:var(--orange); }
    .slider-arrows { position:absolute; inset:0; display:flex; align-items:center; justify-content:space-between; padding:0 20px; z-index:3; pointer-events:none; }
    .slider-arrow { width:44px; height:44px; border-radius:50%; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15); color:#fff; cursor:pointer; pointer-events:auto; display:flex; align-items:center; justify-content:center; transition:var(--transition); opacity:0; }
    .hero:hover .slider-arrow { opacity:1; }
    .slider-arrow:hover { background:var(--orange); border-color:var(--orange); }
    .slider-arrow svg { width:18px; height:18px; fill:none; stroke:currentColor; stroke-width:2.2; }

    .stats-bar { display:grid; grid-template-columns:repeat(4,1fr); border-top:1px solid var(--border); border-bottom:1px solid var(--border); background:var(--bg2); }
    .stat-item { display:flex; flex-direction:column; align-items:center; gap:8px; padding:28px 20px; border-right:1px solid var(--border); position:relative; overflow:hidden; cursor:default; transition:background var(--transition); }
    .stat-item:last-child { border-right:none; }
    .stat-item::after { content:''; position:absolute; inset:0; background:radial-gradient(circle at 50% 110%,rgba(249,115,22,.08),transparent 70%); opacity:0; transition:opacity var(--transition); }
    .stat-item:hover::after { opacity:1; }
    .stat-icon-wrap { width:52px; height:52px; border-radius:14px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.2); display:flex; align-items:center; justify-content:center; }
    .stat-icon-wrap img { width:30px; height:30px; object-fit:contain; }
    .stat-label { font-family:'Sora',sans-serif; font-weight:700; font-size:.95rem; text-align:center; }
    .stat-sub   { font-size:.78rem; color:var(--text2); text-align:center; }

    .section { padding:96px 0; }
    .section.bg-alt  { background:var(--bg1); }
    .section.bg-dark { background:var(--bg0); }
    .section-hdr { text-align:center; margin-bottom:60px; }

    .courses-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(195px,1fr)); gap:20px; }
    .course-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); overflow:hidden; cursor:pointer; position:relative; transition:transform var(--transition),border-color var(--transition),box-shadow var(--transition); }
    .course-card::before { content:''; position:absolute; inset:0; background:linear-gradient(135deg,rgba(249,115,22,.07),transparent); opacity:0; transition:opacity var(--transition); z-index:1; }
    .course-card:hover { transform:translateY(-7px); border-color:rgba(249,115,22,.35); box-shadow:0 22px 48px rgba(0,0,0,.5),0 0 0 1px rgba(249,115,22,.12); }
    .course-card:hover::before { opacity:1; }
    .course-img { width:100%; height:128px; object-fit:cover; transition:transform .5s ease; }
    .course-card:hover .course-img { transform:scale(1.07); }
    .course-badge-overlay { position:absolute; top:10px; left:10px; background:rgba(5,12,23,.75); backdrop-filter:blur(8px); border:1px solid var(--border2); border-radius:6px; padding:3px 9px; font-size:.68rem; font-weight:700; color:var(--gold); z-index:2; letter-spacing:.4px; }
    .course-body { padding:13px 14px 16px; position:relative; z-index:2; }
    .course-name { font-family:'Sora',sans-serif; font-size:.8rem; font-weight:700; letter-spacing:.2px; }
    .course-tag  { margin-top:6px; font-size:.7rem; color:var(--text2); }
    .skeleton { background:linear-gradient(90deg,var(--surface) 25%,var(--surface2) 50%,var(--surface) 75%); background-size:200% 100%; animation:shimmer 1.5s infinite; border-radius:var(--radius); }
    @keyframes shimmer { 0% { background-position:200% 0; } 100% { background-position:-200% 0; } }

    .packages-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:26px; }
    .pkg-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); overflow:hidden; position:relative; transition:transform var(--transition),box-shadow var(--transition),border-color var(--transition); display:flex; flex-direction:column; }
    .pkg-card:hover { transform:translateY(-8px); box-shadow:var(--shadow-card); }
    .pkg-card.featured { border-color:rgba(249,115,22,.5); box-shadow:0 0 0 1px rgba(249,115,22,.2),0 28px 56px rgba(249,115,22,.12); }
    .pkg-badge { position:absolute; top:16px; right:16px; z-index:3; background:linear-gradient(135deg,var(--orange),var(--gold)); color:#fff; font-size:.68rem; font-weight:800; letter-spacing:.6px; padding:4px 11px; border-radius:100px; text-transform:uppercase; }
    .pkg-img-wrap { position:relative; height:164px; overflow:hidden; }
    .pkg-img-wrap img { width:100%; height:100%; object-fit:cover; transition:transform .5s; }
    .pkg-card:hover .pkg-img-wrap img { transform:scale(1.05); }
    .pkg-img-wrap::after { content:''; position:absolute; inset:0; background:linear-gradient(to top,rgba(27,42,66,.9) 0%,transparent 50%); }
    .pkg-body { padding:22px; flex:1; display:flex; flex-direction:column; }
    .pkg-name { font-family:'Sora',sans-serif; font-weight:800; font-size:1rem; letter-spacing:.3px; margin-bottom:7px; }
    .pkg-desc { color:var(--text2); font-size:.85rem; line-height:1.65; flex:1; margin-bottom:16px; }
    .pkg-divider { border:none; border-top:1px solid var(--border); margin:14px 0; }
    .pkg-price { font-family:'Sora',sans-serif; font-size:2rem; font-weight:900; color:var(--orange); line-height:1; margin-bottom:18px; }
    .pkg-price sub { font-size:.9rem; font-weight:500; color:var(--text2); vertical-align:middle; margin-left:4px; }
    .btn-enroll { display:flex; align-items:center; justify-content:center; gap:8px; background:linear-gradient(135deg,var(--orange),#fb923c); color:#fff; padding:13px; border-radius:var(--radius-sm); font-weight:700; font-size:.9rem; transition:var(--transition); box-shadow:0 4px 14px rgba(249,115,22,.35); cursor:pointer; border:none; width:100%; }
    .btn-enroll:hover { transform:translateY(-2px); box-shadow:0 8px 24px rgba(249,115,22,.5); }
    .btn-enroll:disabled { opacity:.6; cursor:not-allowed; transform:none; }
    .btn-enroll svg { width:16px; height:16px; fill:none; stroke:#fff; stroke-width:2.5; transition:transform .25s; }
    .btn-enroll:hover svg { transform:translateX(3px); }
    .enrolled-badge { display:flex; align-items:center; justify-content:center; gap:7px; background:rgba(34,197,94,.12); border:1px solid rgba(34,197,94,.3); color:var(--green); padding:12px; border-radius:var(--radius-sm); font-weight:700; font-size:.88rem; }

    .numbers-section { background:linear-gradient(135deg,rgba(249,115,22,.07) 0%,rgba(14,165,233,.05) 100%); border-top:1px solid var(--border); border-bottom:1px solid var(--border); padding:80px 0; }
    .numbers-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; text-align:center; }
    .num-item { padding:16px; }
    .num-value { font-family:'Sora',sans-serif; font-size:clamp(2.4rem,5vw,3.8rem); font-weight:900; color:var(--orange); line-height:1; text-shadow:0 0 40px rgba(249,115,22,.4); }
    .num-label { color:var(--text2); font-size:.9rem; margin-top:10px; font-weight:500; }

    .instructors-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(270px,1fr)); gap:30px; max-width:720px; margin:0 auto; justify-content:center; }
    .instructor-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); overflow:hidden; text-align:center; transition:transform var(--transition),border-color var(--transition); }
    .instructor-card:hover { transform:translateY(-8px); border-color:rgba(249,115,22,.35); }
    .instructor-img-wrap { position:relative; height:210px; overflow:hidden; }
    .instructor-img-wrap img { width:100%; height:100%; object-fit:cover; object-position:top; transition:transform .5s; }
    .instructor-card:hover .instructor-img-wrap img { transform:scale(1.05); }
    .instructor-img-wrap::after { content:''; position:absolute; inset:0; background:linear-gradient(to top,rgba(27,42,66,.85) 0%,transparent 55%); }
    .instructor-body { padding:20px; }
    .instructor-name { font-family:'Sora',sans-serif; font-weight:700; font-size:.92rem; margin-bottom:7px; }
    .instructor-role { font-size:.78rem; color:var(--orange); font-weight:700; text-transform:uppercase; letter-spacing:.6px; }
    .instructor-socials { display:flex; justify-content:center; gap:10px; margin-top:14px; }
    .instructor-socials a { width:34px; height:34px; border-radius:50%; background:var(--bg3); border:1px solid var(--border); display:flex; align-items:center; justify-content:center; transition:var(--transition); color:var(--text2); }
    .instructor-socials a:hover { background:var(--orange-dim); border-color:rgba(249,115,22,.4); color:var(--orange); }
    .instructor-socials svg { width:15px; height:15px; fill:currentColor; }

    .features-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(230px,1fr)); gap:24px; }
    .feature-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); padding:32px 26px; text-align:center; transition:transform var(--transition),border-color var(--transition),box-shadow var(--transition); position:relative; overflow:hidden; }
    .feature-card::before { content:''; position:absolute; bottom:0; left:0; right:0; height:3px; background:linear-gradient(90deg,var(--orange),var(--gold)); transform:scaleX(0); transition:transform var(--transition); transform-origin:left; }
    .feature-card:hover { transform:translateY(-6px); border-color:rgba(249,115,22,.2); box-shadow:0 18px 40px rgba(0,0,0,.4); }
    .feature-card:hover::before { transform:scaleX(1); }
    .feature-icon-wrap { width:68px; height:68px; margin:0 auto 20px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.2); border-radius:18px; display:flex; align-items:center; justify-content:center; }
    .feature-icon-wrap img { width:38px; height:38px; object-fit:contain; }
    .feature-title { font-family:'Sora',sans-serif; font-weight:700; margin-bottom:10px; font-size:1rem; }
    .feature-desc { color:var(--text2); font-size:.87rem; line-height:1.72; }

    .testimonials-track-wrap { overflow:hidden; position:relative; }
    .testimonials-track-wrap::before,.testimonials-track-wrap::after { content:''; position:absolute; top:0; bottom:0; width:100px; z-index:2; pointer-events:none; }
    .testimonials-track-wrap::before { left:0; background:linear-gradient(to right,var(--bg1),transparent); }
    .testimonials-track-wrap::after  { right:0; background:linear-gradient(to left,var(--bg1),transparent); }
    .testimonials-track { display:flex; gap:22px; animation:scroll-left 30s linear infinite; width:max-content; }
    .testimonials-track:hover { animation-play-state:paused; }
    @keyframes scroll-left { from { transform:translateX(0); } to { transform:translateX(-50%); } }
    .testi-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); padding:26px 28px; width:320px; flex-shrink:0; transition:border-color var(--transition),box-shadow var(--transition); }
    .testi-card:hover { border-color:rgba(249,115,22,.25); box-shadow:0 14px 36px rgba(0,0,0,.4); }
    .stars { color:var(--gold); font-size:.95rem; letter-spacing:2px; margin-bottom:14px; }
    .testi-text { color:var(--text2); font-size:.88rem; line-height:1.75; margin-bottom:20px; font-style:italic; }
    .testi-author { display:flex; align-items:center; gap:12px; }
    .testi-avatar { width:42px; height:42px; border-radius:50%; flex-shrink:0; background:linear-gradient(135deg,var(--orange),var(--gold)); display:flex; align-items:center; justify-content:center; font-family:'Sora',sans-serif; font-weight:800; font-size:.95rem; }
    .testi-name { font-weight:600; font-size:.88rem; }
    .testi-loc  { color:var(--text2); font-size:.76rem; margin-top:2px; }

    .cert-grid { display:flex; justify-content:center; flex-wrap:wrap; gap:20px; margin-top:44px; }
    .cert-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:22px 36px; display:flex; align-items:center; justify-content:center; transition:var(--transition); }
    .cert-card:hover { border-color:rgba(249,115,22,.3); transform:translateY(-3px); box-shadow:0 12px 28px rgba(0,0,0,.4); }
    .cert-label { font-family:'Sora',sans-serif; font-weight:700; font-size:.88rem; color:var(--text2); letter-spacing:.5px; }

    .resources-section { padding:80px 0; background:var(--bg2); }
    .resources-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:20px; }
    .resource-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:20px; display:flex; align-items:center; gap:16px; transition:var(--transition); cursor:pointer; }
    .resource-card:hover { border-color:rgba(249,115,22,.35); transform:translateY(-4px); box-shadow:0 16px 36px rgba(0,0,0,.4); }
    .resource-icon { width:52px; height:52px; border-radius:12px; display:flex; align-items:center; justify-content:center; flex-shrink:0; font-size:1.6rem; }
    .resource-icon.pdf   { background:rgba(239,68,68,.15);   border:1px solid rgba(239,68,68,.3); }
    .resource-icon.doc   { background:rgba(14,165,233,.15);  border:1px solid rgba(14,165,233,.3); }
    .resource-icon.img   { background:rgba(34,197,94,.15);   border:1px solid rgba(34,197,94,.3); }
    .resource-icon.other { background:rgba(168,85,247,.15);  border:1px solid rgba(168,85,247,.3); }
    .resource-info { flex:1; min-width:0; }
    .resource-name { font-family:'Sora',sans-serif; font-weight:700; font-size:.85rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .resource-meta { font-size:.74rem; color:var(--text2); margin-top:4px; }
    .resource-dl { background:var(--orange-dim); border:1px solid rgba(249,115,22,.3); color:var(--orange); padding:6px 12px; border-radius:7px; font-size:.75rem; font-weight:700; transition:var(--transition); white-space:nowrap; flex-shrink:0; }
    .resource-card:hover .resource-dl { background:var(--orange); color:#fff; }
    .no-resources { text-align:center; padding:48px; color:var(--text2); font-size:.9rem; }

    footer { background:var(--bg1); border-top:1px solid var(--border); padding:72px 0 0; }
    .footer-grid { display:grid; grid-template-columns:1.8fr 1fr 1fr 1.1fr; gap:50px; padding-bottom:56px; }
    .footer-brand-name { font-family:'Sora',sans-serif; font-size:1.7rem; font-weight:900; background:linear-gradient(135deg,var(--orange),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; letter-spacing:-1px; margin-bottom:14px; }
    .footer-tagline { color:var(--text2); font-size:.87rem; line-height:1.75; font-style:italic; margin-bottom:22px; }
    .footer-social { display:flex; gap:10px; }
    .footer-social a { width:38px; height:38px; border-radius:10px; background:var(--bg3); border:1px solid var(--border); display:flex; align-items:center; justify-content:center; transition:var(--transition); color:var(--text2); }
    .footer-social a:hover { background:var(--orange-dim); border-color:rgba(249,115,22,.4); color:var(--orange); }
    .footer-social svg { width:16px; height:16px; fill:currentColor; }
    .footer-col h4 { font-family:'Sora',sans-serif; font-weight:700; font-size:.88rem; margin-bottom:20px; letter-spacing:.5px; text-transform:uppercase; color:var(--text); }
    .footer-col ul { list-style:none; display:flex; flex-direction:column; gap:11px; }
    .footer-col ul li a { color:var(--text2); font-size:.86rem; transition:color var(--transition); display:flex; align-items:center; gap:7px; }
    .footer-col ul li a::before { content:'→'; color:var(--orange-dark); font-size:.75rem; opacity:0; transition:opacity var(--transition),transform var(--transition); transform:translateX(-4px); }
    .footer-col ul li a:hover { color:var(--orange); }
    .footer-col ul li a:hover::before { opacity:1; transform:none; }
    .footer-contact li { display:flex; align-items:flex-start; gap:11px; color:var(--text2); font-size:.86rem; }
    .footer-contact li .icon { width:32px; height:32px; border-radius:8px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.2); display:flex; align-items:center; justify-content:center; flex-shrink:0; margin-top:1px; }
    .footer-contact li .icon svg { width:14px; height:14px; fill:none; stroke:var(--orange); stroke-width:2; }
    .footer-bottom { border-top:1px solid var(--border); padding:22px 0; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:12px; }
    .footer-bottom p { color:var(--text2); font-size:.81rem; }
    .footer-bottom a { color:var(--orange); transition:var(--transition); }
    .footer-bottom a:hover { color:var(--gold); }

    .back-to-top { position:fixed; bottom:28px; right:28px; z-index:500; width:46px; height:46px; border-radius:13px; background:linear-gradient(135deg,var(--orange),#fb923c); color:#fff; border:none; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 16px var(--orange-glow); opacity:0; transform:translateY(12px); transition:opacity .3s,transform .3s; pointer-events:none; }
    .back-to-top.visible { opacity:1; transform:none; pointer-events:auto; }
    .back-to-top:hover { transform:translateY(-3px); }
    .back-to-top svg { width:20px; height:20px; fill:none; stroke:#fff; stroke-width:2.5; }

    .modal-overlay { position:fixed; inset:0; z-index:2000; background:rgba(0,0,0,.72); backdrop-filter:blur(12px); display:flex; align-items:center; justify-content:center; padding:20px; opacity:0; visibility:hidden; transition:opacity .35s,visibility .35s; }
    .modal-overlay.open { opacity:1; visibility:visible; }
    .modal { background:var(--bg2); border:1px solid var(--border2); border-radius:var(--radius-lg); padding:36px; max-width:460px; width:100%; transform:translateY(24px) scale(.96); transition:transform .35s; position:relative; max-height:90vh; overflow-y:auto; }
    .modal-overlay.open .modal { transform:none; }
    .modal-close { position:absolute; top:16px; right:16px; background:var(--bg3); border:1px solid var(--border); border-radius:8px; width:34px; height:34px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:var(--transition); color:var(--text2); }
    .modal-close:hover { background:rgba(239,68,68,.15); border-color:rgba(239,68,68,.3); color:#f87171; }
    .modal-close svg { width:16px; height:16px; fill:none; stroke:currentColor; stroke-width:2.2; }
    .modal h3 { font-family:'Sora',sans-serif; font-size:1.4rem; font-weight:800; margin-bottom:6px; }
    .modal p  { color:var(--text2); font-size:.88rem; margin-bottom:22px; }
    .modal .pkg-price-lg { font-family:'Sora',sans-serif; font-size:2.4rem; font-weight:900; color:var(--orange); margin-bottom:22px; }
    .modal-form { display:flex; flex-direction:column; gap:14px; }
    .modal-form input, .modal-form select, .modal-form textarea { background:var(--bg3); border:1px solid var(--border2); border-radius:10px; padding:13px 16px; font-size:.9rem; color:var(--text); width:100%; transition:border-color var(--transition); font-family:'DM Sans',sans-serif; }
    .modal-form input:focus, .modal-form select:focus, .modal-form textarea:focus { outline:none; border-color:rgba(249,115,22,.5); box-shadow:0 0 0 3px rgba(249,115,22,.1); }
    .modal-form input::placeholder, .modal-form textarea::placeholder { color:var(--text2); }
    .modal-form input:disabled { opacity:.6; cursor:not-allowed; }
    .modal-form select option { background:var(--bg3); }
    .modal-form textarea { resize:vertical; min-height:90px; }

    .admin-overlay { position:fixed; inset:0; z-index:3000; background:var(--bg0); display:none; flex-direction:column; overflow:hidden; }
    .admin-overlay.open { display:flex; }
    .admin-sidebar { width:260px; background:var(--bg1); border-right:1px solid var(--border); display:flex; flex-direction:column; flex-shrink:0; height:100%; overflow-y:auto; }
    .admin-logo { padding:28px 24px; border-bottom:1px solid var(--border); }
    .admin-logo .brand { font-family:'Sora',sans-serif; font-size:1.3rem; font-weight:900; background:linear-gradient(135deg,var(--orange),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
    .admin-logo .role-badge { background:rgba(168,85,247,.15); border:1px solid rgba(168,85,247,.3); color:var(--purple); font-size:.7rem; font-weight:700; padding:3px 10px; border-radius:100px; letter-spacing:.5px; margin-top:6px; display:inline-block; }
    .admin-nav { padding:16px 12px; flex:1; }
    .admin-nav-item { display:flex; align-items:center; gap:12px; padding:11px 14px; border-radius:var(--radius-sm); color:var(--text2); font-size:.88rem; font-weight:500; cursor:pointer; transition:var(--transition); margin-bottom:4px; }
    .admin-nav-item:hover { background:rgba(255,255,255,.06); color:var(--text); }
    .admin-nav-item.active { background:var(--orange-dim); color:var(--orange); border-left:3px solid var(--orange); }
    .admin-nav-item .nav-icon { font-size:1.1rem; width:22px; text-align:center; }
    .admin-nav-divider { border:none; border-top:1px solid var(--border); margin:10px 0; }
    .admin-sidebar-footer { padding:16px 24px; border-top:1px solid var(--border); }
    .admin-sidebar-footer .admin-user { display:flex; align-items:center; gap:10px; }
    .admin-avatar { width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg,var(--purple),#7c3aed); display:flex; align-items:center; justify-content:center; font-family:'Sora',sans-serif; font-weight:800; font-size:.85rem; color:#fff; flex-shrink:0; }
    .admin-user-info .name { font-weight:700; font-size:.85rem; }
    .admin-user-info .role { font-size:.72rem; color:var(--purple); font-weight:600; }
    .admin-main { flex:1; overflow-y:auto; display:flex; flex-direction:column; }
    .admin-header { background:var(--bg1); border-bottom:1px solid var(--border); padding:20px 32px; display:flex; align-items:center; justify-content:space-between; flex-shrink:0; }
    .admin-header h1 { font-family:'Sora',sans-serif; font-size:1.4rem; font-weight:800; }
    .admin-header-actions { display:flex; gap:12px; align-items:center; }
    .admin-content { padding:32px; flex:1; }
    .admin-section { display:none; }
    .admin-section.active { display:block; }

    .admin-stats-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:16px; margin-bottom:32px; }
    .admin-stat-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:20px; position:relative; overflow:hidden; }
    .admin-stat-card::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; }
    .admin-stat-card.orange::before { background:linear-gradient(90deg,var(--orange),var(--gold)); }
    .admin-stat-card.green::before  { background:linear-gradient(90deg,var(--green),#4ade80); }
    .admin-stat-card.sky::before    { background:linear-gradient(90deg,var(--sky),#38bdf8); }
    .admin-stat-card.purple::before { background:linear-gradient(90deg,var(--purple),#c084fc); }
    .admin-stat-value { font-family:'Sora',sans-serif; font-size:2rem; font-weight:900; }
    .admin-stat-label { font-size:.8rem; color:var(--text2); margin-top:4px; }
    .admin-stat-icon { position:absolute; right:16px; top:50%; transform:translateY(-50%); font-size:2rem; opacity:.2; }

    .upload-area { border:2px dashed rgba(249,115,22,.35); border-radius:var(--radius-lg); padding:48px 24px; text-align:center; cursor:pointer; transition:var(--transition); background:var(--orange-dim); position:relative; }
    .upload-area:hover, .upload-area.drag-over { border-color:var(--orange); background:rgba(249,115,22,.15); }
    .upload-area input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; width:100%; height:100%; }
    .upload-icon { font-size:3rem; margin-bottom:12px; }
    .upload-title { font-family:'Sora',sans-serif; font-weight:700; font-size:1rem; margin-bottom:6px; }
    .upload-sub { color:var(--text2); font-size:.83rem; }
    .upload-types { display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-top:14px; }
    .upload-type-badge { background:var(--bg3); border:1px solid var(--border2); border-radius:6px; padding:3px 10px; font-size:.72rem; font-weight:700; color:var(--text2); }

    .data-table { width:100%; border-collapse:separate; border-spacing:0; }
    .data-table th { background:var(--bg3); padding:12px 16px; font-family:'Sora',sans-serif; font-size:.78rem; font-weight:700; letter-spacing:.5px; color:var(--text2); text-align:left; text-transform:uppercase; border-bottom:1px solid var(--border); }
    .data-table th:first-child { border-radius:var(--radius-sm) 0 0 0; }
    .data-table th:last-child  { border-radius:0 var(--radius-sm) 0 0; }
    .data-table td { padding:14px 16px; font-size:.86rem; border-bottom:1px solid var(--border); vertical-align:middle; }
    .data-table tr:hover td { background:rgba(255,255,255,.02); }
    .data-table tr:last-child td { border-bottom:none; }
    .file-type-badge { display:inline-flex; align-items:center; gap:5px; padding:3px 10px; border-radius:6px; font-size:.72rem; font-weight:700; }
    .file-type-badge.pdf   { background:rgba(239,68,68,.15);  color:#f87171; border:1px solid rgba(239,68,68,.3); }
    .file-type-badge.doc   { background:rgba(14,165,233,.15); color:#38bdf8; border:1px solid rgba(14,165,233,.3); }
    .file-type-badge.img   { background:rgba(34,197,94,.15);  color:#4ade80; border:1px solid rgba(34,197,94,.3); }
    .file-type-badge.other { background:rgba(168,85,247,.15); color:#c084fc; border:1px solid rgba(168,85,247,.3); }
    .table-action-btn { background:var(--bg3); border:1px solid var(--border2); color:var(--text2); padding:5px 10px; border-radius:6px; font-size:.76rem; cursor:pointer; transition:var(--transition); margin-right:6px; }
    .table-action-btn:hover { border-color:rgba(249,115,22,.4); color:var(--orange); }
    .table-action-btn.danger:hover { border-color:rgba(239,68,68,.4); color:var(--red); }
    .table-wrap { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); overflow:hidden; }
    .table-empty { padding:48px; text-align:center; color:var(--text2); font-size:.88rem; }

    .admin-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); padding:28px; margin-bottom:24px; }
    .admin-card h3 { font-family:'Sora',sans-serif; font-weight:700; font-size:1rem; margin-bottom:20px; display:flex; align-items:center; gap:9px; }
    .form-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
    .form-full { grid-column:1/-1; }
    .form-group { display:flex; flex-direction:column; gap:7px; }
    .form-label { font-size:.8rem; font-weight:700; color:var(--text2); letter-spacing:.4px; text-transform:uppercase; }
    .form-input { background:var(--bg3); border:1px solid var(--border2); border-radius:10px; padding:11px 14px; font-size:.88rem; color:var(--text); width:100%; transition:border-color var(--transition); font-family:'DM Sans',sans-serif; }
    .form-input:focus { outline:none; border-color:rgba(249,115,22,.5); box-shadow:0 0 0 3px rgba(249,115,22,.1); }
    .form-input::placeholder { color:var(--text2); }
    .form-input option { background:var(--bg3); }

    .upload-progress { margin-top:14px; display:none; }
    .upload-progress.show { display:block; }
    .progress-bar-wrap { background:var(--bg3); border-radius:100px; height:6px; overflow:hidden; margin-top:6px; }
    .progress-bar-fill { height:100%; background:linear-gradient(90deg,var(--orange),var(--gold)); border-radius:100px; transition:width .3s; }
    .progress-text { font-size:.78rem; color:var(--text2); display:flex; justify-content:space-between; }

    .user-avatar-sm { width:32px; height:32px; border-radius:8px; background:linear-gradient(135deg,var(--orange),var(--gold)); display:flex; align-items:center; justify-content:center; font-family:'Sora',sans-serif; font-weight:800; font-size:.75rem; color:#fff; flex-shrink:0; }
    .user-info-cell { display:flex; align-items:center; gap:10px; }

    .dashboard-section { margin-bottom:24px; }
    .dashboard-section h4 { font-family:'Sora',sans-serif; font-weight:700; font-size:.9rem; margin-bottom:12px; color:var(--text); }
    .enrolled-pkg-item { background:var(--bg3); border:1px solid var(--border2); border-radius:10px; padding:14px 16px; display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
    .enrolled-pkg-name  { font-weight:700; font-size:.88rem; }
    .enrolled-pkg-date  { font-size:.75rem; color:var(--text2); margin-top:3px; }
    .enrolled-pkg-badge { background:rgba(34,197,94,.15); border:1px solid rgba(34,197,94,.3); color:var(--green); font-size:.7rem; font-weight:700; padding:3px 10px; border-radius:100px; }
    .no-enrollments { text-align:center; padding:24px; color:var(--text2); font-size:.88rem; }
    .no-enrollments a { color:var(--orange); cursor:pointer; }
    .stat-pill { display:inline-flex; align-items:center; gap:5px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.2); border-radius:100px; padding:4px 12px; font-size:.76rem; font-weight:700; color:var(--orange); }

    .toast-container { position:fixed; bottom:90px; right:28px; z-index:9000; display:flex; flex-direction:column; gap:10px; }
    .toast { background:var(--surface); border:1px solid var(--border2); border-radius:12px; padding:14px 18px; display:flex; align-items:center; gap:12px; box-shadow:0 8px 28px rgba(0,0,0,.5); transform:translateX(120%); transition:transform .4s cubic-bezier(.4,0,.2,1); min-width:260px; max-width:320px; }
    .toast.show { transform:none; }
    .toast-icon { width:34px; height:34px; border-radius:9px; display:flex; align-items:center; justify-content:center; flex-shrink:0; }
    .toast-icon.success { background:rgba(34,197,94,.15); }
    .toast-icon.success svg { width:16px; height:16px; fill:none; stroke:#22c55e; stroke-width:2.5; }
    .toast-icon.error { background:rgba(239,68,68,.15); }
    .toast-icon.error svg { width:16px; height:16px; fill:none; stroke:#ef4444; stroke-width:2.5; }
    .toast-icon.info { background:rgba(14,165,233,.15); }
    .toast-icon.info svg { width:16px; height:16px; fill:none; stroke:#0ea5e9; stroke-width:2.5; }
    .toast-text { font-size:.84rem; line-height:1.4; }
    .toast-title { font-weight:700; }
    .toast-sub   { color:var(--text2); font-size:.78rem; }

    .spinner { width:18px; height:18px; border:2px solid rgba(255,255,255,.3); border-top-color:#fff; border-radius:50%; animation:spin .7s linear infinite; display:inline-block; }
    @keyframes spin { to { transform:rotate(360deg); } }

    @keyframes fadeIn  { from { opacity:0; } to { opacity:1; } }
    @keyframes fadeUp  { from { opacity:0; transform:translateY(22px); } to { opacity:1; transform:none; } }
    @keyframes float   { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-28px); } }
    @keyframes blink   { 0%,100% { opacity:1; } 50% { opacity:.35; } }

    @media (max-width:1024px) { .footer-grid { grid-template-columns:1fr 1fr; } .admin-sidebar { width:220px; } }
    @media (max-width:900px)  { .nav-links { display:none; } .hamburger { display:flex; } .stats-bar { grid-template-columns:repeat(2,1fr); } .stat-item:nth-child(2) { border-right:none; } .numbers-grid { grid-template-columns:repeat(2,1fr); gap:30px; } .admin-sidebar { position:absolute; left:-260px; z-index:10; transition:.3s; height:100%; } .admin-sidebar.open { left:0; } .form-grid { grid-template-columns:1fr; } }
    @media (max-width:600px)  { .hero-title { letter-spacing:-1px; } .footer-grid { grid-template-columns:1fr; gap:32px; } .footer-bottom { flex-direction:column; text-align:center; } .numbers-grid { grid-template-columns:repeat(2,1fr); } .admin-content { padding:20px; } .admin-header { padding:16px 20px; } }

    .tab-switcher { display:flex; background:var(--bg3); border-radius:var(--radius-sm); padding:4px; gap:4px; margin-bottom:20px; }
    .tab-btn { flex:1; padding:9px; border-radius:6px; border:none; background:transparent; color:var(--text2); font-size:.85rem; font-weight:600; cursor:pointer; transition:var(--transition); font-family:'DM Sans',sans-serif; }
    .tab-btn.active { background:var(--surface2); color:var(--text); box-shadow:0 2px 8px rgba(0,0,0,.3); }

    .search-bar { display:flex; gap:12px; margin-bottom:20px; align-items:center; flex-wrap:wrap; }
    .search-input { background:var(--bg3); border:1px solid var(--border2); border-radius:var(--radius-sm); padding:10px 14px; font-size:.87rem; color:var(--text); font-family:'DM Sans',sans-serif; flex:1; min-width:200px; }
    .search-input:focus { outline:none; border-color:rgba(249,115,22,.4); }
    .search-input::placeholder { color:var(--text2); }

    .status-badge { display:inline-flex; align-items:center; gap:5px; padding:3px 10px; border-radius:100px; font-size:.72rem; font-weight:700; }
    .status-badge.active  { background:rgba(34,197,94,.15);  color:var(--green); border:1px solid rgba(34,197,94,.3); }
    .status-badge.pending { background:rgba(251,191,36,.15); color:var(--gold);  border:1px solid rgba(251,191,36,.3); }
    .status-badge.admin   { background:rgba(168,85,247,.15); color:var(--purple);border:1px solid rgba(168,85,247,.3); }

    /* Wake-up overlay */
    .wakeup-overlay { position:fixed; inset:0; z-index:9990; background:rgba(5,12,23,.92); backdrop-filter:blur(16px); display:flex; align-items:center; justify-content:center; }
    .wakeup-box { background:var(--bg2); border:1px solid var(--border2); border-radius:20px; padding:40px; max-width:380px; width:90%; text-align:center; }
    .wakeup-spinner { width:48px; height:48px; border:3px solid rgba(249,115,22,.2); border-top-color:var(--orange); border-radius:50%; animation:spin .9s linear infinite; margin:0 auto 20px; }
    .wakeup-title { font-family:'Sora',sans-serif; font-weight:800; font-size:1.1rem; margin-bottom:8px; }
    .wakeup-sub { color:var(--text2); font-size:.84rem; line-height:1.6; }
    .wakeup-progress { margin-top:20px; }
    .wakeup-bar-wrap { background:var(--bg3); border-radius:100px; height:5px; overflow:hidden; margin-top:8px; }
    .wakeup-bar-fill { height:100%; background:linear-gradient(90deg,var(--orange),var(--gold)); border-radius:100px; width:0%; transition:width .5s; }
  </style>
</head>
<body>

<script>
  /* ═══════════════════════════════
     ADMIN CREDENTIALS (hardcoded)
  ═══════════════════════════════ */
  const ADMIN_CREDENTIALS = {
    username: 'admin@skillbrzee.in',
    password: 'Admin@Skillbrzee123',
    name:     'Skillbrzee Admin',
  };

  /* ═══════════════════════════════
     FIX #1: Always use production backend with /api prefix
     Backend routes are at /api/auth/register, /api/auth/login, etc.
  ═══════════════════════════════ */
  /* ─────────────────────────────────────────────────────
     API BASE — confirmed from server.js route mounts:
       app.use('/api/auth',     ...)
       app.use('/api/payments', ...)
       app.use('/api/resources',...)
       app.use('/api/admin',    ...)
     Backend: https://skillset-g4oh.onrender.com
  ───────────────────────────────────────────────────── */
  const API_BASE = 'https://skillset-g4oh.onrender.com/api';

  let authToken   = localStorage.getItem('sb_token') || null;
  let currentUser = JSON.parse(localStorage.getItem('sb_user') || 'null');
  let isAdminMode = false;
  let resourceStore = JSON.parse(localStorage.getItem('sb_resources') || '[]');

  function saveResources() { localStorage.setItem('sb_resources', JSON.stringify(resourceStore)); }
  function authHeaders(json = true) {
    return {
      ...(json ? { 'Content-Type': 'application/json' } : {}),
      ...(authToken ? { 'Authorization': `Bearer ${authToken}` } : {}),
    };
  }
  function isLoggedIn() { return !!authToken && !!currentUser; }
  function saveAuth(token, user) { authToken = token; currentUser = user; localStorage.setItem('sb_token', token); localStorage.setItem('sb_user', JSON.stringify(user)); }
  function clearAuth() { authToken = null; currentUser = null; localStorage.removeItem('sb_token'); localStorage.removeItem('sb_user'); }

  async function refreshUser() {
    if (!authToken || authToken.startsWith('admin-local')) return;
    try {
      const res = await fetch(`${API_BASE}/auth/me`, { headers: authHeaders() });
      if (!res.ok) { clearAuth(); updateNavAuth(); return; }
      const data = await res.json();
      currentUser = data.user;
      localStorage.setItem('sb_user', JSON.stringify(currentUser));
    } catch { }
  }

  /* ═══════════════════════════════
     FIX #2: isBackendAlive with 15s timeout + wake-up UX
     Render free tier cold-starts in 10-30s
  ═══════════════════════════════ */
  async function isBackendAlive(timeoutMs = 15000) {
    try {
      const controller = new AbortController();
      const timer = setTimeout(() => controller.abort(), timeoutMs);
      // Use /api/health — confirmed in server.js
      const res = await fetch(`https://skillset-g4oh.onrender.com/api/health`, {
        signal: controller.signal,
        method: 'GET',
      });
      clearTimeout(timer);
      return res.ok;
    } catch {
      return false;
    }
  }

  /* Wake the backend up with a progress UI */
  function showWakeupOverlay() {
    const existing = document.getElementById('wakeupOverlay');
    if (existing) return existing;
    const el = document.createElement('div');
    el.id = 'wakeupOverlay';
    el.className = 'wakeup-overlay';
    el.innerHTML = `
      <div class="wakeup-box">
        <div class="wakeup-spinner"></div>
        <div class="wakeup-title">Connecting to Server…</div>
        <div class="wakeup-sub">Our server may be starting up. This takes up to 30 seconds on first load. Please wait.</div>
        <div class="wakeup-progress">
          <div style="font-size:.75rem;color:var(--text2);display:flex;justify-content:space-between;">
            <span>Waking up server</span><span id="wakeupPct">0%</span>
          </div>
          <div class="wakeup-bar-wrap"><div class="wakeup-bar-fill" id="wakeupFill"></div></div>
        </div>
      </div>`;
    document.body.appendChild(el);
    // Animate progress bar
    let pct = 0;
    el._timer = setInterval(() => {
      pct = Math.min(pct + (pct < 70 ? 2 : 0.5), 95);
      const fill = document.getElementById('wakeupFill');
      const txt  = document.getElementById('wakeupPct');
      if (fill) fill.style.width = pct + '%';
      if (txt)  txt.textContent  = Math.floor(pct) + '%';
    }, 600);
    return el;
  }

  function hideWakeupOverlay() {
    const el = document.getElementById('wakeupOverlay');
    if (!el) return;
    clearInterval(el._timer);
    const fill = document.getElementById('wakeupFill');
    const txt  = document.getElementById('wakeupPct');
    if (fill) fill.style.width = '100%';
    if (txt)  txt.textContent  = '100%';
    setTimeout(() => el.remove(), 400);
  }

  /* Wait for backend with retries + wake-up UI */
  async function waitForBackend(showOverlay = true) {
    const overlay = showOverlay ? showWakeupOverlay() : null;
    for (let attempt = 0; attempt < 6; attempt++) {
      const alive = await isBackendAlive(8000);
      if (alive) {
        if (overlay) hideWakeupOverlay();
        return true;
      }
      await new Promise(r => setTimeout(r, 5000)); // wait 5s between retries
    }
    if (overlay) hideWakeupOverlay();
    return false;
  }
</script>

  <div class="cursor-dot"  id="cursorDot"></div>
  <div class="cursor-ring" id="cursorRing"></div>

  <div class="topbar" id="topbar">
    🎉 Limited Time Offer — Get 30% OFF on All Packages! Use Code: <strong>SKILL30</strong>
    <button class="topbar-close" id="topbarClose" aria-label="Close">✕</button>
  </div>

  <nav class="navbar topbar-active" id="navbar">
    <div class="nav-brand" onclick="scrollToTop()">Skillbrzee</div>
    <ul class="nav-links" id="navLinks">
      <li class="active"><a href="#hero">Home</a></li>
      <li><a href="#courses">Courses</a></li>
      <li>
        <a href="#packages">
          Course Bundles
          <svg class="chevron" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
        </a>
        <div class="dropdown-menu">
          <a href="#packages" data-pkg="1">STARTER PACKAGE</a>
          <a href="#packages" data-pkg="2">BASIC PACKAGE</a>
          <a href="#packages" data-pkg="3">SILVER PACKAGE</a>
          <a href="#packages" data-pkg="4">GOLD PACKAGE</a>
          <a href="#packages" data-pkg="5">DIAMOND PACKAGE</a>
          <a href="#packages" data-pkg="6">PREMIUM PACKAGE</a>
        </div>
      </li>
      <li><a href="#resources">Resources</a></li>
      <li><a href="#instructors">About</a></li>
      <li><a href="#contact">Contact</a></li>
      <li id="navAuthSlot"></li>
    </ul>
    <button class="hamburger" id="hamburger" aria-label="Toggle menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>
  </nav>

  <div class="mobile-drawer" id="mobileDrawer">
    <a href="#hero"         onclick="closeDrawer()">Home</a>
    <a href="#courses"      onclick="closeDrawer()">Courses</a>
    <a href="#packages"     onclick="closeDrawer()">Course Bundles</a>
    <a href="#resources"    onclick="closeDrawer()">Resources</a>
    <a href="#instructors"  onclick="closeDrawer()">About</a>
    <a href="#contact"      onclick="closeDrawer()">Contact</a>
    <a href="#" class="mob-login" id="mobAuthBtn" onclick="handleMobAuth(event)">Login</a>
  </div>

  <section class="hero" id="hero">
    <div class="hero-slides" id="heroSlides">
      <div class="hero-slide active" style="background-image:url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=1800&auto=format&fit=crop&q=80')"></div>
      <div class="hero-slide"        style="background-image:url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1800&auto=format&fit=crop&q=80')"></div>
      <div class="hero-slide"        style="background-image:url('https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?w=1800&auto=format&fit=crop&q=80')"></div>
    </div>
    <canvas id="particles"></canvas>
    <div class="hero-orb hero-orb-1"></div>
    <div class="hero-orb hero-orb-2"></div>
    <div class="hero-grid"></div>
    <div class="hero-content">
      <div class="hero-badge"><span class="live-dot"></span>LIVE TRAINING AVAILABLE NOW</div>
      <h1 class="hero-title">Level Up Your Skills<br>with <span class="gradient-text">India's Trusted</span><br>Learning Platform</h1>
      <p class="hero-sub">Master digital marketing, graphic design, video editing &amp; more — with expert mentors, live sessions &amp; lifetime access.</p>
      <div class="hero-ctas">
        <a href="#packages" class="btn btn-primary">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
          Explore Packages
        </a>
        <a href="#courses" class="btn btn-ghost">Browse Courses →</a>
      </div>
    </div>
    <div class="slider-arrows">
      <button class="slider-arrow" id="prevSlide" aria-label="Previous slide"><svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg></button>
      <button class="slider-arrow" id="nextSlide" aria-label="Next slide"><svg viewBox="0 0 24 24"><polyline points="9 6 15 12 9 18"/></svg></button>
    </div>
    <div class="slider-dots" id="sliderDots"></div>
  </section>

  <div class="stats-bar">
    <div class="stat-item reveal">
      <div class="stat-icon-wrap"><img src="https://img.icons8.com/nolan/64/classroom.png" alt="Live"/></div>
      <div class="stat-label">Live Training</div>
      <div class="stat-sub">Training from experts</div>
    </div>
    <div class="stat-item reveal delay-1">
      <div class="stat-icon-wrap"><img src="https://img.icons8.com/nolan/64/knowledge-sharing.png" alt="Courses"/></div>
      <div class="stat-label">35+ Courses</div>
      <div class="stat-sub">Training from experts</div>
    </div>
    <div class="stat-item reveal delay-2">
      <div class="stat-icon-wrap"><img src="https://img.icons8.com/nolan/64/technical-support.png" alt="Support"/></div>
      <div class="stat-label">24/7 Support</div>
      <div class="stat-sub">Training from experts</div>
    </div>
    <div class="stat-item reveal delay-3">
      <div class="stat-icon-wrap"><img src="https://img.icons8.com/nolan/64/certificate.png" alt="Cert"/></div>
      <div class="stat-label">Certification</div>
      <div class="stat-sub">Training from experts</div>
    </div>
  </div>

  <section class="section bg-alt" id="courses">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Our Courses</div>
        <h2 class="section-title">Our Top Courses</h2>
        <p class="section-sub" style="max-width:560px;margin:0 auto;">Skillbrzee envisions providing you with the latest trending courses which make you a proficient leader in your field of expertise.</p>
      </div>
      <div class="courses-grid reveal" id="coursesGrid">
        <div class="skeleton" style="height:180px;"></div>
        <div class="skeleton" style="height:180px;"></div>
        <div class="skeleton" style="height:180px;"></div>
        <div class="skeleton" style="height:180px;"></div>
        <div class="skeleton" style="height:180px;"></div>
        <div class="skeleton" style="height:180px;"></div>
      </div>
    </div>
  </section>

  <section class="section bg-dark" id="packages">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Bundles</div>
        <h2 class="section-title">Digital Growth Bundles</h2>
        <p class="section-sub" style="max-width:520px;margin:0 auto;">Explore our diverse range of courses tailored to your needs</p>
      </div>
      <div class="packages-grid reveal" id="packagesGrid"></div>
    </div>
  </section>

  <section class="numbers-section" id="numbers">
    <div class="container">
      <div class="section-hdr reveal" style="margin-bottom:48px;">
        <div class="section-tag">Our Impact</div>
        <h2 class="section-title">India's Trusted Educational Platform</h2>
        <p class="section-sub" style="max-width:460px;margin:0 auto;">With Skillbrzee, Begin your journey to success.</p>
      </div>
      <div class="numbers-grid reveal">
        <div class="num-item"><div class="num-value" id="n1">0</div><div class="num-label">Enrolled Students</div></div>
        <div class="num-item"><div class="num-value" id="n2">0</div><div class="num-label">Video Courses</div></div>
        <div class="num-item"><div class="num-value" id="n3">0</div><div class="num-label">Expert Mentors</div></div>
        <div class="num-item"><div class="num-value" id="n4">0</div><div class="num-label">Award Achievers</div></div>
      </div>
    </div>
  </section>

  <section class="resources-section" id="resources">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Free Downloads</div>
        <h2 class="section-title">Learning Resources</h2>
        <p class="section-sub" style="max-width:520px;margin:0 auto;">Download free books, study materials, PDFs &amp; guides uploaded by our team.</p>
      </div>
      <div class="resources-grid reveal" id="publicResourcesGrid">
        <div class="no-resources">📚 Loading resources…</div>
      </div>
    </div>
  </section>

  <section class="section bg-alt" id="instructors">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Mentors</div>
        <h2 class="section-title">Instructors At Skillbrzee</h2>
        <p class="section-sub" style="max-width:580px;margin:0 auto;">At Skillbrzee, you can now be assured to get the top-most training from the leading educators of their respective fields.</p>
      </div>
      <div class="instructors-grid reveal">
        <div class="instructor-card">
          <div class="instructor-img-wrap"><img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400&auto=format&fit=crop&q=80" alt="Penta Kalyani" loading="lazy"/></div>
          <div class="instructor-body">
            <div class="instructor-name">PENTA KALYANI W/O PENTA NAGESH</div>
            <div class="instructor-role">CEO &amp; Founder</div>
            <div class="instructor-socials">
              <a href="#" aria-label="Instagram"><svg viewBox="0 0 24 24"><path d="M16 2H8C4.69 2 2 4.69 2 8v8c0 3.31 2.69 6 6 6h8c3.31 0 6-2.69 6-6V8c0-3.31-2.69-6-6-6zm4 14c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4h8c2.21 0 4 1.79 4 4v8zm-8-9a5 5 0 100 10A5 5 0 0012 7zm0 8a3 3 0 110-6 3 3 0 010 6zm5-9.5a1 1 0 110 2 1 1 0 010-2z"/></svg></a>
              <a href="#" aria-label="LinkedIn"><svg viewBox="0 0 24 24"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></svg></a>
            </div>
          </div>
        </div>
        <div class="instructor-card">
          <div class="instructor-img-wrap"><img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&auto=format&fit=crop&q=80" alt="Mr Bunny" loading="lazy"/></div>
          <div class="instructor-body">
            <div class="instructor-name">MR. BUNNY</div>
            <div class="instructor-role">CEO &amp; Co-Founder</div>
            <div class="instructor-socials">
              <a href="#" aria-label="Instagram"><svg viewBox="0 0 24 24"><path d="M16 2H8C4.69 2 2 4.69 2 8v8c0 3.31 2.69 6 6 6h8c3.31 0 6-2.69 6-6V8c0-3.31-2.69-6-6-6zm4 14c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4h8c2.21 0 4 1.79 4 4v8zm-8-9a5 5 0 100 10A5 5 0 0012 7zm0 8a3 3 0 110-6 3 3 0 010 6zm5-9.5a1 1 0 110 2 1 1 0 010-2z"/></svg></a>
              <a href="#" aria-label="LinkedIn"><svg viewBox="0 0 24 24"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></svg></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section bg-dark">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Why Skillbrzee</div>
        <h2 class="section-title">Start your Learning Journey Today!</h2>
        <p class="section-sub" style="max-width:520px;margin:0 auto;">Everything you need to grow your career — under one roof.</p>
      </div>
      <div class="features-grid">
        <div class="feature-card reveal">
          <div class="feature-icon-wrap"><img src="https://img.icons8.com/nolan/80/classroom.png" alt="Experts"/></div>
          <div class="feature-title">Learn with Experts</div>
          <div class="feature-desc">Gain practical insights and hands-on knowledge directly from industry professionals through expert-led live sessions.</div>
        </div>
        <div class="feature-card reveal delay-1">
          <div class="feature-icon-wrap"><img src="https://img.icons8.com/nolan/80/knowledge-sharing.png" alt="Learn Anything"/></div>
          <div class="feature-title">Learn Anything</div>
          <div class="feature-desc">Explore a vast library of courses covering diverse topics to expand your skills and pursue your interests.</div>
        </div>
        <div class="feature-card reveal delay-2">
          <div class="feature-icon-wrap"><img src="https://img.icons8.com/nolan/80/certificate.png" alt="Certificate"/></div>
          <div class="feature-title">Completion Certificate</div>
          <div class="feature-desc">Earn a verified certificate for each completed course to boost your credibility and career growth.</div>
        </div>
        <div class="feature-card reveal delay-3">
          <div class="feature-icon-wrap"><img src="https://img.icons8.com/nolan/80/lifecycle.png" alt="Lifetime"/></div>
          <div class="feature-title">Lifetime Access</div>
          <div class="feature-desc">Enjoy unlimited access to your courses anytime, enabling flexible learning at your own pace, forever.</div>
        </div>
      </div>
    </div>
  </section>

  <section class="section bg-alt">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Testimonials</div>
        <h2 class="section-title">Words From Our Students</h2>
        <p class="section-sub" style="max-width:440px;margin:0 auto;">See what our students say about us</p>
      </div>
    </div>
    <div class="testimonials-track-wrap reveal">
      <div class="testimonials-track" id="testiTrack"></div>
    </div>
  </section>

  <section class="section bg-dark">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Verified</div>
        <h2 class="section-title">Our Legal Certifications</h2>
        <p class="section-sub" style="max-width:440px;margin:0 auto;">Explore our diverse range of courses tailored to your needs</p>
      </div>
      <div class="cert-grid reveal">
        <div class="cert-card"><div style="font-family:'Sora',sans-serif;font-weight:900;font-size:1.4rem;background:linear-gradient(135deg,#f97316,#fbbf24);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">Skillbrzee</div></div>
        <div class="cert-card"><div class="cert-label">🏅 ISO CERTIFIED</div></div>
        <div class="cert-card"><div class="cert-label">🇮🇳 GOVT. REGISTERED</div></div>
        <div class="cert-card"><div class="cert-label">💼 MSME RECOGNIZED</div></div>
        <div class="cert-card"><div class="cert-label">⭐ STARTUP INDIA</div></div>
      </div>
    </div>
  </section>

  <footer id="contact">
    <div class="container">
      <div class="footer-grid">
        <div>
          <div class="footer-brand-name">Skillbrzee</div>
          <p class="footer-tagline">"Live as if you were to die tomorrow.<br>Learn as if you were to live forever…"</p>
          <div class="footer-social">
            <a href="#" aria-label="Instagram"><svg viewBox="0 0 24 24"><path d="M16 2H8C4.69 2 2 4.69 2 8v8c0 3.31 2.69 6 6 6h8c3.31 0 6-2.69 6-6V8c0-3.31-2.69-6-6-6zm4 14c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4h8c2.21 0 4 1.79 4 4v8zm-8-9a5 5 0 100 10A5 5 0 0012 7zm0 8a3 3 0 110-6 3 3 0 010 6zm5-9.5a1 1 0 110 2 1 1 0 010-2z"/></svg></a>
            <a href="#" aria-label="YouTube"><svg viewBox="0 0 24 24"><path d="M22.54 6.42a2.78 2.78 0 00-1.95-1.96C18.88 4 12 4 12 4s-6.88 0-8.59.46A2.78 2.78 0 001.46 6.42 29.94 29.94 0 001 12a29.94 29.94 0 00.46 5.58A2.78 2.78 0 003.41 19.6C5.12 20.06 12 20.06 12 20.06s6.88 0 8.59-.46a2.78 2.78 0 001.95-1.96A29.94 29.94 0 0023 12a29.94 29.94 0 00-.46-5.58zM9.75 15.02V8.98L15.5 12l-5.75 3.02z"/></svg></a>
            <a href="#" aria-label="Facebook"><svg viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></a>
            <a href="#" aria-label="Twitter"><svg viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/></svg></a>
          </div>
        </div>
        <div class="footer-col">
          <h4>Course Links</h4>
          <ul>
            <li><a href="#packages">Starter Package</a></li>
            <li><a href="#packages">Basic Package</a></li>
            <li><a href="#packages">Silver Package</a></li>
            <li><a href="#packages">Gold Package</a></li>
            <li><a href="#packages">Diamond Package</a></li>
            <li><a href="#packages">Premium Package</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="#">Disclaimer</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Refund Policy</a></li>
            <li><a href="#">Terms &amp; Conditions</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Blog</a></li>
          </ul>
        </div>
        <div class="footer-col footer-contact">
          <h4>Contact Us</h4>
          <ul style="gap:16px;">
            <li>
              <div class="icon"><svg viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 015.13 13a19.79 19.79 0 01-3.07-8.67A2 2 0 014.04 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg></div>
              <span>9573472183</span>
            </li>
            <li>
              <div class="icon"><svg viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div>
              <span>support@skillbrzee.in</span>
            </li>
            <li>
              <div class="icon"><svg viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg></div>
              <span>Hyderabad, Telangana, India</span>
            </li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>Copyright © 2026 Skillbrzee. All rights reserved.</p>
        <p>Developed by <a href="https://digitechup.com" target="_blank" rel="noopener">Digitechup</a> &nbsp;|&nbsp; <a href="#" onclick="openAdminLogin(event)" style="color:var(--text2);opacity:.5;">Admin</a></p>
      </div>
    </div>
  </footer>

  <button class="back-to-top" id="backToTop" aria-label="Back to top">
    <svg viewBox="0 0 24 24"><polyline points="18 15 12 9 6 15"/></svg>
  </button>

  <!-- ENROLL MODAL -->
  <div class="modal-overlay" id="enrollModal">
    <div class="modal">
      <button class="modal-close" id="modalClose" aria-label="Close">
        <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
      <p class="section-tag" style="margin-bottom:8px;" id="modalTag">STARTER PACKAGE</p>
      <h3 id="modalTitle">Enroll Now</h3>
      <p id="modalDesc">Begin your digital journey with fundamental skills and tools.</p>
      <div class="pkg-price-lg" id="modalPrice">₹500</div>
      <div class="modal-form">
        <input type="text"     id="modalName"     placeholder="Your Full Name"                   autocomplete="name"/>
        <input type="email"    id="modalEmail"    placeholder="Email Address"                    autocomplete="email"/>
        <input type="tel"      id="modalPhone"    placeholder="Phone Number"                     autocomplete="tel"/>
        <input type="password" id="modalPassword" placeholder="Create a Password (min 6 chars)"  autocomplete="new-password"/>
        <button class="btn btn-primary" style="width:100%;justify-content:center;" id="enrollBtn" onclick="submitEnroll()">
          Proceed to Payment
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14"/><polyline points="12 5 19 12 12 19"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- USER LOGIN MODAL -->
  <div class="modal-overlay" id="loginModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('loginModal')" aria-label="Close">
        <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
      <div class="section-tag" style="margin-bottom:8px;">STUDENT LOGIN</div>
      <h3 style="margin-bottom:6px;">Welcome Back 👋</h3>
      <p style="margin-bottom:22px;">Log in to access your courses and resources</p>
      <div class="modal-form">
        <input type="email"    id="loginEmail"    placeholder="Email Address"  autocomplete="email"/>
        <input type="password" id="loginPassword" placeholder="Password"       autocomplete="current-password"/>
        <button class="btn btn-primary" style="width:100%;justify-content:center;" id="loginBtn" onclick="handleLogin()">
          Login
        </button>
        <p style="text-align:center;color:var(--text2);font-size:.82rem;margin-top:6px;">
          Don't have an account?
          <a href="#packages" style="color:var(--orange);" onclick="closeModal('loginModal')">Enroll now</a>
        </p>
      </div>
    </div>
  </div>

  <!-- ADMIN LOGIN MODAL -->
  <div class="modal-overlay" id="adminLoginModal">
    <div class="modal" style="max-width:400px;">
      <button class="modal-close" onclick="closeModal('adminLoginModal')" aria-label="Close">
        <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
      <div style="text-align:center;margin-bottom:24px;">
        <div style="width:60px;height:60px;background:rgba(168,85,247,.15);border:1px solid rgba(168,85,247,.3);border-radius:16px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;font-size:1.8rem;">🛡️</div>
        <div class="section-tag">ADMIN ACCESS</div>
        <h3 style="margin-bottom:4px;">Admin Panel</h3>
        <p style="font-size:.83rem;color:var(--text2);">Restricted area — authorized personnel only</p>
      </div>
      <div class="modal-form">
        <input type="email"    id="adminLoginEmail" placeholder="Admin Email"    autocomplete="off"/>
        <input type="password" id="adminLoginPass"  placeholder="Admin Password" autocomplete="off"/>
        <button class="btn btn-primary" style="width:100%;justify-content:center;background:linear-gradient(135deg,var(--purple),#7c3aed);" id="adminLoginBtn" onclick="handleAdminLogin()">
          🔐 Enter Admin Panel
        </button>
      </div>
    </div>
  </div>

  <!-- USER DASHBOARD MODAL -->
  <div class="modal-overlay" id="dashboardModal">
    <div class="modal" style="max-width:520px;">
      <button class="modal-close" onclick="closeModal('dashboardModal')" aria-label="Close">
        <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
      <div class="section-tag" style="margin-bottom:8px;">MY DASHBOARD</div>
      <h3 id="dashName" style="margin-bottom:4px;">Loading…</h3>
      <p id="dashEmail" style="margin-bottom:20px;font-size:.82rem;"></p>
      <div class="tab-switcher">
        <button class="tab-btn active" onclick="switchDashTab('enrollments',this)">My Courses</button>
        <button class="tab-btn" onclick="switchDashTab('resources',this)">Resources</button>
        <button class="tab-btn" onclick="switchDashTab('payments',this)">Payments</button>
      </div>
      <div id="dashTab-enrollments" class="dashboard-section">
        <div id="dashEnrollments"><div class="skeleton" style="height:56px;margin-bottom:8px;"></div><div class="skeleton" style="height:56px;margin-bottom:8px;"></div></div>
      </div>
      <div id="dashTab-resources" class="dashboard-section" style="display:none;">
        <div id="dashResources"><p style="color:var(--text2);font-size:.85rem;text-align:center;padding:20px 0;">Loading resources…</p></div>
      </div>
      <div id="dashTab-payments" class="dashboard-section" style="display:none;">
        <div id="dashPayments"><div class="skeleton" style="height:40px;margin-bottom:6px;"></div><div class="skeleton" style="height:40px;"></div></div>
      </div>
      <button class="btn btn-ghost" style="width:100%;justify-content:center;margin-top:16px;border-color:rgba(239,68,68,.3);color:#f87171;" onclick="handleLogout()">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
        Logout
      </button>
    </div>
  </div>

  <!-- ADMIN PANEL -->
  <div class="admin-overlay" id="adminPanel">
    <div class="admin-sidebar" id="adminSidebar">
      <div class="admin-logo">
        <div class="brand">Skillbrzee</div>
        <div class="role-badge">⚡ ADMIN PANEL</div>
      </div>
      <nav class="admin-nav">
        <div class="admin-nav-item active" onclick="switchAdminSection('dashboard',this)">
          <span class="nav-icon">📊</span> Dashboard
        </div>
        <div class="admin-nav-item" onclick="switchAdminSection('upload',this)">
          <span class="nav-icon">📤</span> Upload Files
        </div>
        <div class="admin-nav-item" onclick="switchAdminSection('files',this)">
          <span class="nav-icon">📁</span> Manage Files
        </div>
        <div class="admin-nav-item" onclick="switchAdminSection('users',this)">
          <span class="nav-icon">👥</span> Users
        </div>
        <div class="admin-nav-item" onclick="switchAdminSection('packages',this)">
          <span class="nav-icon">📦</span> Packages
        </div>
        <hr class="admin-nav-divider"/>
        <div class="admin-nav-item" onclick="exitAdmin()" style="color:var(--red);">
          <span class="nav-icon">↩️</span> Exit Panel
        </div>
      </nav>
      <div class="admin-sidebar-footer">
        <div class="admin-user">
          <div class="admin-avatar">SA</div>
          <div class="admin-user-info">
            <div class="name">Skillbrzee Admin</div>
            <div class="role">Super Admin</div>
          </div>
        </div>
      </div>
    </div>

    <div class="admin-main">
      <div class="admin-header">
        <h1 id="adminSectionTitle">Dashboard</h1>
        <div class="admin-header-actions">
          <span id="adminClock" style="color:var(--text2);font-size:.82rem;font-family:'Sora',sans-serif;"></span>
          <button class="btn btn-ghost" style="padding:8px 16px;font-size:.82rem;" onclick="exitAdmin()">← Back to Site</button>
        </div>
      </div>

      <div class="admin-content">
        <!-- DASHBOARD -->
    <div class="admin-section active" id="admin-dashboard">

  <!-- TOP 4 CARDS -->
  <div class="admin-stats-grid">
    <div class="admin-stat-card orange">
      <div class="admin-stat-icon">👥</div>
      <div class="admin-stat-value" id="stat-totalUsers">36</div>
      <div class="admin-stat-label">Total Users</div>
    </div>
    <div class="admin-stat-card green">
      <div class="admin-stat-icon">💸</div>
      <div class="admin-stat-value" id="stat-commissions">₹18,798</div>
      <div class="admin-stat-label">Commissions Paid</div>
    </div>
    <div class="admin-stat-card sky">
      <div class="admin-stat-icon">👛</div>
      <div class="admin-stat-value" id="stat-wallet">₹1,18,178</div>
      <div class="admin-stat-label">Wallet Balance</div>
    </div>
    <div class="admin-stat-card purple">
      <div class="admin-stat-icon">📤</div>
      <div class="admin-stat-value" id="stat-payout">₹0</div>
      <div class="admin-stat-label">Payout Request</div>
    </div>
  </div>

  <!-- DETAIL ANALYTICS -->
  <div class="admin-card">
    <h3>📊 Detail Analytics</h3>
    <div style="display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap;align-items:center;">
      <input type="date" class="form-input" id="analyticsFrom" style="width:180px;"/>
      <input type="date" class="form-input" id="analyticsTo" style="width:180px;"/>
      <button class="btn btn-primary" onclick="loadAnalytics()">Search</button>
      <button class="btn btn-ghost" onclick="clearAnalytics()">Clear</button>
    </div>
    <div class="admin-stats-grid" id="analyticsGrid">
      <div class="admin-stat-card orange">
        <div class="admin-stat-value" id="an-inclGst">₹3,40,466</div>
        <div class="admin-stat-label">Including GST Sale</div>
      </div>
      <div class="admin-stat-card green">
        <div class="admin-stat-value" id="an-exclGst">₹2,88,531</div>
        <div class="admin-stat-label">Without GST Sale</div>
      </div>
      <div class="admin-stat-card sky">
        <div class="admin-stat-value" id="an-gst">₹51,935</div>
        <div class="admin-stat-label">GST Amount</div>
      </div>
      <div class="admin-stat-card purple">
        <div class="admin-stat-value" id="an-commission">₹1,38,976</div>
        <div class="admin-stat-label">Total Commission</div>
      </div>
      <div class="admin-stat-card orange">
        <div class="admin-stat-value" id="an-reward">₹0</div>
        <div class="admin-stat-label">Total Reward</div>
      </div>
      <div class="admin-stat-card green">
        <div class="admin-stat-value" id="an-profit">₹1,49,555</div>
        <div class="admin-stat-label">Total Profit</div>
      </div>
      <div class="admin-stat-card sky">
        <div class="admin-stat-value" id="an-razorpay">₹0</div>
        <div class="admin-stat-label">Razorpay Sales</div>
      </div>
      <div class="admin-stat-card purple">
        <div class="admin-stat-value" id="an-phonepe">₹0</div>
        <div class="admin-stat-label">PhonePe Sales</div>
      </div>
      <div class="admin-stat-card orange">
        <div class="admin-stat-value" id="an-wallet">₹0</div>
        <div class="admin-stat-label">Wallet Sales</div>
      </div>
      <div class="admin-stat-card green">
        <div class="admin-stat-value" id="an-upi">₹2,35,364</div>
        <div class="admin-stat-label">UPI Sales</div>
      </div>
      <div class="admin-stat-card sky">
        <div class="admin-stat-value" id="an-cosmofeed">₹0</div>
        <div class="admin-stat-label">Cosmofeed Sales</div>
      </div>
    </div>
  </div>

  <!-- PACKAGE BREAKDOWN -->
  <div class="admin-card">
    <h3>📦 Package Breakdown</h3>
    <div class="admin-stats-grid" id="packageBreakdownGrid">
      <div class="admin-stat-card orange">
        <div class="admin-stat-value" id="pkg-starter">₹2,047</div>
        <div class="admin-stat-label">Starter Package [5]</div>
      </div>
      <div class="admin-stat-card green">
        <div class="admin-stat-value" id="pkg-basic">₹5,996</div>
        <div class="admin-stat-label">Basic Package [4]</div>
      </div>
      <div class="admin-stat-card sky">
        <div class="admin-stat-value" id="pkg-silver">₹19,343</div>
        <div class="admin-stat-label">Silver Package [7]</div>
      </div>
      <div class="admin-stat-card purple">
        <div class="admin-stat-value" id="pkg-gold">₹10,998</div>
        <div class="admin-stat-label">Gold Package [2]</div>
      </div>
      <div class="admin-stat-card orange">
        <div class="admin-stat-value" id="pkg-diamond">₹19,997</div>
        <div class="admin-stat-label">Diamond Package [3]</div>
      </div>
      <div class="admin-stat-card green">
        <div class="admin-stat-value" id="pkg-premium">₹1,82,982</div>
        <div class="admin-stat-label">Premium Package [18]</div>
      </div>
    </div>
  </div>

  <!-- QUICK ACTIONS -->
  <div class="admin-card">
    <h3>⚡ Quick Actions</h3>
    <div style="display:flex;gap:12px;flex-wrap:wrap;">
      <button class="btn btn-primary" onclick="switchAdminSection('upload', document.querySelectorAll('.admin-nav-item')[1])">📤 Upload New File</button>
      <button class="btn btn-ghost" onclick="switchAdminSection('files', document.querySelectorAll('.admin-nav-item')[2])">📁 View All Files</button>
      <button class="btn btn-ghost" onclick="switchAdminSection('users', document.querySelectorAll('.admin-nav-item')[3])">👥 Manage Users</button>
    </div>
  </div>

</div>

        <!-- UPLOAD -->
        <div class="admin-section" id="admin-upload">
          <div class="admin-card">
            <h3>📤 Upload New File</h3>
            <div class="form-grid">
              <div class="form-group form-full">
                <label class="form-label">File Title *</label>
                <input type="text" class="form-input" id="uploadTitle" placeholder="e.g. Digital Marketing Guide 2026"/>
              </div>
              <div class="form-group">
                <label class="form-label">Category</label>
                <select class="form-input" id="uploadCategory">
                  <option value="General">General</option>
                  <option value="Digital Marketing">Digital Marketing</option>
                  <option value="Graphic Design">Graphic Design</option>
                  <option value="Video Editing">Video Editing</option>
                  <option value="Social Media">Social Media</option>
                  <option value="eCommerce">eCommerce</option>
                  <option value="Freelancing">Freelancing</option>
                  <option value="Study Material">Study Material</option>
                  <option value="Books">Books</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Visibility</label>
                <select class="form-input" id="uploadVisibility">
                  <option value="public">🌍 Public (Everyone)</option>
                  <option value="enrolled">🔒 Enrolled Students Only</option>
                </select>
              </div>
              <div class="form-group form-full">
                <label class="form-label">Description</label>
                <textarea class="form-input" id="uploadDesc" placeholder="Brief description…" style="height:80px;resize:vertical;"></textarea>
              </div>
              <div class="form-group form-full">
                <label class="form-label">File URL / Link *</label>
                <input type="url" class="form-input" id="uploadUrl" placeholder="https://drive.google.com/file/..."/>
                <p style="font-size:.76rem;color:var(--text2);margin-top:6px;">💡 Upload to Google Drive/Dropbox and paste the shareable link here.</p>
              </div>
            </div>
            <div style="margin-top:20px;">
              <label class="form-label" style="margin-bottom:10px;display:block;">— OR — Upload File Directly</label>
              <div class="upload-area" id="uploadArea" ondragover="handleDragOver(event)" ondrop="handleDrop(event)" ondragleave="this.classList.remove('drag-over')">
                <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.mp4,.zip" onchange="handleFileSelect(event)"/>
                <div class="upload-icon">📄</div>
                <div class="upload-title" id="uploadAreaTitle">Drag &amp; drop file here, or click to browse</div>
                <div class="upload-sub">PDF, DOC, PPT, XLS, IMG, ZIP supported</div>
                <div class="upload-types">
                  <span class="upload-type-badge">PDF</span><span class="upload-type-badge">DOC</span><span class="upload-type-badge">PPT</span><span class="upload-type-badge">XLS</span><span class="upload-type-badge">IMG</span><span class="upload-type-badge">ZIP</span>
                </div>
              </div>
              <div class="upload-progress" id="uploadProgress">
                <div class="progress-text"><span id="uploadProgressLabel">Uploading…</span><span id="uploadProgressPct">0%</span></div>
                <div class="progress-bar-wrap"><div class="progress-bar-fill" id="uploadProgressFill" style="width:0%"></div></div>
              </div>
            </div>
            <div style="display:flex;gap:12px;margin-top:22px;flex-wrap:wrap;">
              <button class="btn btn-primary" id="uploadSubmitBtn" onclick="submitUpload()">✅ Save File</button>
              <button class="btn btn-ghost" onclick="resetUploadForm()">🔄 Reset</button>
            </div>
          </div>
        </div>

        <!-- FILES -->
        <div class="admin-section" id="admin-files">
          <div class="search-bar">
            <input type="text" class="search-input" id="filesSearch" placeholder="🔍 Search files…" oninput="renderAdminFiles()"/>
            <select class="form-input" id="filesFilterCat" style="width:auto;padding:10px 14px;" onchange="renderAdminFiles()">
              <option value="">All Categories</option>
              <option value="Digital Marketing">Digital Marketing</option>
              <option value="Graphic Design">Graphic Design</option>
              <option value="Video Editing">Video Editing</option>
              <option value="Social Media">Social Media</option>
              <option value="eCommerce">eCommerce</option>
              <option value="Freelancing">Freelancing</option>
              <option value="Study Material">Study Material</option>
              <option value="Books">Books</option>
              <option value="General">General</option>
            </select>
          </div>
          <div class="table-wrap">
            <table class="data-table">
              <thead><tr><th>#</th><th>File Name</th><th>Category</th><th>Type</th><th>Visibility</th><th>Uploaded</th><th>Actions</th></tr></thead>
              <tbody id="adminFilesBody"><tr><td colspan="7" class="table-empty">No files uploaded yet.</td></tr></tbody>
            </table>
          </div>
        </div>

        <!-- USERS -->
        <div class="admin-section" id="admin-users">
          <div class="search-bar">
            <input type="text" class="search-input" id="usersSearch" placeholder="🔍 Search users…" oninput="renderAdminUsers()"/>
          </div>
          <div class="table-wrap">
            <table class="data-table">
              <thead><tr><th>#</th><th>User</th><th>Email</th><th>Phone</th><th>Status</th><th>Joined</th></tr></thead>
              <tbody id="adminUsersBody"><tr><td colspan="6" class="table-empty">Loading users…</td></tr></tbody>
            </table>
          </div>
        </div>

        <!-- PACKAGES -->
        <div class="admin-section" id="admin-packages">
          <div class="admin-card">
            <h3>📦 Package Overview</h3>
            <div class="table-wrap" style="margin-top:0;">
              <table class="data-table">
                <thead><tr><th>#</th><th>Package Name</th><th>Price</th><th>Status</th></tr></thead>
                <tbody id="adminPackagesBody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast-container" id="toastContainer"></div>

<script>
/* ═══════════════════════════════════════════════════════════
   DATA
═══════════════════════════════════════════════════════════ */
const COURSES_FALLBACK = [
  { name:'AFFILIATE MARKETING',     tag:'Marketing',    thumbnail:{url:'https://images.unsplash.com/photo-1563986768609-322da13575f3?w=400&auto=format&fit=crop&q=80'} },
  { name:'INSTAGRAM MARKETING',     tag:'Social Media', thumbnail:{url:'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400&auto=format&fit=crop&q=80'} },
  { name:'GRAPHIC DESIGNING',       tag:'Design',       thumbnail:{url:'https://images.unsplash.com/photo-1561070791-2526d30994b5?w=400&auto=format&fit=crop&q=80'} },
  { name:'VIDEO EDITING',           tag:'Creative',     thumbnail:{url:'https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=400&auto=format&fit=crop&q=80'} },
  { name:'FACEBOOK ADS',            tag:'Advertising',  thumbnail:{url:'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&auto=format&fit=crop&q=80'} },
  { name:'GOOGLE ADS',              tag:'Advertising',  thumbnail:{url:'https://images.unsplash.com/photo-1573804633927-bfcbcd909acd?w=400&auto=format&fit=crop&q=80'} },
  { name:'YOUTUBE MASTERY',         tag:'Content',      thumbnail:{url:'https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=400&auto=format&fit=crop&q=80'} },
  { name:'CONTENT CREATION',        tag:'Creative',     thumbnail:{url:'https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=400&auto=format&fit=crop&q=80'} },
  { name:'SOCIAL MEDIA MANAGEMENT', tag:'Social Media', thumbnail:{url:'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=400&auto=format&fit=crop&q=80'} },
  { name:'DROP SHIPPING',           tag:'eCommerce',    thumbnail:{url:'https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=400&auto=format&fit=crop&q=80'} },
  { name:'FREELANCING',             tag:'Career',       thumbnail:{url:'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400&auto=format&fit=crop&q=80'} },
  { name:'WHATSAPP MARKETING',      tag:'Marketing',    thumbnail:{url:'https://images.unsplash.com/photo-1611944212129-29977ae1398c?w=400&auto=format&fit=crop&q=80'} },
];

const PACKAGES = [
  { id:1, name:'STARTER PACKAGE',  price:'₹500',    rawPrice:500,   sub:'/ one-time', desc:'Begin your digital journey with the most fundamental digital skills and tools.',                   img:'https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=500&auto=format&fit=crop&q=80', featured:false },
  { id:2, name:'BASIC PACKAGE',    price:'₹1,499',  rawPrice:1499,  sub:'/ one-time', desc:'Expand your knowledge base with essential digital marketing modules and templates.',              img:'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=500&auto=format&fit=crop&q=80', featured:false },
  { id:3, name:'SILVER PACKAGE',   price:'₹2,999',  rawPrice:2999,  sub:'/ one-time', desc:'Build intermediate expertise with hands-on projects, live mentoring and resources.',              img:'https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?w=500&auto=format&fit=crop&q=80', featured:false },
  { id:4, name:'GOLD PACKAGE',     price:'₹5,499',  rawPrice:5499,  sub:'/ one-time', desc:'Master advanced strategies with live sessions, real-world case studies and 1:1 mentoring.',       img:'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&auto=format&fit=crop&q=80', featured:true  },
  { id:5, name:'DIAMOND PACKAGE',  price:'₹9,999',  rawPrice:9999,  sub:'/ one-time', desc:'Full suite of professional-grade courses with personal mentoring access and exclusive content.',  img:'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=500&auto=format&fit=crop&q=80', featured:false },
  { id:6, name:'PREMIUM PACKAGE',  price:'₹14,999', rawPrice:14999, sub:'/ one-time', desc:'The ultimate package — all courses, all features, lifetime access and dedicated support.',        img:'https://images.unsplash.com/photo-1552664730-d307ca884978?w=500&auto=format&fit=crop&q=80', featured:false },
];

const TESTIMONIALS = [
  { name:'Ananya Reddy',   loc:'Hyderabad, Telangana', rating:5, text:'"Skillbrzee changed my life! The courses are well-structured and the mentors are incredibly knowledgeable. I landed my first freelance client within a month."' },
  { name:'Rahul Sharma',   loc:'Delhi',                rating:5, text:'"The Gold Package was absolutely worth every rupee. Live sessions, real-time feedback, and a supportive community — everything you need to grow your digital career."' },
  { name:'Priya Nair',     loc:'Bangalore, Karnataka', rating:5, text:'"I started with zero knowledge of digital marketing. Today I run my own agency. Skillbrzee gave me the confidence and tools to make it happen."' },
  { name:'Karan Mehta',    loc:'Mumbai, Maharashtra',  rating:5, text:'"The video editing course was absolutely top-notch. Practical, in-depth, and easy to follow. Got my first paid project within 3 weeks. Highly recommended!"' },
  { name:'Sneha Pillai',   loc:'Chennai, Tamil Nadu',  rating:5, text:'"Best investment I made this year. The freelancing course taught me exactly how to find clients and price my services. Already earning ₹40K/month from home!"' },
  { name:'Arjun Das',      loc:'Kolkata, West Bengal', rating:5, text:'"The Facebook Ads course alone was worth the entire Premium Package price. The ROI knowledge I gained is incredible. Skillbrzee genuinely cares about results."' },
];

/* ═══════════════════════════════════════════════════════════
   UTILITY
═══════════════════════════════════════════════════════════ */
function setLoading(btnId, loading, label='Loading…') {
  const btn = document.getElementById(btnId);
  if (!btn) return;
  btn.disabled = loading;
  if (loading) { btn._original = btn.innerHTML; btn.innerHTML = `<span class="spinner"></span> ${label}`; }
  else { btn.innerHTML = btn._original || label; }
}
function closeModal(id) { document.getElementById(id)?.classList.remove('open'); document.body.style.overflow = ''; }
function openModal(id)  { document.getElementById(id)?.classList.add('open');    document.body.style.overflow = 'hidden'; }

function getFileTypeInfo(url, name='') {
  const ext = (url?.split('.').pop()?.split('?')[0] || name.split('.').pop() || '').toLowerCase();
  if (['pdf'].includes(ext))                                return { cls:'pdf',   icon:'📕', label:'PDF'  };
  if (['doc','docx'].includes(ext))                         return { cls:'doc',   icon:'📘', label:'DOC'  };
  if (['ppt','pptx'].includes(ext))                         return { cls:'doc',   icon:'📙', label:'PPT'  };
  if (['xls','xlsx'].includes(ext))                         return { cls:'doc',   icon:'📗', label:'XLS'  };
  if (['jpg','jpeg','png','gif','webp','svg'].includes(ext)) return { cls:'img',   icon:'🖼️', label:'IMG'  };
  if (['mp4','mov','avi','mkv'].includes(ext))              return { cls:'other', icon:'🎬', label:'VID'  };
  if (['zip','rar','7z'].includes(ext))                     return { cls:'other', icon:'🗜️', label:'ZIP'  };
  return { cls:'other', icon:'📄', label:'FILE' };
}

/* ═══════════════════════════════════════════════════════════
   NAV AUTH
═══════════════════════════════════════════════════════════ */
function updateNavAuth() {
  const slot   = document.getElementById('navAuthSlot');
  const mobBtn = document.getElementById('mobAuthBtn');
  if (isLoggedIn()) {
    const initials = currentUser.name.trim().split(' ').map(w=>w[0]).join('').slice(0,2).toUpperCase();
    slot.innerHTML = `
      <div class="nav-user-wrap" id="navUserWrap">
        <button class="nav-user-btn" onclick="toggleUserDropdown()">
          <div class="nav-user-avatar">${initials}</div>
          <span>${currentUser.name.split(' ')[0]}</span>
          <svg viewBox="0 0 24 24" width="13" height="13" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
        </button>
        <div class="user-dropdown">
          <div class="user-dropdown-header">
            <div class="user-dropdown-name">${currentUser.name}</div>
            <div class="user-dropdown-email">${currentUser.email}</div>
          </div>
          <a onclick="openDashboard()">📊 My Dashboard</a>
          <a onclick="openDashboard()">🎓 My Courses</a>
          <a class="logout-btn" onclick="handleLogout()">↩ Logout</a>
        </div>
      </div>`;
    if (mobBtn) mobBtn.textContent = 'My Dashboard';
  } else {
    slot.innerHTML = `<a href="#" class="btn-nav-login" onclick="openLoginModal(event)">Login</a>`;
    if (mobBtn) mobBtn.textContent = 'Login';
  }
  initCursorTargets();
  renderPackages();
}
function toggleUserDropdown() { document.getElementById('navUserWrap')?.classList.toggle('open'); }
document.addEventListener('click', e => {
  const wrap = document.getElementById('navUserWrap');
  if (wrap && !wrap.contains(e.target)) wrap.classList.remove('open');
});
function handleMobAuth(e) { e.preventDefault(); closeDrawer(); if (isLoggedIn()) openDashboard(); else openLoginModal(e); }

/* ═══════════════════════════════════════════════════════════
   COURSES
═══════════════════════════════════════════════════════════ */
async function renderCourses() {
  let courses = COURSES_FALLBACK;
  try {
    const res = await fetch(`${API_BASE}/courses`, { signal: AbortSignal.timeout(10000) });
    if (res.ok) { const data = await res.json(); if (Array.isArray(data.courses) && data.courses.length>0) courses = data.courses; }
  } catch {}
  const grid = document.getElementById('coursesGrid');
  grid.innerHTML = courses.map(c => `
    <div class="course-card" tabindex="0" onclick="scrollToSection('packages')">
      <div class="course-badge-overlay">${c.tag}</div>
      <img class="course-img" src="${c.thumbnail?.url||c.img||''}" alt="${c.name}" loading="lazy"/>
      <div class="course-body">
        <div class="course-name">${c.name}</div>
        <div class="course-tag">Beginner → Advanced</div>
      </div>
    </div>`).join('');
  observeReveal();
}

/* ═══════════════════════════════════════════════════════════
   PACKAGES
═══════════════════════════════════════════════════════════ */
function isEnrolledIn(pkgId) {
  if (!currentUser?.enrolledPackages) return false;
  return currentUser.enrolledPackages.some(ep => Number(ep.packageId) === Number(pkgId));
}
function renderPackages() {
  const grid = document.getElementById('packagesGrid');
  if (!grid) return;
  grid.innerHTML = PACKAGES.map(p => {
    const enrolled = isEnrolledIn(p.id);
    return `
      <div class="pkg-card ${p.featured?'featured':''}" id="pkg-${p.id}">
        ${p.featured ? '<div class="pkg-badge">⭐ Most Popular</div>' : ''}
        <div class="pkg-img-wrap"><img src="${p.img}" alt="${p.name}" loading="lazy"/></div>
        <div class="pkg-body">
          <div class="pkg-name">${p.name}</div>
          <div class="pkg-desc">${p.desc}</div>
          <hr class="pkg-divider"/>
          <div class="pkg-price">${p.price} <sub>${p.sub}</sub></div>
          ${enrolled
            ? `<div class="enrolled-badge">✅ Already Enrolled</div>`
            : `<button class="btn-enroll" onclick="openEnrollModal(${p.id})">Enroll Now <svg viewBox="0 0 24 24"><path d="M5 12h14"/><polyline points="12 5 19 12 12 19"/></svg></button>`}
        </div>
      </div>`;
  }).join('');
}

/* ═══════════════════════════════════════════════════════════
   PUBLIC RESOURCES
═══════════════════════════════════════════════════════════ */
async function renderPublicResources() {
  const grid = document.getElementById('publicResourcesGrid');
  try {
    const res = await fetch(`${API_BASE}/resources`, { signal: AbortSignal.timeout(12000) });
    if (!res.ok) throw new Error('Failed');
    const data = await res.json();
    const pub = data.resources || [];
    if (pub.length === 0) { grid.innerHTML = '<div class="no-resources">📚 Resources are being added. Check back soon!</div>'; return; }
    grid.innerHTML = pub.map(r => {
      const info = getFileTypeInfo(r.fileUrl || '', r.fileName || '');
      return `
        <div class="resource-card" onclick="downloadResource('${r._id}')">
          <div class="resource-icon ${info.cls}">${info.icon}</div>
          <div class="resource-info">
            <div class="resource-name">${r.title}</div>
            <div class="resource-meta">${r.category} · ${info.label} · ${r.downloads||0} downloads</div>
          </div>
          <div class="resource-dl">⬇ Download</div>
        </div>`;
    }).join('');
  } catch {
    grid.innerHTML = '<div class="no-resources">📚 Resources are being added. Check back soon!</div>';
  }
}

async function downloadResource(id) {
  try {
    const res = await fetch(`${API_BASE}/resources/${id}/download`, { method:'POST', headers:authHeaders() });
    if (!res.ok) {
      if (res.status === 401) { showToast('info','Login Required','Please login to download this resource.'); openModal('loginModal'); return; }
      throw new Error('Download failed');
    }
    const data = await res.json();
    if (data.fileUrl) {
      const url = data.fileUrl.startsWith('http') ? data.fileUrl : `https://skillset-g4oh.onrender.com${data.fileUrl}`;
      window.open(url, '_blank');
      showToast('success','Download Started', data.fileName || 'Resource');
    } else {
      showToast('info','No Download URL','This file has no download link configured.');
    }
  } catch {
    showToast('error','Download Failed','Could not download resource. Please try again.');
  }
}

/* ═══════════════════════════════════════════════════════════
   TESTIMONIALS
═══════════════════════════════════════════════════════════ */
function renderTestimonials() {
  const track = document.getElementById('testiTrack');
  const cards = TESTIMONIALS.map(t => `
    <div class="testi-card">
      <div class="stars">${'★'.repeat(t.rating)}</div>
      <div class="testi-text">${t.text}</div>
      <div class="testi-author">
        <div class="testi-avatar">${t.name[0]}</div>
        <div><div class="testi-name">${t.name}</div><div class="testi-loc">📍 ${t.loc}</div></div>
      </div>
    </div>`).join('');
  track.innerHTML = cards + cards;
}

/* ═══════════════════════════════════════════════════════════
   HERO SLIDER
═══════════════════════════════════════════════════════════ */
let sliderIdx=0, sliderTimer=null;
const slides   = document.querySelectorAll('.hero-slide');
const dotsWrap = document.getElementById('sliderDots');
function buildDots() {
  dotsWrap.innerHTML='';
  slides.forEach((_,i) => {
    const btn = document.createElement('button');
    btn.className = 'slider-dot'+(i===0?' active':'');
    btn.setAttribute('aria-label',`Slide ${i+1}`);
    btn.addEventListener('click',()=>goToSlide(i));
    dotsWrap.appendChild(btn);
  });
}
function goToSlide(n) {
  slides[sliderIdx].classList.remove('active');
  document.querySelectorAll('.slider-dot')[sliderIdx].classList.remove('active');
  sliderIdx=(n+slides.length)%slides.length;
  slides[sliderIdx].classList.add('active');
  document.querySelectorAll('.slider-dot')[sliderIdx].classList.add('active');
}
function startSlider()   { sliderTimer=setInterval(()=>goToSlide(sliderIdx+1),5500); }
function restartSlider() { clearInterval(sliderTimer); startSlider(); }
document.getElementById('prevSlide').addEventListener('click',()=>{goToSlide(sliderIdx-1);restartSlider();});
document.getElementById('nextSlide').addEventListener('click',()=>{goToSlide(sliderIdx+1);restartSlider();});
let touchStartX=0;
document.getElementById('hero').addEventListener('touchstart',e=>{touchStartX=e.changedTouches[0].clientX;},{passive:true});
document.getElementById('hero').addEventListener('touchend',e=>{const dx=e.changedTouches[0].clientX-touchStartX;if(Math.abs(dx)>50){goToSlide(dx<0?sliderIdx+1:sliderIdx-1);restartSlider();}},{passive:true});

/* ═══════════════════════════════════════════════════════════
   PARTICLES
═══════════════════════════════════════════════════════════ */
(function initParticles() {
  const canvas=document.getElementById('particles'),ctx=canvas.getContext('2d');
  let W,H,particles;
  function resize(){W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;}
  function createParticles(){particles=Array.from({length:55},()=>({x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.8+0.4,dx:(Math.random()-.5)*.45,dy:(Math.random()-.5)*.45,a:Math.random()*.55+.1}));}
  function draw(){
    ctx.clearRect(0,0,W,H);
    particles.forEach(p=>{ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle=`rgba(249,115,22,${p.a})`;ctx.fill();p.x+=p.dx;p.y+=p.dy;if(p.x<0||p.x>W)p.dx*=-1;if(p.y<0||p.y>H)p.dy*=-1;});
    for(let i=0;i<particles.length;i++)for(let j=i+1;j<particles.length;j++){const d=Math.hypot(particles[i].x-particles[j].x,particles[i].y-particles[j].y);if(d<110){ctx.beginPath();ctx.strokeStyle=`rgba(249,115,22,${.07*(1-d/110)})`;ctx.lineWidth=.5;ctx.moveTo(particles[i].x,particles[i].y);ctx.lineTo(particles[j].x,particles[j].y);ctx.stroke();}}
    requestAnimationFrame(draw);
  }
  resize();createParticles();draw();
  window.addEventListener('resize',()=>{resize();createParticles();});
})();

/* ═══════════════════════════════════════════════════════════
   CURSOR
═══════════════════════════════════════════════════════════ */
(function initCursor() {
  const dot=document.getElementById('cursorDot'),ring=document.getElementById('cursorRing');
  let mx=-100,my=-100,rx=-100,ry=-100;
  document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;});
  (function loop(){rx+=(mx-rx)*.14;ry+=(my-ry)*.14;dot.style.left=mx+'px';dot.style.top=my+'px';ring.style.left=rx+'px';ring.style.top=ry+'px';requestAnimationFrame(loop);})();
})();
function initCursorTargets() {
  const ring=document.getElementById('cursorRing');
  document.querySelectorAll('a,button,[role="button"]').forEach(el=>{
    if(el._cursorBound) return; el._cursorBound=true;
    el.addEventListener('mouseenter',()=>{ring.style.width='52px';ring.style.height='52px';});
    el.addEventListener('mouseleave',()=>{ring.style.width='36px';ring.style.height='36px';});
  });
}

/* ═══════════════════════════════════════════════════════════
   SCROLL
═══════════════════════════════════════════════════════════ */
const navbar   = document.getElementById('navbar');
const sections = document.querySelectorAll('section[id],footer[id]');
window.addEventListener('scroll',()=>{
  const y=window.scrollY;
  navbar.classList.toggle('scrolled',y>60);
  document.getElementById('backToTop').classList.toggle('visible',y>400);
  let current='';
  sections.forEach(s=>{if(y+100>=s.offsetTop)current=s.id;});
  document.querySelectorAll('.nav-links > li').forEach(li=>{
    const a=li.querySelector(':scope > a');
    if(!a) return;
    li.classList.toggle('active',a.getAttribute('href')==='#'+current);
  });
},{passive:true});
function scrollToTop() { window.scrollTo({top:0,behavior:'smooth'}); }
function scrollToSection(id) { const el=document.getElementById(id); if(el) window.scrollTo({top:el.offsetTop-80,behavior:'smooth'}); }
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click',e=>{
    const t=document.querySelector(a.getAttribute('href'));
    if(!t) return;
    e.preventDefault();
    window.scrollTo({top:t.offsetTop-80,behavior:'smooth'});
  });
});

document.getElementById('topbarClose').addEventListener('click',()=>{
  const bar=document.getElementById('topbar');
  bar.style.transition='height .35s,opacity .35s,padding .35s';
  bar.style.height='0';bar.style.opacity='0';bar.style.padding='0';
  navbar.classList.remove('topbar-active');
  setTimeout(()=>bar.remove(),380);
});

const hamburger=document.getElementById('hamburger'),mobileDrawer=document.getElementById('mobileDrawer');
hamburger.addEventListener('click',()=>{
  const open=mobileDrawer.classList.toggle('open');
  hamburger.classList.toggle('open',open);
  document.body.style.overflow=open?'hidden':'';
});
function closeDrawer(){mobileDrawer.classList.remove('open');hamburger.classList.remove('open');document.body.style.overflow='';}
mobileDrawer.addEventListener('click',e=>{if(e.target===mobileDrawer)closeDrawer();});

const revealObs=new IntersectionObserver(entries=>{
  entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('in');revealObs.unobserve(e.target);}});
},{threshold:.08,rootMargin:'0px 0px -40px 0px'});
function observeReveal(){document.querySelectorAll('.reveal,.reveal-left,.reveal-right').forEach(el=>revealObs.observe(el));}

const NUM_TARGETS=[{id:'n1',target:5465,suffix:'+'},{id:'n2',target:64,suffix:'+'},{id:'n3',target:24,suffix:'+'},{id:'n4',target:100,suffix:'+'}];
let counted=false;
new IntersectionObserver(entries=>{
  if(!entries[0].isIntersecting||counted) return;
  counted=true;
  NUM_TARGETS.forEach(({id,target,suffix})=>{
    const el=document.getElementById(id);let cur=0;const step=target/75;
    const t=setInterval(()=>{cur=Math.min(cur+step,target);el.textContent=Math.floor(cur).toLocaleString('en-IN')+suffix;if(cur>=target)clearInterval(t);},18);
  });
},{threshold:.3}).observe(document.getElementById('numbers'));

/* ═══════════════════════════════════════════════════════════
   ENROLL MODAL
═══════════════════════════════════════════════════════════ */
let currentPkgId=1;
function openEnrollModal(pkgId) {
  const pkg=PACKAGES.find(p=>p.id===pkgId);
  if(!pkg) return;
  currentPkgId=pkgId;
  if(isLoggedIn()){
    document.getElementById('modalName').value       = currentUser.name||'';
    document.getElementById('modalEmail').value      = currentUser.email||'';
    document.getElementById('modalPhone').value      = currentUser.phone||'';
    document.getElementById('modalPassword').value   = '••••••••';
    document.getElementById('modalName').disabled    = true;
    document.getElementById('modalEmail').disabled   = true;
    document.getElementById('modalPhone').disabled   = false;
    document.getElementById('modalPassword').disabled= true;
  } else {
    ['modalName','modalEmail','modalPhone','modalPassword'].forEach(id=>{document.getElementById(id).value='';document.getElementById(id).disabled=false;});
  }
  document.getElementById('modalTag').textContent   = pkg.name;
  document.getElementById('modalTitle').textContent = 'Enroll in '+pkg.name.split(' ').slice(0,2).join(' ');
  document.getElementById('modalDesc').textContent  = pkg.desc;
  document.getElementById('modalPrice').textContent = pkg.price;
  openModal('enrollModal');
}
document.getElementById('modalClose').addEventListener('click',()=>closeModal('enrollModal'));
document.getElementById('enrollModal').addEventListener('click',e=>{if(e.target===document.getElementById('enrollModal'))closeModal('enrollModal');});

/* ═══════════════════════════════════════════════════════════
   FIX #3: SUBMIT ENROLL — Direct to real backend, no demo mode
   Shows wake-up overlay if server is cold-starting
═══════════════════════════════════════════════════════════ */
async function submitEnroll() {
  const name     = document.getElementById('modalName').value.trim();
  const email    = document.getElementById('modalEmail').value.trim();
  const phone    = document.getElementById('modalPhone').value.trim();
  const password = document.getElementById('modalPassword').value.trim();

  if (!name)                            { showToast('error','Missing Name','Please enter your full name.'); return; }
  if (!email || !email.includes('@'))   { showToast('error','Invalid Email','Enter a valid email address.'); return; }
  if (!phone || phone.replace(/\D/g,'').length < 10) { showToast('error','Invalid Phone','Enter a valid 10-digit phone number.'); return; }
  if (!isLoggedIn() && (!password || password.length < 6)) { showToast('error','Weak Password','Password must be at least 6 characters.'); return; }

  setLoading('enrollBtn', true, 'Connecting…');

  try {
    let token = authToken;

    if (!token) {
      /* Register or login */
      setLoading('enrollBtn', true, 'Creating account…');
      const regRes  = await fetch(`${API_BASE}/auth/register`, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({name, email, phone, password})
      });
      const regData = await regRes.json();

      if (regRes.status === 409 || regData.error?.toLowerCase().includes('already')) {
        /* Account exists — try logging in */
        setLoading('enrollBtn', true, 'Logging in…');
        const logRes  = await fetch(`${API_BASE}/auth/login`, {
          method:'POST', headers:{'Content-Type':'application/json'},
          body:JSON.stringify({email, password})
        });
        const logData = await logRes.json();
        if (!logRes.ok) {
          setLoading('enrollBtn',false);
          closeModal('enrollModal');
          showToast('info','Account Exists','This email is already registered. Please log in to continue.');
          document.getElementById('loginEmail').value = email;
          openModal('loginModal');
          return;
        }
        saveAuth(logData.accessToken, logData.user);
        token = logData.accessToken;
      } else if (regRes.ok) {
        saveAuth(regData.accessToken, regData.user);
        token = regData.accessToken;
      } else {
        showToast('error','Registration Failed', regData.error || 'Please try again.');
        setLoading('enrollBtn',false);
        return;
      }
    }

    /* Create payment order */
    setLoading('enrollBtn', true, 'Creating order…');
    const orderRes  = await fetch(`${API_BASE}/payments/create-order`, {
      method:'POST',
      headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},
      body:JSON.stringify({packageId: currentPkgId})
    });
    const orderData = await orderRes.json();
    if (!orderRes.ok) {
      showToast('error','Order Error', orderData.error || 'Could not create order.');
      setLoading('enrollBtn',false);
      return;
    }

    setLoading('enrollBtn', false);
    closeModal('enrollModal');

    /* Dev mock payment */
    if (orderData.mock) {
      try {
        const devRes  = await fetch(`${API_BASE}/payments/dev-confirm`, {
          method:'POST',
          headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},
          body:JSON.stringify({paymentId: orderData.paymentId})
        });
        const devData = await devRes.json();
        if (devRes.ok) {
          await refreshUser(); updateNavAuth();
          showToast('success','🎓 Enrolled!',`${orderData.packageName} — Dev payment confirmed.`);
        } else {
          showToast('error','Dev Payment Failed', devData.error || 'Could not confirm payment.');
        }
      } catch {
        showToast('error','Network Error','Could not confirm dev payment.');
      }
      return;
    }

    /* Real Razorpay */
    if (typeof Razorpay === 'undefined') {
      showToast('error','Payment Error','Razorpay SDK failed to load. Please refresh and try again.');
      return;
    }
    const rzp = new Razorpay({
      key:         orderData.keyId,
      amount:      orderData.amount,
      currency:    'INR',
      name:        'Skillbrzee',
      description: orderData.packageName,
      order_id:    orderData.orderId,
      prefill:     orderData.prefill,
      theme:       { color: '#f97316' },
      handler: async (response) => {
        try {
          const verRes  = await fetch(`${API_BASE}/payments/verify`, {
            method:'POST',
            headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},
            body:JSON.stringify({
              razorpay_order_id:  response.razorpay_order_id,
              razorpay_payment_id:response.razorpay_payment_id,
              razorpay_signature: response.razorpay_signature,
              paymentId:          orderData.paymentId
            })
          });
          const verData = await verRes.json();
          if (verRes.ok) {
            await refreshUser(); updateNavAuth();
            showToast('success','🎓 Enrolled!',`${orderData.packageName} — Check your email!`);
          } else {
            showToast('error','Verification Failed', verData.error || 'Contact support@skillbrzee.in');
          }
        } catch {
          showToast('error','Network Error','Could not verify payment. Contact support@skillbrzee.in');
        }
      },
      modal: { ondismiss: () => showToast('info','Payment Cancelled','You can try again anytime.') }
    });
    rzp.open();

  } catch(err) {
    console.error('[enrollFlow]', err);
    showToast('error','Connection Error','Please check your internet and try again.');
    setLoading('enrollBtn', false);
  }
}

/* ═══════════════════════════════════════════════════════════
   FIX #4: USER LOGIN — Direct backend, no offline fallback
═══════════════════════════════════════════════════════════ */
function openLoginModal(e){e&&e.preventDefault();openModal('loginModal');}
document.getElementById('loginModal').addEventListener('click',e=>{if(e.target===document.getElementById('loginModal'))closeModal('loginModal');});

async function handleLogin(){
  const email    = document.getElementById('loginEmail').value.trim();
  const password = document.getElementById('loginPassword').value.trim();
  if (!email || !password) { showToast('error','Missing Fields','Enter your email and password.'); return; }

  setLoading('loginBtn', true, 'Logging in…');
  try {
    const res  = await fetch(`${API_BASE}/auth/login`, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({email, password})
    });
    const data = await res.json();
    if (!res.ok) {
      showToast('error','Login Failed', data.error || 'Invalid email or password.');
      setLoading('loginBtn',false);
      return;
    }
    saveAuth(data.accessToken, data.user);
    closeModal('loginModal');
    updateNavAuth();
    showToast('success','Login Successful!',`Welcome back, ${data.user.name} 🎉`);
    document.getElementById('loginEmail').value    = '';
    document.getElementById('loginPassword').value = '';
  } catch(err) {
    console.error('[login]', err);
    showToast('error','Connection Error','Could not reach server. Please try again.');
  } finally {
    setLoading('loginBtn', false);
  }
}

function handleLogout(){ clearAuth(); closeModal('dashboardModal'); updateNavAuth(); showToast('success','Logged Out','See you soon! 👋'); }

/* ═══════════════════════════════════════════════════════════
   USER DASHBOARD
═══════════════════════════════════════════════════════════ */
function switchDashTab(tab, btn) {
  document.querySelectorAll('[id^="dashTab-"]').forEach(el=>el.style.display='none');
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('dashTab-'+tab).style.display='';
  btn.classList.add('active');
  if(tab==='payments') loadPaymentHistory();
  if(tab==='resources') renderDashResources();
}
async function openDashboard(){
  if (!isLoggedIn()) { openModal('loginModal'); return; }
  document.getElementById('navUserWrap')?.classList.remove('open');
  document.getElementById('dashName').textContent  = currentUser.name;
  document.getElementById('dashEmail').textContent = currentUser.email;
  openModal('dashboardModal');
  await refreshUser();
  renderDashEnrollments();
}
function renderDashEnrollments(){
  const el  = document.getElementById('dashEnrollments');
  const eps = currentUser?.enrolledPackages || [];
  if (eps.length === 0) { el.innerHTML=`<div class="no-enrollments">No enrollments yet. <a onclick="closeModal('dashboardModal');scrollToSection('packages')">Browse packages →</a></div>`; return; }
  el.innerHTML = eps.map(ep=>`
    <div class="enrolled-pkg-item">
      <div><div class="enrolled-pkg-name">${ep.packageName||'Package #'+ep.packageId}</div><div class="enrolled-pkg-date">Enrolled ${new Date(ep.enrolledAt).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})}</div></div>
      <span class="enrolled-pkg-badge">✅ Active</span>
    </div>`).join('');
}
function renderDashResources(){
  const el      = document.getElementById('dashResources');
  const visible = resourceStore.filter(r=>r.visibility==='public'||(r.visibility==='enrolled'&&isLoggedIn()));
  if (visible.length===0) { el.innerHTML='<p style="color:var(--text2);font-size:.85rem;text-align:center;padding:20px 0;">No resources available.</p>'; return; }
  el.innerHTML = visible.map(r=>{
    const info = getFileTypeInfo(r.url, r.title);
    return `<div class="enrolled-pkg-item" onclick="downloadResource('${r.id}')" style="cursor:pointer;">
      <div style="display:flex;align-items:center;gap:10px;">
        <span style="font-size:1.4rem;">${info.icon}</span>
        <div><div class="enrolled-pkg-name">${r.title}</div><div class="enrolled-pkg-date">${r.category}</div></div>
      </div>
      <span class="enrolled-pkg-badge" style="background:rgba(249,115,22,.15);border-color:rgba(249,115,22,.3);color:var(--orange);">⬇ Download</span>
    </div>`;
  }).join('');
}
async function loadPaymentHistory(){
  const el = document.getElementById('dashPayments');
  try {
    const res  = await fetch(`${API_BASE}/payments/my-payments`, {headers: authHeaders()});
    const data = await res.json();
    if (!res.ok) throw new Error(data.error);
    const payments = data.payments || [];
    if (payments.length===0) { el.innerHTML=`<p style="color:var(--text2);font-size:.84rem;text-align:center;padding:16px 0;">No payment records yet.</p>`; return; }
    el.innerHTML = payments.slice(0,5).map(p=>{
      const sc = p.status==='paid'?'var(--green)':p.status==='failed'?'var(--red)':'var(--text2)';
      return `<div style="display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;margin-bottom:6px;font-size:.82rem;">
        <div><div style="font-weight:600;">${p.packageName}</div><div style="color:var(--text2);font-size:.74rem;">${new Date(p.createdAt).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})}</div></div>
        <div style="text-align:right;"><div style="font-weight:700;color:var(--orange);">₹${(p.amount/100).toLocaleString('en-IN')}</div><div style="font-size:.72rem;color:${sc};text-transform:uppercase;font-weight:700;">${p.status}</div></div>
      </div>`;
    }).join('');
  } catch {
    const eps = currentUser?.enrolledPackages || [];
    if (eps.length === 0) { el.innerHTML=`<p style="color:var(--text2);font-size:.84rem;text-align:center;padding:16px 0;">No payment records yet.</p>`; return; }
    el.innerHTML = eps.map(ep=>`
      <div style="display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;margin-bottom:6px;font-size:.82rem;">
        <div><div style="font-weight:600;">${ep.packageName}</div><div style="color:var(--text2);font-size:.74rem;">${new Date(ep.enrolledAt).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})}</div></div>
        <div style="text-align:right;"><div style="font-weight:700;color:var(--green);">✅ Enrolled</div></div>
      </div>`).join('');
  }
}

/* ═══════════════════════════════════════════════════════════
   FIX #5: ADMIN LOGIN — hardcoded first, then real backend
═══════════════════════════════════════════════════════════ */
function openAdminLogin(e){ e&&e.preventDefault(); openModal('adminLoginModal'); }
document.getElementById('adminLoginModal').addEventListener('click',e=>{if(e.target===document.getElementById('adminLoginModal'))closeModal('adminLoginModal');});

async function handleAdminLogin(){
  const email = document.getElementById('adminLoginEmail').value.trim();
  const pass  = document.getElementById('adminLoginPass').value;

  if (!email || !pass) {
    showToast('error','Missing Fields','Please enter email and password.');
    return;
  }

  setLoading('adminLoginBtn', true, 'Verifying…');

  try {
    /* Hardcoded admin check — works without backend */
    if (email === ADMIN_CREDENTIALS.username && pass === ADMIN_CREDENTIALS.password) {
      const adminUser = { name: ADMIN_CREDENTIALS.name, email: ADMIN_CREDENTIALS.username, role: 'admin', enrolledPackages: [] };
      saveAuth('admin-local-token-' + Date.now(), adminUser);
      closeModal('adminLoginModal');
      document.getElementById('adminLoginEmail').value = '';
      document.getElementById('adminLoginPass').value  = '';
      setLoading('adminLoginBtn', false);
      await openAdminPanel();
      return;
    }

    /* Try backend for API-based admin accounts */
    const res  = await fetch(`${API_BASE}/auth/login`, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({ email, password: pass })
    });
    if (!res.ok) throw new Error('Invalid credentials');
    const data = await res.json();

    if (data.user && data.user.role === 'admin') {
      saveAuth(data.accessToken, data.user);
      closeModal('adminLoginModal');
      document.getElementById('adminLoginEmail').value = '';
      document.getElementById('adminLoginPass').value  = '';
      setLoading('adminLoginBtn', false);
      await openAdminPanel();
    } else {
      showToast('error','Access Denied','Admin access required.');
      document.getElementById('adminLoginPass').value = '';
      setLoading('adminLoginBtn', false);
    }
  } catch(err) {
    console.error('Admin login error:', err);
    showToast('error','Access Denied','Invalid admin credentials.');
    document.getElementById('adminLoginPass').value = '';
    setLoading('adminLoginBtn', false);
  }
}

/* ═══════════════════════════════════════════════════════════
   ADMIN PANEL
═══════════════════════════════════════════════════════════ */
  async function loadAnalytics() {
  const from = document.getElementById('analyticsFrom').value;
  const to   = document.getElementById('analyticsTo').value;
  if (!from || !to) { showToast('info', 'Select Dates', 'Please select both from and to dates.'); return; }
  try {
    const res  = await fetch(`${API_BASE}/admin/analytics?from=${from}&to=${to}`, { headers: authHeaders() });
    if (!res.ok) throw new Error('Failed');
    const d = await res.json();
    const fmt = n => '₹' + (n||0).toLocaleString('en-IN');
    document.getElementById('an-inclGst').textContent    = fmt(d.includingGst);
    document.getElementById('an-exclGst').textContent    = fmt(d.withoutGst);
    document.getElementById('an-gst').textContent        = fmt(d.gstAmount);
    document.getElementById('an-commission').textContent = fmt(d.totalCommission);
    document.getElementById('an-reward').textContent     = fmt(d.totalReward);
    document.getElementById('an-profit').textContent     = fmt(d.totalProfit);
    document.getElementById('an-razorpay').textContent   = fmt(d.razorpaySales);
    document.getElementById('an-phonepe').textContent    = fmt(d.phonepeSales);
    document.getElementById('an-wallet').textContent     = fmt(d.walletSales);
    document.getElementById('an-upi').textContent        = fmt(d.upiSales);
    document.getElementById('an-cosmofeed').textContent  = fmt(d.cosmofeedSales);
    // Package breakdown
    if (d.packageSales) {
      d.packageSales.forEach(p => {
        const key = p.name?.toLowerCase().replace(' package','').replace(' ','');
        const el  = document.getElementById('pkg-'+key);
        if (el) { el.textContent = fmt(p.revenue); el.parentElement.querySelector('.admin-stat-label').textContent = p.name+' ['+p.count+']'; }
      });
    }
    showToast('success', 'Analytics Loaded', `Data for ${from} to ${to}`);
  } catch {
    showToast('error', 'Failed', 'Could not load analytics. Backend endpoint /api/admin/analytics may not exist yet.');
  }
}

function clearAnalytics() {
  document.getElementById('analyticsFrom').value = '';
  document.getElementById('analyticsTo').value   = '';
}
async function openAdminPanel(){
  isAdminMode = true;
  document.getElementById('adminPanel').classList.add('open');
  document.body.style.overflow = 'hidden';
  await updateAdminStats();
  await renderAdminFiles();
  await renderAdminUsers();
  renderAdminPackages();
  startAdminClock();
  showToast('success','Admin Access Granted','Welcome to the Admin Panel 🛡️');
}
function exitAdmin(){
  isAdminMode = false;
  document.getElementById('adminPanel').classList.remove('open');
  document.body.style.overflow = '';
}

async function switchAdminSection(section, el){
  document.querySelectorAll('.admin-section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.admin-nav-item').forEach(i=>i.classList.remove('active'));
  document.getElementById('admin-'+section).classList.add('active');
  el.classList.add('active');
  const titles={dashboard:'Dashboard',upload:'Upload Files',files:'Manage Files',users:'Users',packages:'Packages'};
  document.getElementById('adminSectionTitle').textContent = titles[section]||section;
  if(section==='files')     await renderAdminFiles();
  if(section==='users')     await renderAdminUsers();
  if(section==='dashboard') await updateAdminStats();
}

function startAdminClock(){
  const el = document.getElementById('adminClock');
  function tick(){ const now=new Date(); el.textContent=now.toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit',second:'2-digit'}); }
  tick(); setInterval(tick,1000);
}

async function updateAdminStats(){
  try {
    const res  = await fetch(`${API_BASE}/admin/stats`, { headers: authHeaders() });
    if (!res.ok) throw new Error('Failed');
    const data = await res.json();
    document.getElementById('stat-files').textContent     = data.totalFiles ?? '—';
    document.getElementById('stat-downloads').textContent = data.totalDownloads ?? '—';
    document.getElementById('stat-users').textContent     = (data.enrolledCount ?? data.totalUsers ?? 0).toLocaleString('en-IN');
  } catch {
    document.getElementById('stat-files').textContent     = resourceStore.length;
    document.getElementById('stat-downloads').textContent = '—';
    document.getElementById('stat-users').textContent     = '5,465';
  }
}

/* FILE UPLOAD */
let selectedFileData = null;
function handleDragOver(e){e.preventDefault();document.getElementById('uploadArea').classList.add('drag-over');}
function handleDrop(e){ e.preventDefault(); document.getElementById('uploadArea').classList.remove('drag-over'); const file=e.dataTransfer.files[0]; if(file) processSelectedFile(file); }
function handleFileSelect(e){ const file=e.target.files[0]; if(file) processSelectedFile(file); }
function processSelectedFile(file){
  selectedFileData = file;
  document.getElementById('uploadAreaTitle').textContent = '📎 '+file.name+' ('+formatBytes(file.size)+')';
  if(!document.getElementById('uploadTitle').value) document.getElementById('uploadTitle').value = file.name.replace(/\.[^.]+$/,'');
}
function formatBytes(b){ if(b<1024) return b+'B'; if(b<1048576) return (b/1024).toFixed(1)+'KB'; return (b/1048576).toFixed(1)+'MB'; }

async function submitUpload(){
  const title = document.getElementById('uploadTitle').value.trim();
  const url   = document.getElementById('uploadUrl').value.trim();
  const cat   = document.getElementById('uploadCategory').value;
  const vis   = document.getElementById('uploadVisibility').value;
  const desc  = document.getElementById('uploadDesc').value.trim();
  if (!title) { showToast('error','Missing Title','Please enter a file title.'); return; }
  if (!url && !selectedFileData) { showToast('error','No File','Please enter a URL or select a file.'); return; }

  try {
    if (selectedFileData && !url) {
      const progress = document.getElementById('uploadProgress');
      const fill     = document.getElementById('uploadProgressFill');
      const pct      = document.getElementById('uploadProgressPct');
      const lbl      = document.getElementById('uploadProgressLabel');
      progress.classList.add('show');
      const formData = new FormData();
      formData.append('file', selectedFileData);
      formData.append('title', title); formData.append('category', cat); formData.append('visibility', vis); formData.append('description', desc);
      const xhr = new XMLHttpRequest();
      xhr.upload.addEventListener('progress', (e) => { if(e.lengthComputable){ const p=(e.loaded/e.total)*100; fill.style.width=p+'%'; pct.textContent=Math.floor(p)+'%'; lbl.textContent=p<100?'Uploading…':'Processing…'; } });
      xhr.addEventListener('load', async () => {
        progress.classList.remove('show'); fill.style.width='0%';
        if(xhr.status===201){
          showToast('success','File Uploaded!',title+' saved successfully.');
          resetUploadForm();
          await renderPublicResources(); await updateAdminStats(); await renderAdminFiles();
        } else {
          const err=JSON.parse(xhr.responseText||'{}');
          showToast('error','Upload Failed',err.error||'Could not upload file.');
        }
      });
      xhr.addEventListener('error', () => { progress.classList.remove('show'); fill.style.width='0%'; showToast('error','Upload Failed','Network error.'); });
      xhr.open('POST', `${API_BASE}/resources/upload`);
      const tok = localStorage.getItem('sb_token');
      if (tok) xhr.setRequestHeader('Authorization', `Bearer ${tok}`);
      xhr.send(formData);
    } else {
      const res = await fetch(`${API_BASE}/resources/add-url`, {
        method:'POST',
        headers:authHeaders(),
        body:JSON.stringify({title, fileUrl:url, category:cat, visibility:vis, description:desc})
      });
      if (!res.ok) { const err=await res.json(); throw new Error(err.error||'Failed to add resource'); }
      showToast('success','File Saved!', title+' added successfully.');
      resetUploadForm(); await renderPublicResources(); await updateAdminStats(); await renderAdminFiles();
    }
  } catch(err) {
    console.error('Upload error:', err);
    showToast('error','Upload Failed', err.message||'Could not upload file.');
  }
}

function resetUploadForm(){
  ['uploadTitle','uploadUrl','uploadDesc'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('uploadCategory').value='General';
  document.getElementById('uploadVisibility').value='public';
  document.getElementById('uploadAreaTitle').textContent='Drag & drop file here, or click to browse';
  document.getElementById('fileInput').value='';
  selectedFileData=null;
}

async function renderAdminFiles(){
  const tbody  = document.getElementById('adminFilesBody');
  const search = document.getElementById('filesSearch')?.value.toLowerCase()||'';
  const cat    = document.getElementById('filesFilterCat')?.value||'';

  try {
    const res  = await fetch(`${API_BASE}/admin/resources`, {
      headers: authHeaders(),
      signal: AbortSignal.timeout(12000)
    });
    if (!res.ok) throw new Error('Failed');
    const data = await res.json();
    let files = data.resources || [];

    if (search) files = files.filter(f=>f.title.toLowerCase().includes(search)||(f.category||'').toLowerCase().includes(search));
    if (cat)    files = files.filter(f=>f.category===cat);
    if (files.length===0) { tbody.innerHTML='<tr><td colspan="7" class="table-empty">No files found.</td></tr>'; return; }

    tbody.innerHTML = files.map((f,i)=>{
      const info     = getFileTypeInfo(f.fileUrl||f.url||'', f.fileName||'');
      const visCls   = f.visibility==='public'?'active':'pending';
      const visLbl   = f.visibility==='public'?'🌍 Public':'🔒 Enrolled';
      const uploadDate = f.createdAt ? new Date(f.createdAt) : new Date();
      return `<tr>
        <td style="color:var(--text2);">${i+1}</td>
        <td><div style="font-weight:600;font-size:.85rem;">${f.title}</div><div style="font-size:.73rem;color:var(--text2);">${f.fileName||''}</div></td>
        <td><span style="color:var(--text2);font-size:.83rem;">${f.category}</span></td>
        <td><span class="file-type-badge ${info.cls}">${info.label}</span></td>
        <td><span class="status-badge ${visCls}">${visLbl}</span></td>
        <td style="color:var(--text2);font-size:.8rem;">${uploadDate.toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})}</td>
        <td>
          <button class="table-action-btn" onclick="previewFile('${f._id}','${f.fileUrl||''}')">👁 View</button>
          <button class="table-action-btn danger" onclick="deleteFile('${f._id}')">🗑 Delete</button>
        </td>
      </tr>`;
    }).join('');
  } catch(err) {
    console.error('Failed to load admin files:', err);
    tbody.innerHTML='<tr><td colspan="7" class="table-empty">❌ Failed to load files. Check your connection.</td></tr>';
  }
}

function previewFile(id, directUrl){
  if (directUrl && directUrl.startsWith('http')) { window.open(directUrl, '_blank'); return; }
  fetch(`${API_BASE}/admin/resources`, { headers: authHeaders() })
    .then(r=>r.json())
    .then(data=>{ const f = data.resources?.find(r=>r._id===id); if(f?.fileUrl){ const url=f.fileUrl.startsWith('http')?f.fileUrl:`https://skillset-g4oh.onrender.com${f.fileUrl}`; window.open(url,'_blank'); } else showToast('info','No Preview','No URL available for this file.'); })
    .catch(()=>showToast('error','Preview Failed','Could not preview file.'));
}

async function deleteFile(id){
  if (!confirm('Are you sure you want to delete this file?')) return;
  try {
    const res = await fetch(`${API_BASE}/resources/${id}`, { method:'DELETE', headers:authHeaders() });
    if (!res.ok) throw new Error('Delete failed');
    showToast('success','Deleted','File removed successfully.');
    await renderAdminFiles(); await renderPublicResources(); await updateAdminStats();
  } catch(err) {
    showToast('error','Delete Failed','Could not delete file. Please try again.');
  }
}

async function renderAdminUsers(){
  const tbody  = document.getElementById('adminUsersBody');
  const search = document.getElementById('usersSearch')?.value.toLowerCase()||'';
  try {
    const url  = search ? `${API_BASE}/admin/users?search=${encodeURIComponent(search)}` : `${API_BASE}/admin/users`;
    const res  = await fetch(url, { headers: authHeaders(), signal: AbortSignal.timeout(12000) });
    if (!res.ok) throw new Error('Failed');
    const data = await res.json();
    let users  = data.users || [];
    if (users.length===0) { tbody.innerHTML='<tr><td colspan="6" class="table-empty">No users found.</td></tr>'; return; }
    tbody.innerHTML = users.map((u,i)=>{
      const initials  = (u.name||'').split(' ').map(w=>w[0]).join('').slice(0,2).toUpperCase()||'U';
      const joinDate  = u.createdAt ? new Date(u.createdAt) : new Date();
      return `<tr>
        <td style="color:var(--text2);">${i+1}</td>
        <td><div class="user-info-cell"><div class="user-avatar-sm">${initials}</div><div style="font-weight:600;font-size:.85rem;">${u.name||'—'}</div></div></td>
        <td style="font-size:.83rem;color:var(--text2);">${u.email||'—'}</td>
        <td style="font-size:.83rem;color:var(--text2);">${u.phone||'—'}</td>
        <td><span class="status-badge ${u.isActive!==false?'active':'pending'}">${u.isActive!==false?'Active':'Inactive'}</span></td>
        <td style="color:var(--text2);font-size:.8rem;">${joinDate.toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})}</td>
      </tr>`;
    }).join('');
  } catch {
    tbody.innerHTML='<tr><td colspan="6" class="table-empty">❌ Could not load users. Check network.</td></tr>';
  }
}

function renderAdminPackages(){
  const tbody = document.getElementById('adminPackagesBody');
  tbody.innerHTML = PACKAGES.map((p,i)=>`<tr>
    <td style="color:var(--text2);">${i+1}</td>
    <td style="font-weight:700;">${p.name}</td>
    <td style="color:var(--orange);font-weight:700;">${p.price}</td>
    <td><span class="status-badge active">Active</span></td>
  </tr>`).join('');
}

/* ═══════════════════════════════════════════════════════════
   TOAST
═══════════════════════════════════════════════════════════ */
const TOAST_ICONS={
  success:'<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>',
  error:  '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>',
  info:   '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>',
};
function showToast(type, title, message, duration=4500){
  const container = document.getElementById('toastContainer');
  const toast     = document.createElement('div');
  toast.className = 'toast';
  toast.innerHTML = `<div class="toast-icon ${type}">${TOAST_ICONS[type]||TOAST_ICONS.info}</div><div class="toast-text"><div class="toast-title">${title}</div><div class="toast-sub">${message}</div></div>`;
  container.appendChild(toast);
  requestAnimationFrame(()=>requestAnimationFrame(()=>toast.classList.add('show')));
  setTimeout(()=>{toast.classList.remove('show');setTimeout(()=>toast.remove(),420);},duration);
}

/* KEYBOARD */
document.addEventListener('keydown',e=>{
  if(e.key!=='Escape') return;
  ['enrollModal','loginModal','dashboardModal','adminLoginModal'].forEach(closeModal);
  closeDrawer();
  if(isAdminMode) exitAdmin();
});
document.getElementById('backToTop').addEventListener('click', scrollToTop);

/* ENTER KEY on login/enroll inputs */
document.getElementById('loginPassword').addEventListener('keydown', e => { if(e.key==='Enter') handleLogin(); });
document.getElementById('loginEmail').addEventListener('keydown', e => { if(e.key==='Enter') handleLogin(); });
document.getElementById('adminLoginPass').addEventListener('keydown', e => { if(e.key==='Enter') handleAdminLogin(); });

/* PRELOADER */
(function(){
  const loader=document.createElement('div');
  loader.id='preloader';
  loader.style.cssText='position:fixed;inset:0;z-index:99999;background:var(--bg0);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;transition:opacity .5s ease;';
  loader.innerHTML=`<div style="font-family:'Sora',sans-serif;font-size:2.2rem;font-weight:900;background:linear-gradient(135deg,#f97316,#fbbf24);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">Skillbrzee</div><div style="width:48px;height:3px;background:var(--bg3);border-radius:2px;overflow:hidden;"><div id="loaderBar" style="height:100%;background:linear-gradient(90deg,#f97316,#fbbf24);width:0%;border-radius:2px;transition:width .05s;"></div></div>`;
  document.body.appendChild(loader);
  let progress=0;
  const bar=document.getElementById('loaderBar');
  const tick=setInterval(()=>{progress+=Math.random()*18;if(progress>=100){progress=100;clearInterval(tick);}bar.style.width=progress+'%';},60);
  window.addEventListener('load',()=>{setTimeout(()=>{loader.style.opacity='0';setTimeout(()=>loader.remove(),520);},300);});
})();

/* ═══════════════════════════════════════════════════════════
   INIT
═══════════════════════════════════════════════════════════ */
document.addEventListener('DOMContentLoaded', async () => {
  // Restore auth from localStorage immediately (no server needed)
  updateNavAuth();
  renderPackages();
  renderTestimonials();
  buildDots();
  startSlider();
  observeReveal();
  initCursorTargets();

  // Kick off server calls in background — don't block page render
  Promise.allSettled([
    refreshUser(),
    renderCourses(),
    renderPublicResources(),
  ]).then(() => {
    updateNavAuth();
  });
});
</script>
</body>
</html>
