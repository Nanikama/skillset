<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Skillbrzee | India's Trusted Learning Platform</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800;900&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --orange: #f97316; --orange-dark: #ea580c; --orange-dim: rgba(249,115,22,.12); --orange-glow: rgba(249,115,22,.35);
      --gold: #fbbf24; --sky: #0ea5e9; --green: #22c55e; --red: #ef4444; --purple: #a855f7; --blue: #3b82f6;
      --bg0: #050c17; --bg1: #0a1628; --bg2: #111e33; --bg3: #192540;
      --surface: #1b2a42; --surface2: #223354; --text: #eef2ff; --text2: #94a3b8;
      --border: rgba(255,255,255,.07); --border2: rgba(255,255,255,.12);
      --radius-sm: 8px; --radius: 14px; --radius-lg: 20px;
      --shadow-card: 0 16px 40px rgba(0,0,0,.45); --transition: .3s cubic-bezier(.4,0,.2,1);
    }
    html { scroll-behavior: smooth; font-size: 16px; }
    body { font-family: 'DM Sans', sans-serif; background: var(--bg0); color: var(--text); overflow-x: hidden; line-height: 1.6; }
    img { display: block; max-width: 100%; } a { text-decoration: none; color: inherit; }
    body::after { content:''; position:fixed; inset:0; z-index:9999; pointer-events:none; background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23noise)' opacity='.035'/%3E%3C/svg%3E"); }
    ::-webkit-scrollbar { width:5px; } ::-webkit-scrollbar-track { background:var(--bg0); } ::-webkit-scrollbar-thumb { background:var(--orange); border-radius:4px; }
    ::selection { background:var(--orange); color:#fff; }
    .cursor-dot,.cursor-ring { position:fixed; top:0; left:0; pointer-events:none; z-index:10000; border-radius:50%; transform:translate(-50%,-50%); transition:opacity .3s; }
    .cursor-dot { width:8px; height:8px; background:var(--orange); }
    .cursor-ring { width:36px; height:36px; border:1.5px solid rgba(249,115,22,.5); transition:transform .12s,width .2s,height .2s; }
    @media (hover:none) { .cursor-dot,.cursor-ring { display:none; } }
    .container { max-width:1240px; margin:0 auto; padding:0 5%; }
    .section-tag { display:inline-flex; align-items:center; gap:7px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.28); color:var(--orange); border-radius:100px; padding:5px 15px; font-size:.75rem; font-weight:700; letter-spacing:.7px; text-transform:uppercase; margin-bottom:14px; }
    .section-tag::before { content:''; width:6px; height:6px; background:var(--orange); border-radius:50%; animation:blink 2s infinite; }
    .section-title { font-family:'Sora',sans-serif; font-weight:800; font-size:clamp(1.9rem,3.5vw,2.9rem); line-height:1.12; letter-spacing:-1px; margin-bottom:14px; }
    .section-sub { color:var(--text2); font-size:.97rem; line-height:1.75; }
    .gradient-text { background:linear-gradient(135deg,var(--orange) 0%,var(--gold) 55%,#fb923c 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
    .btn { display:inline-flex; align-items:center; gap:9px; padding:13px 26px; border-radius:var(--radius); font-weight:600; font-size:.93rem; cursor:pointer; border:none; transition:var(--transition); white-space:nowrap; }
    .btn-primary { background:linear-gradient(135deg,var(--orange),#fb923c); color:#fff; box-shadow:0 0 28px var(--orange-glow); }
    .btn-primary:hover { transform:translateY(-2px); box-shadow:0 0 44px rgba(249,115,22,.55); }
    .btn-ghost { background:transparent; color:var(--text); border:1px solid var(--border2); }
    .btn-ghost:hover { background:rgba(255,255,255,.06); border-color:rgba(255,255,255,.22); }
    .reveal { opacity:0; transform:translateY(36px); transition:opacity .75s ease,transform .75s ease; }
    .reveal.in { opacity:1; transform:none; }
    .delay-1 { transition-delay:.12s; } .delay-2 { transition-delay:.24s; } .delay-3 { transition-delay:.36s; }
    .topbar { background:linear-gradient(90deg,var(--orange-dark),var(--orange),var(--gold)); color:#fff; font-size:.78rem; font-weight:600; letter-spacing:.4px; text-align:center; padding:8px 5%; position:relative; z-index:1001; }
    .topbar-close { position:absolute; right:20px; top:50%; transform:translateY(-50%); background:none; border:none; color:#fff; cursor:pointer; font-size:1rem; opacity:.8; }
    .navbar { position:fixed; top:0; left:0; right:0; z-index:1000; height:70px; display:flex; align-items:center; justify-content:space-between; padding:0 5%; background:rgba(5,12,23,.8); backdrop-filter:blur(24px) saturate(180%); border-bottom:1px solid var(--border); transition:height var(--transition),background var(--transition); }
    .navbar.scrolled { height:60px; background:rgba(5,12,23,.96); box-shadow:0 4px 24px rgba(0,0,0,.5); }
    .navbar.topbar-active { top:37px; }
    .nav-brand { font-family:'Sora',sans-serif; font-size:1.55rem; font-weight:900; background:linear-gradient(135deg,var(--orange),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; letter-spacing:-1px; cursor:pointer; }
    .nav-links { display:flex; align-items:center; gap:4px; list-style:none; }
    .nav-links > li > a { color:var(--text2); font-size:.88rem; font-weight:500; padding:8px 14px; border-radius:var(--radius-sm); transition:var(--transition); display:flex; align-items:center; gap:5px; }
    .nav-links > li > a:hover,.nav-links > li.active > a { color:var(--text); background:rgba(255,255,255,.06); }
    .nav-links > li > a .chevron { width:14px; height:14px; fill:none; stroke:currentColor; stroke-width:2; transition:transform .25s; }
    .dropdown-menu { position:absolute; top:calc(100% + 10px); left:50%; transform:translateX(-50%) translateY(8px); background:var(--surface); border:1px solid var(--border2); border-radius:var(--radius); padding:8px; min-width:220px; box-shadow:0 28px 56px rgba(0,0,0,.6); opacity:0; visibility:hidden; pointer-events:none; transition:opacity .25s,transform .25s,visibility .25s; }
    .nav-links > li { position:relative; }
    .nav-links > li:hover .dropdown-menu { opacity:1; visibility:visible; pointer-events:auto; transform:translateX(-50%) translateY(0); }
    .dropdown-menu a { display:flex; align-items:center; gap:10px; color:var(--text2); font-size:.85rem; padding:10px 13px; border-radius:var(--radius-sm); transition:var(--transition); }
    .dropdown-menu a::before { content:''; width:6px; height:6px; border-radius:50%; background:var(--orange-dark); flex-shrink:0; }
    .dropdown-menu a:hover { color:var(--orange); background:var(--orange-dim); }
    .btn-nav-login { background:linear-gradient(135deg,var(--orange),#fb923c) !important; color:#fff !important; border-radius:var(--radius-sm) !important; font-weight:700 !important; padding:9px 22px !important; box-shadow:0 0 18px var(--orange-glow); font-size:.88rem !important; }
    .nav-user-wrap { position:relative; }
    .nav-user-btn { display:flex; align-items:center; gap:9px; background:var(--surface); border:1px solid var(--border2); border-radius:var(--radius-sm); padding:7px 14px; cursor:pointer; transition:var(--transition); font-size:.85rem; font-weight:600; }
    .nav-user-btn:hover { border-color:rgba(249,115,22,.4); background:var(--orange-dim); }
    .nav-user-avatar { width:28px; height:28px; border-radius:50%; background:linear-gradient(135deg,var(--orange),var(--gold)); display:flex; align-items:center; justify-content:center; font-family:'Sora',sans-serif; font-weight:800; font-size:.75rem; color:#fff; flex-shrink:0; }
    .user-dropdown { position:absolute; top:calc(100% + 10px); right:0; background:var(--surface); border:1px solid var(--border2); border-radius:var(--radius); padding:8px; min-width:200px; box-shadow:0 28px 56px rgba(0,0,0,.6); opacity:0; visibility:hidden; pointer-events:none; transition:opacity .25s,visibility .25s; }
    .nav-user-wrap.open .user-dropdown { opacity:1; visibility:visible; pointer-events:auto; }
    .user-dropdown-header { padding:12px 13px 8px; border-bottom:1px solid var(--border); margin-bottom:6px; }
    .user-dropdown-name { font-weight:700; font-size:.88rem; }
    .user-dropdown-email { font-size:.75rem; color:var(--text2); margin-top:2px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .user-dropdown a { display:flex; align-items:center; gap:9px; color:var(--text2); font-size:.84rem; padding:9px 13px; border-radius:var(--radius-sm); transition:var(--transition); cursor:pointer; }
    .user-dropdown a:hover { color:var(--text); background:rgba(255,255,255,.06); }
    .user-dropdown .logout-btn { color:var(--red) !important; }
    .user-dropdown .logout-btn:hover { background:rgba(239,68,68,.1) !important; }
    .hamburger { display:none; flex-direction:column; gap:5px; cursor:pointer; background:none; border:none; padding:4px; }
    .hamburger .bar { width:26px; height:2.5px; background:var(--text); border-radius:2px; transition:var(--transition); }
    .hamburger.open .bar:nth-child(1) { transform:translateY(7.5px) rotate(45deg); }
    .hamburger.open .bar:nth-child(2) { opacity:0; transform:scaleX(0); }
    .hamburger.open .bar:nth-child(3) { transform:translateY(-7.5px) rotate(-45deg); }
    .mobile-drawer { position:fixed; inset:0; z-index:999; background:rgba(5,12,23,.98); backdrop-filter:blur(24px); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px; transform:translateX(100%); transition:transform .4s cubic-bezier(.4,0,.2,1); }
    .mobile-drawer.open { transform:none; }
    .mobile-drawer a { font-family:'Sora',sans-serif; font-size:1.6rem; font-weight:700; color:var(--text2); transition:var(--transition); padding:10px 30px; border-radius:var(--radius); }
    .mobile-drawer a:hover { color:var(--orange); background:var(--orange-dim); }
    .mobile-drawer .mob-login { margin-top:16px; background:linear-gradient(135deg,var(--orange),#fb923c); color:#fff !important; font-size:1.1rem !important; box-shadow:0 0 28px var(--orange-glow); }
    .hero { min-height:100vh; position:relative; display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .hero-slides { position:absolute; inset:0; }
    .hero-slide { position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; transition:opacity 1.4s ease; }
    .hero-slide.active { opacity:1; }
    .hero-slide::after { content:''; position:absolute; inset:0; background:linear-gradient(to bottom,rgba(5,12,23,.65) 0%,rgba(5,12,23,.80) 60%,var(--bg0) 100%); }
    #particles { position:absolute; inset:0; z-index:1; pointer-events:none; }
    .hero-orb { position:absolute; border-radius:50%; filter:blur(100px); pointer-events:none; animation:float 8s ease-in-out infinite; }
    .hero-orb-1 { width:500px; height:500px; background:rgba(249,115,22,.14); top:-120px; left:-80px; }
    .hero-orb-2 { width:420px; height:420px; background:rgba(14,165,233,.09); bottom:-60px; right:-60px; animation-delay:-4s; }
    .hero-grid { position:absolute; inset:0; z-index:1; background-image:linear-gradient(rgba(255,255,255,.025) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.025) 1px,transparent 1px); background-size:64px 64px; }
    .hero-content { position:relative; z-index:2; text-align:center; max-width:820px; padding:140px 5% 80px; }
    .hero-badge { display:inline-flex; align-items:center; gap:9px; background:rgba(249,115,22,.1); border:1px solid rgba(249,115,22,.32); color:var(--orange); border-radius:100px; padding:7px 18px; font-size:.78rem; font-weight:700; letter-spacing:.6px; margin-bottom:30px; animation:fadeIn .8s .2s both; }
    .live-dot { width:8px; height:8px; background:#ef4444; border-radius:50%; animation:pulse-dot 1.6s infinite; }
    @keyframes pulse-dot { 0%,100% { box-shadow:0 0 0 0 rgba(239,68,68,.7); } 50% { box-shadow:0 0 0 6px rgba(239,68,68,0); } }
    .hero-title { font-family:'Sora',sans-serif; font-weight:900; font-size:clamp(2.6rem,6.5vw,5rem); line-height:1.06; letter-spacing:-2px; margin-bottom:26px; animation:fadeUp .9s .35s both; }
    .hero-sub { color:var(--text2); font-size:clamp(.95rem,1.5vw,1.15rem); line-height:1.8; max-width:580px; margin:0 auto 38px; animation:fadeUp .9s .5s both; }
    .hero-ctas { display:flex; gap:14px; justify-content:center; flex-wrap:wrap; animation:fadeUp .9s .65s both; }
    .slider-dots { position:absolute; bottom:32px; left:50%; transform:translateX(-50%); display:flex; gap:9px; z-index:3; }
    .slider-dot { width:8px; height:8px; background:rgba(255,255,255,.3); border-radius:50%; cursor:pointer; transition:var(--transition); border:none; }
    .slider-dot.active { width:26px; border-radius:4px; background:var(--orange); }
    .slider-arrows { position:absolute; inset:0; display:flex; align-items:center; justify-content:space-between; padding:0 20px; z-index:3; pointer-events:none; }
    .slider-arrow { width:44px; height:44px; border-radius:50%; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15); color:#fff; cursor:pointer; pointer-events:auto; display:flex; align-items:center; justify-content:center; transition:var(--transition); opacity:0; }
    .hero:hover .slider-arrow { opacity:1; }
    .slider-arrow:hover { background:var(--orange); border-color:var(--orange); }
    .slider-arrow svg { width:18px; height:18px; fill:none; stroke:currentColor; stroke-width:2.2; }
    .stats-bar { display:grid; grid-template-columns:repeat(4,1fr); border-top:1px solid var(--border); border-bottom:1px solid var(--border); background:var(--bg2); }
    .stat-item { display:flex; flex-direction:column; align-items:center; gap:8px; padding:28px 20px; border-right:1px solid var(--border); position:relative; overflow:hidden; cursor:default; transition:background var(--transition); }
    .stat-item:last-child { border-right:none; }
    .stat-icon-wrap { width:52px; height:52px; border-radius:14px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.2); display:flex; align-items:center; justify-content:center; }
    .stat-icon-wrap img { width:30px; height:30px; object-fit:contain; }
    .stat-label { font-family:'Sora',sans-serif; font-weight:700; font-size:.95rem; text-align:center; }
    .stat-sub { font-size:.78rem; color:var(--text2); text-align:center; }
    .section { padding:96px 0; }
    .section.bg-alt { background:var(--bg1); }
    .section.bg-dark { background:var(--bg0); }
    .section-hdr { text-align:center; margin-bottom:60px; }
    .courses-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(195px,1fr)); gap:20px; }
    .course-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); overflow:hidden; cursor:pointer; position:relative; transition:transform var(--transition),border-color var(--transition),box-shadow var(--transition); }
    .course-card:hover { transform:translateY(-7px); border-color:rgba(249,115,22,.35); box-shadow:0 22px 48px rgba(0,0,0,.5); }
    .course-img { width:100%; height:128px; object-fit:cover; transition:transform .5s ease; }
    .course-card:hover .course-img { transform:scale(1.07); }
    .course-badge-overlay { position:absolute; top:10px; left:10px; background:rgba(5,12,23,.75); backdrop-filter:blur(8px); border:1px solid var(--border2); border-radius:6px; padding:3px 9px; font-size:.68rem; font-weight:700; color:var(--gold); z-index:2; letter-spacing:.4px; }
    .course-body { padding:13px 14px 16px; }
    .course-name { font-family:'Sora',sans-serif; font-size:.8rem; font-weight:700; letter-spacing:.2px; }
    .course-tag { margin-top:6px; font-size:.7rem; color:var(--text2); }
    .skeleton { background:linear-gradient(90deg,var(--surface) 25%,var(--surface2) 50%,var(--surface) 75%); background-size:200% 100%; animation:shimmer 1.5s infinite; border-radius:var(--radius); }
    @keyframes shimmer { 0% { background-position:200% 0; } 100% { background-position:-200% 0; } }
    .packages-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:26px; }
    .pkg-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); overflow:hidden; position:relative; transition:transform var(--transition),box-shadow var(--transition),border-color var(--transition); display:flex; flex-direction:column; }
    .pkg-card:hover { transform:translateY(-8px); box-shadow:var(--shadow-card); }
    .pkg-card.featured { border-color:rgba(249,115,22,.5); box-shadow:0 0 0 1px rgba(249,115,22,.2),0 28px 56px rgba(249,115,22,.12); }
    .pkg-badge { position:absolute; top:16px; right:16px; z-index:3; background:linear-gradient(135deg,var(--orange),var(--gold)); color:#fff; font-size:.68rem; font-weight:800; letter-spacing:.6px; padding:4px 11px; border-radius:100px; text-transform:uppercase; }
    .pkg-img-wrap { position:relative; height:164px; overflow:hidden; }
    .pkg-img-wrap img { width:100%; height:100%; object-fit:cover; transition:transform .5s; }
    .pkg-card:hover .pkg-img-wrap img { transform:scale(1.05); }
    .pkg-img-wrap::after { content:''; position:absolute; inset:0; background:linear-gradient(to top,rgba(27,42,66,.9) 0%,transparent 50%); }
    .pkg-body { padding:22px; flex:1; display:flex; flex-direction:column; }
    .pkg-name { font-family:'Sora',sans-serif; font-weight:800; font-size:1rem; letter-spacing:.3px; margin-bottom:7px; }
    .pkg-desc { color:var(--text2); font-size:.85rem; line-height:1.65; flex:1; margin-bottom:16px; }
    .pkg-divider { border:none; border-top:1px solid var(--border); margin:14px 0; }
    .pkg-price { font-family:'Sora',sans-serif; font-size:2rem; font-weight:900; color:var(--orange); line-height:1; margin-bottom:18px; }
    .pkg-price sub { font-size:.9rem; font-weight:500; color:var(--text2); vertical-align:middle; margin-left:4px; }
    .btn-enroll { display:flex; align-items:center; justify-content:center; gap:8px; background:linear-gradient(135deg,var(--orange),#fb923c); color:#fff; padding:13px; border-radius:var(--radius-sm); font-weight:700; font-size:.9rem; transition:var(--transition); box-shadow:0 4px 14px rgba(249,115,22,.35); cursor:pointer; border:none; width:100%; }
    .btn-enroll:hover { transform:translateY(-2px); box-shadow:0 8px 24px rgba(249,115,22,.5); }
    .enrolled-badge { display:flex; align-items:center; justify-content:center; gap:7px; background:rgba(34,197,94,.12); border:1px solid rgba(34,197,94,.3); color:var(--green); padding:12px; border-radius:var(--radius-sm); font-weight:700; font-size:.88rem; }
    .numbers-section { background:linear-gradient(135deg,rgba(249,115,22,.07) 0%,rgba(14,165,233,.05) 100%); border-top:1px solid var(--border); border-bottom:1px solid var(--border); padding:80px 0; }
    .numbers-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; text-align:center; }
    .num-item { padding:16px; }
    .num-value { font-family:'Sora',sans-serif; font-size:clamp(2.4rem,5vw,3.8rem); font-weight:900; color:var(--orange); line-height:1; text-shadow:0 0 40px rgba(249,115,22,.4); }
    .num-label { color:var(--text2); font-size:.9rem; margin-top:10px; font-weight:500; }
    .instructors-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(270px,1fr)); gap:30px; max-width:720px; margin:0 auto; }
    .instructor-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); overflow:hidden; text-align:center; transition:transform var(--transition),border-color var(--transition); }
    .instructor-card:hover { transform:translateY(-8px); border-color:rgba(249,115,22,.35); }
    .instructor-img-wrap { position:relative; height:210px; overflow:hidden; }
    .instructor-img-wrap img { width:100%; height:100%; object-fit:cover; object-position:top; transition:transform .5s; }
    .instructor-card:hover .instructor-img-wrap img { transform:scale(1.05); }
    .instructor-img-wrap::after { content:''; position:absolute; inset:0; background:linear-gradient(to top,rgba(27,42,66,.85) 0%,transparent 55%); }
    .instructor-body { padding:20px; }
    .instructor-name { font-family:'Sora',sans-serif; font-weight:700; font-size:.92rem; margin-bottom:7px; }
    .instructor-role { font-size:.78rem; color:var(--orange); font-weight:700; text-transform:uppercase; letter-spacing:.6px; }
    .instructor-socials { display:flex; justify-content:center; gap:10px; margin-top:14px; }
    .instructor-socials a { width:34px; height:34px; border-radius:50%; background:var(--bg3); border:1px solid var(--border); display:flex; align-items:center; justify-content:center; transition:var(--transition); color:var(--text2); }
    .instructor-socials a:hover { background:var(--orange-dim); border-color:rgba(249,115,22,.4); color:var(--orange); }
    .instructor-socials svg { width:15px; height:15px; fill:currentColor; }
    .features-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(230px,1fr)); gap:24px; }
    .feature-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); padding:32px 26px; text-align:center; transition:transform var(--transition),border-color var(--transition); position:relative; overflow:hidden; }
    .feature-card::before { content:''; position:absolute; bottom:0; left:0; right:0; height:3px; background:linear-gradient(90deg,var(--orange),var(--gold)); transform:scaleX(0); transition:transform var(--transition); transform-origin:left; }
    .feature-card:hover { transform:translateY(-6px); border-color:rgba(249,115,22,.2); }
    .feature-card:hover::before { transform:scaleX(1); }
    .feature-icon-wrap { width:68px; height:68px; margin:0 auto 20px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.2); border-radius:18px; display:flex; align-items:center; justify-content:center; }
    .feature-icon-wrap img { width:38px; height:38px; object-fit:contain; }
    .feature-title { font-family:'Sora',sans-serif; font-weight:700; margin-bottom:10px; font-size:1rem; }
    .feature-desc { color:var(--text2); font-size:.87rem; line-height:1.72; }
    .testimonials-track-wrap { overflow:hidden; position:relative; }
    .testimonials-track-wrap::before,.testimonials-track-wrap::after { content:''; position:absolute; top:0; bottom:0; width:100px; z-index:2; pointer-events:none; }
    .testimonials-track-wrap::before { left:0; background:linear-gradient(to right,var(--bg1),transparent); }
    .testimonials-track-wrap::after { right:0; background:linear-gradient(to left,var(--bg1),transparent); }
    .testimonials-track { display:flex; gap:22px; animation:scroll-left 30s linear infinite; width:max-content; }
    .testimonials-track:hover { animation-play-state:paused; }
    @keyframes scroll-left { from { transform:translateX(0); } to { transform:translateX(-50%); } }
    .testi-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-lg); padding:26px 28px; width:320px; flex-shrink:0; }
    .stars { color:var(--gold); font-size:.95rem; letter-spacing:2px; margin-bottom:14px; }
    .testi-text { color:var(--text2); font-size:.88rem; line-height:1.75; margin-bottom:20px; font-style:italic; }
    .testi-author { display:flex; align-items:center; gap:12px; }
    .testi-avatar { width:42px; height:42px; border-radius:50%; flex-shrink:0; background:linear-gradient(135deg,var(--orange),var(--gold)); display:flex; align-items:center; justify-content:center; font-family:'Sora',sans-serif; font-weight:800; font-size:.95rem; }
    .testi-name { font-weight:600; font-size:.88rem; }
    .testi-loc { color:var(--text2); font-size:.76rem; margin-top:2px; }
    .cert-grid { display:flex; justify-content:center; flex-wrap:wrap; gap:20px; margin-top:44px; }
    .cert-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:22px 36px; display:flex; align-items:center; justify-content:center; transition:var(--transition); }
    .cert-card:hover { border-color:rgba(249,115,22,.3); transform:translateY(-3px); }
    .cert-label { font-family:'Sora',sans-serif; font-weight:700; font-size:.88rem; color:var(--text2); letter-spacing:.5px; }
    .resources-section { padding:80px 0; background:var(--bg2); }
    .resources-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:20px; }
    .resource-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:20px; display:flex; align-items:center; gap:16px; transition:var(--transition); cursor:pointer; }
    .resource-card:hover { border-color:rgba(249,115,22,.35); transform:translateY(-4px); box-shadow:0 16px 36px rgba(0,0,0,.4); }
    .resource-icon { width:52px; height:52px; border-radius:12px; display:flex; align-items:center; justify-content:center; flex-shrink:0; font-size:1.6rem; }
    .resource-icon.pdf { background:rgba(239,68,68,.15); border:1px solid rgba(239,68,68,.3); }
    .resource-icon.doc { background:rgba(14,165,233,.15); border:1px solid rgba(14,165,233,.3); }
    .resource-icon.img { background:rgba(34,197,94,.15); border:1px solid rgba(34,197,94,.3); }
    .resource-icon.other { background:rgba(168,85,247,.15); border:1px solid rgba(168,85,247,.3); }
    .resource-info { flex:1; min-width:0; }
    .resource-name { font-family:'Sora',sans-serif; font-weight:700; font-size:.85rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .resource-meta { font-size:.74rem; color:var(--text2); margin-top:4px; }
    .resource-dl { background:var(--orange-dim); border:1px solid rgba(249,115,22,.3); color:var(--orange); padding:6px 12px; border-radius:7px; font-size:.75rem; font-weight:700; transition:var(--transition); white-space:nowrap; flex-shrink:0; }
    .resource-card:hover .resource-dl { background:var(--orange); color:#fff; }
    .no-resources { text-align:center; padding:48px; color:var(--text2); font-size:.9rem; }
    footer { background:var(--bg1); border-top:1px solid var(--border); padding:72px 0 0; }
    .footer-grid { display:grid; grid-template-columns:1.8fr 1fr 1fr 1.1fr; gap:50px; padding-bottom:56px; }
    .footer-brand-name { font-family:'Sora',sans-serif; font-size:1.7rem; font-weight:900; background:linear-gradient(135deg,var(--orange),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; letter-spacing:-1px; margin-bottom:14px; }
    .footer-tagline { color:var(--text2); font-size:.87rem; line-height:1.75; font-style:italic; margin-bottom:22px; }
    .footer-social { display:flex; gap:10px; }
    .footer-social a { width:38px; height:38px; border-radius:10px; background:var(--bg3); border:1px solid var(--border); display:flex; align-items:center; justify-content:center; transition:var(--transition); color:var(--text2); }
    .footer-social a:hover { background:var(--orange-dim); border-color:rgba(249,115,22,.4); color:var(--orange); }
    .footer-social svg { width:16px; height:16px; fill:currentColor; }
    .footer-col h4 { font-family:'Sora',sans-serif; font-weight:700; font-size:.88rem; margin-bottom:20px; letter-spacing:.5px; text-transform:uppercase; color:var(--text); }
    .footer-col ul { list-style:none; display:flex; flex-direction:column; gap:11px; }
    .footer-col ul li a { color:var(--text2); font-size:.86rem; transition:color var(--transition); display:flex; align-items:center; gap:7px; }
    .footer-col ul li a:hover { color:var(--orange); }
    .footer-contact li { display:flex; align-items:flex-start; gap:11px; color:var(--text2); font-size:.86rem; }
    .footer-contact li .icon { width:32px; height:32px; border-radius:8px; background:var(--orange-dim); border:1px solid rgba(249,115,22,.2); display:flex; align-items:center; justify-content:center; flex-shrink:0; margin-top:1px; }
    .footer-contact li .icon svg { width:14px; height:14px; fill:none; stroke:var(--orange); stroke-width:2; }
    .footer-bottom { border-top:1px solid var(--border); padding:22px 0; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:12px; }
    .footer-bottom p { color:var(--text2); font-size:.81rem; }
    .footer-bottom a { color:var(--orange); transition:var(--transition); }
    .back-to-top { position:fixed; bottom:28px; right:28px; z-index:500; width:46px; height:46px; border-radius:13px; background:linear-gradient(135deg,var(--orange),#fb923c); color:#fff; border:none; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 16px var(--orange-glow); opacity:0; transform:translateY(12px); transition:opacity .3s,transform .3s; pointer-events:none; }
    .back-to-top.visible { opacity:1; transform:none; pointer-events:auto; }
    .back-to-top svg { width:20px; height:20px; fill:none; stroke:#fff; stroke-width:2.5; }
    .modal-overlay { position:fixed; inset:0; z-index:2000; background:rgba(0,0,0,.72); backdrop-filter:blur(12px); display:flex; align-items:center; justify-content:center; padding:20px; opacity:0; visibility:hidden; transition:opacity .35s,visibility .35s; }
    .modal-overlay.open { opacity:1; visibility:visible; }
    .modal { background:var(--bg2); border:1px solid var(--border2); border-radius:var(--radius-lg); padding:36px; max-width:460px; width:100%; transform:translateY(24px) scale(.96); transition:transform .35s; position:relative; max-height:90vh; overflow-y:auto; }
    .modal-overlay.open .modal { transform:none; }
    .modal-close { position:absolute; top:16px; right:16px; background:var(--bg3); border:1px solid var(--border); border-radius:8px; width:34px; height:34px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:var(--transition); color:var(--text2); }
    .modal-close:hover { background:rgba(239,68,68,.15); border-color:rgba(239,68,68,.3); color:#f87171; }
    .modal-close svg { width:16px; height:16px; fill:none; stroke:currentColor; stroke-width:2.2; }
    .modal h3 { font-family:'Sora',sans-serif; font-size:1.4rem; font-weight:800; margin-bottom:6px; }
    .modal p { color:var(--text2); font-size:.88rem; margin-bottom:22px; }
    .modal .pkg-price-lg { font-family:'Sora',sans-serif; font-size:2.4rem; font-weight:900; color:var(--orange); margin-bottom:22px; }
    .modal-form { display:flex; flex-direction:column; gap:14px; }
    .modal-form input, .modal-form select, .modal-form textarea { background:var(--bg3); border:1px solid var(--border2); border-radius:10px; padding:13px 16px; font-size:.9rem; color:var(--text); width:100%; transition:border-color var(--transition); font-family:'DM Sans',sans-serif; }
    .modal-form input:focus, .modal-form select:focus, .modal-form textarea:focus { outline:none; border-color:rgba(249,115,22,.5); box-shadow:0 0 0 3px rgba(249,115,22,.1); }
    .modal-form input::placeholder { color:var(--text2); }
    .modal-form input:disabled { opacity:.6; cursor:not-allowed; }
    .modal-form select option { background:var(--bg3); }

    /* ══════════════════════════
       ADMIN PANEL STYLES
    ══════════════════════════ */
    .admin-overlay { position:fixed; inset:0; z-index:3000; background:#0d0f1a; display:none; overflow:hidden; }
    .admin-overlay.open { display:flex; }
    .admin-sidebar { width:260px; min-height:100vh; background:#111320; border-right:1px solid rgba(255,255,255,0.07); display:flex; flex-direction:column; flex-shrink:0; height:100%; overflow-y:auto; }
    .admin-sidebar-logo { padding:24px 20px 16px; font-family:'Syne',sans-serif; font-size:22px; font-weight:800; color:var(--orange); letter-spacing:-0.5px; }
    .admin-panel-badge { margin:0 20px 20px; background:linear-gradient(135deg,var(--orange),#fb923c); border-radius:8px; padding:8px 14px; font-size:11px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; display:flex; align-items:center; gap:6px; width:fit-content; box-shadow:0 4px 15px rgba(249,115,22,0.35); color:#fff; }
    .admin-nav-section { padding:0 12px; flex:1; }
    .admin-nav-label { font-size:10px; font-weight:600; letter-spacing:1.5px; color:#64748b; padding:14px 8px 6px; text-transform:uppercase; }
    .admin-nav-item { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:8px; cursor:pointer; transition:all 0.2s; color:#94a3b8; font-size:14px; font-weight:500; margin-bottom:2px; border:none; background:transparent; width:100%; text-align:left; font-family:'DM Sans',sans-serif; }
    .admin-nav-item:hover { background:rgba(255,255,255,0.05); color:#e2e8f0; }
    .admin-nav-item.active { background:rgba(249,115,22,0.12); color:var(--orange); border-left:2px solid var(--orange); }
    .admin-nav-item svg { width:16px; height:16px; flex-shrink:0; fill:none; stroke:currentColor; stroke-width:2; }
    .admin-nav-item.exit-btn { color:#ef4444; margin-top:12px; }
    .admin-nav-item.exit-btn:hover { background:rgba(239,68,68,0.08); }
    .admin-nav-divider { border:none; border-top:1px solid rgba(255,255,255,0.07); margin:10px 0; }
    .admin-sidebar-footer { padding:16px 20px; border-top:1px solid rgba(255,255,255,0.07); }
    .admin-sidebar-user { display:flex; align-items:center; gap:12px; }
    .admin-avatar-icon { width:36px; height:36px; border-radius:50%; background:linear-gradient(135deg,var(--orange),var(--purple)); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:13px; flex-shrink:0; color:#fff; font-family:'Sora',sans-serif; }
    .admin-user-name { font-size:13px; font-weight:600; }
    .admin-user-role { font-size:11px; color:var(--orange); }
    .admin-main { flex:1; overflow-y:auto; display:flex; flex-direction:column; background:#0d0f1a; }
    .admin-topbar { background:#111320; border-bottom:1px solid rgba(255,255,255,0.07); padding:20px 32px; display:flex; align-items:center; justify-content:space-between; flex-shrink:0; }
    .admin-topbar h1 { font-family:'Syne',sans-serif; font-size:22px; font-weight:700; color:#e2e8f0; }
    .admin-topbar-right { display:flex; gap:12px; align-items:center; }
    .admin-content { padding:28px 32px; flex:1; }
    .admin-section { display:none; }
    .admin-section.active { display:block; }
    .admin-stats-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:28px; }
    .admin-stat-card { background:#161929; border:1px solid rgba(255,255,255,0.06); border-radius:12px; padding:20px; position:relative; overflow:hidden; transition:transform 0.2s,border-color 0.2s; }
    .admin-stat-card:hover { transform:translateY(-2px); border-color:rgba(255,255,255,0.12); }
    .admin-stat-card::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; }
    .admin-stat-card.blue::before { background:var(--blue); box-shadow:0 0 10px var(--blue); }
    .admin-stat-card.orange::before { background:var(--orange); box-shadow:0 0 10px var(--orange); }
    .admin-stat-card.purple::before { background:var(--purple); box-shadow:0 0 10px var(--purple); }
    .admin-stat-card.green::before { background:var(--green); box-shadow:0 0 10px var(--green); }
    .admin-stat-card.red::before { background:var(--red); box-shadow:0 0 10px var(--red); }
    .admin-stat-label { font-size:12px; color:#64748b; margin-bottom:8px; font-weight:500; text-transform:uppercase; letter-spacing:0.5px; }
    .admin-stat-value { font-family:'Syne',sans-serif; font-size:24px; font-weight:700; }
    .admin-stat-value.blue { color:var(--blue); }
    .admin-stat-value.orange { color:var(--orange); }
    .admin-stat-value.purple { color:var(--purple); }
    .admin-stat-value.green { color:var(--green); }
    .admin-stat-value.red { color:var(--red); }
    .admin-stat-sub { font-size:11px; color:#64748b; margin-top:4px; }
    .admin-section-heading { font-family:'Syne',sans-serif; font-size:13px; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:#64748b; margin-bottom:16px; display:flex; align-items:center; gap:10px; }
    .admin-section-heading::after { content:''; flex:1; height:1px; background:rgba(255,255,255,0.07); }
    .admin-filter-row { display:flex; align-items:center; gap:12px; margin-bottom:20px; flex-wrap:wrap; }
    .admin-date-input { background:#161929; border:1px solid rgba(255,255,255,0.07); border-radius:8px; padding:8px 14px; color:#e2e8f0; font-family:'DM Sans',sans-serif; font-size:13px; outline:none; width:160px; transition:border-color 0.2s; }
    .admin-date-input:focus { border-color:var(--orange); }
    .admin-search-input { background:#161929; border:1px solid rgba(255,255,255,0.07); border-radius:8px; padding:8px 14px; color:#e2e8f0; font-family:'DM Sans',sans-serif; font-size:13px; outline:none; transition:border-color 0.2s; min-width:200px; }
    .admin-search-input:focus { border-color:var(--orange); }
    .admin-search-input::placeholder { color:#64748b; }
    .admin-btn-primary { background:var(--orange); color:white; border:none; border-radius:8px; padding:9px 20px; font-size:13px; font-weight:600; cursor:pointer; font-family:'DM Sans',sans-serif; transition:opacity 0.2s; }
    .admin-btn-primary:hover { opacity:0.85; }
    .admin-btn-secondary { background:transparent; color:#94a3b8; border:1px solid rgba(255,255,255,0.1); border-radius:8px; padding:9px 20px; font-size:13px; font-weight:600; cursor:pointer; font-family:'DM Sans',sans-serif; transition:all 0.2s; }
    .admin-btn-secondary:hover { border-color:rgba(255,255,255,0.2); color:#e2e8f0; }
    .admin-analytics-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin-bottom:28px; }
    .admin-analytics-card { background:#161929; border:1px solid rgba(255,255,255,0.06); border-radius:10px; padding:16px; transition:all 0.2s; }
    .admin-analytics-card:hover { border-color:rgba(255,255,255,0.12); }
    .admin-analytics-label { font-size:11px; color:#64748b; margin-bottom:6px; text-transform:uppercase; letter-spacing:0.5px; }
    .admin-analytics-value { font-family:'Syne',sans-serif; font-size:20px; font-weight:700; color:#e2e8f0; }
    .admin-analytics-sub { font-size:11px; color:#64748b; margin-top:3px; }
    .admin-packages-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin-bottom:28px; }
    .admin-pkg-card { background:#161929; border:1px solid rgba(255,255,255,0.06); border-radius:10px; padding:16px; transition:all 0.2s; cursor:pointer; }
    .admin-pkg-card:hover { border-color:var(--orange); background:rgba(249,115,22,0.04); }
    .admin-pkg-name { font-size:11px; color:#64748b; text-transform:uppercase; letter-spacing:1px; margin-bottom:4px; }
    .admin-pkg-count { font-size:11px; color:var(--orange); margin-bottom:6px; }
    .admin-pkg-value { font-family:'Syne',sans-serif; font-size:20px; font-weight:700; color:#e2e8f0; }
    .admin-upload-zone { border:2px dashed rgba(249,115,22,0.3); border-radius:12px; padding:40px; text-align:center; cursor:pointer; transition:all 0.2s; background:rgba(249,115,22,0.02); margin-bottom:28px; }
    .admin-upload-zone:hover { border-color:var(--orange); background:rgba(249,115,22,0.06); }
    .admin-upload-zone-icon { font-size:40px; margin-bottom:12px; }
    .admin-upload-zone-text { font-size:15px; font-weight:600; margin-bottom:6px; color:#e2e8f0; }
    .admin-upload-zone-sub { font-size:12px; color:#64748b; }
    .admin-table-container { background:#161929; border:1px solid rgba(255,255,255,0.07); border-radius:12px; overflow:hidden; margin-bottom:28px; }
    .admin-table-header { padding:16px 20px; border-bottom:1px solid rgba(255,255,255,0.07); display:flex; align-items:center; justify-content:space-between; }
    .admin-table-title { font-family:'Syne',sans-serif; font-size:15px; font-weight:700; color:#e2e8f0; }
    .admin-table-empty { padding:48px; text-align:center; color:#64748b; font-size:13px; }
    .data-table { width:100%; border-collapse:collapse; }
    .data-table th { padding:10px 20px; text-align:left; font-size:11px; font-weight:600; color:#64748b; text-transform:uppercase; letter-spacing:1px; border-bottom:1px solid rgba(255,255,255,0.07); }
    .data-table td { padding:12px 20px; font-size:13px; border-bottom:1px solid rgba(255,255,255,0.03); color:#e2e8f0; vertical-align:middle; }
    .data-table tr:last-child td { border-bottom:none; }
    .data-table tr:hover td { background:rgba(255,255,255,0.02); }
    .admin-badge { display:inline-flex; align-items:center; gap:5px; padding:3px 8px; border-radius:4px; font-size:11px; font-weight:600; }
    .admin-badge.active { background:rgba(34,197,94,0.15); color:var(--green); }
    .admin-badge.pending { background:rgba(249,115,22,0.15); color:var(--orange); }
    .admin-badge.paid { background:rgba(34,197,94,0.15); color:var(--green); }
    .admin-badge.failed { background:rgba(239,68,68,0.15); color:var(--red); }
    .admin-badge.enrolled { background:rgba(59,130,246,0.15); color:var(--blue); }
    .admin-badge.public { background:rgba(34,197,94,0.12); color:#4ade80; border:1px solid rgba(34,197,94,.2); }
    .admin-badge.enrolled-only { background:rgba(249,115,22,0.12); color:var(--orange); border:1px solid rgba(249,115,22,.2); }
    .file-badge { display:inline-flex; align-items:center; gap:5px; padding:3px 10px; border-radius:6px; font-size:.72rem; font-weight:700; }
    .file-badge.pdf { background:rgba(239,68,68,.15); color:#f87171; border:1px solid rgba(239,68,68,.3); }
    .file-badge.doc { background:rgba(14,165,233,.15); color:#38bdf8; border:1px solid rgba(14,165,233,.3); }
    .file-badge.img { background:rgba(34,197,94,.15); color:#4ade80; border:1px solid rgba(34,197,94,.3); }
    .file-badge.other { background:rgba(168,85,247,.15); color:#c084fc; border:1px solid rgba(168,85,247,.3); }
    .admin-btn-sm { padding:5px 11px; border-radius:5px; font-size:11px; font-weight:600; cursor:pointer; border:none; font-family:'DM Sans',sans-serif; transition:opacity 0.2s; }
    .admin-btn-danger { background:rgba(239,68,68,0.15); color:#ef4444; }
    .admin-btn-danger:hover { background:rgba(239,68,68,0.25); }
    .admin-btn-info { background:rgba(59,130,246,0.15); color:var(--blue); }
    .admin-btn-info:hover { background:rgba(59,130,246,0.25); }
    .admin-btn-success { background:rgba(34,197,94,0.15); color:var(--green); }
    .admin-btn-success:hover { background:rgba(34,197,94,0.25); }
    .admin-manage-pkg-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; }
    .admin-manage-pkg-card { background:#161929; border:1px solid rgba(255,255,255,0.06); border-radius:10px; padding:20px; transition:all 0.2s; }
    .admin-manage-pkg-card:hover { border-color:rgba(255,255,255,0.12); }
    .admin-manage-pkg-card.featured { border-color:rgba(249,115,22,0.3); }
    .admin-manage-pkg-name { font-size:13px; margin-bottom:8px; color:#64748b; font-weight:600; }
    .admin-manage-pkg-name.featured { color:var(--orange); }
    .admin-manage-pkg-price { font-family:'Syne',sans-serif; font-size:22px; margin-bottom:4px; color:#e2e8f0; }
    .admin-manage-pkg-sub { font-size:12px; color:#64748b; margin-bottom:16px; }
    .admin-manage-pkg-actions { display:flex; gap:8px; }
    .admin-empty-state { padding:60px 0; text-align:center; color:#64748b; }
    .admin-empty-state-icon { font-size:40px; margin-bottom:12px; }
    .admin-empty-state-title { font-size:16px; font-weight:600; margin-bottom:6px; color:#e2e8f0; }
    .admin-empty-state-sub { font-size:13px; }
    #adminClock { color:#64748b; font-size:.82rem; font-family:'Syne',sans-serif; }
    .admin-loading { display:flex; align-items:center; justify-content:center; gap:10px; padding:48px; color:#64748b; font-size:13px; }
    .admin-spinner { width:20px; height:20px; border:2px solid rgba(249,115,22,0.2); border-top-color:var(--orange); border-radius:50%; animation:spin .7s linear infinite; flex-shrink:0; }
    .admin-form-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; margin-bottom:20px; }
    .admin-form-group label { display:block; font-size:11px; font-weight:700; color:#64748b; letter-spacing:.5px; text-transform:uppercase; margin-bottom:6px; }
    .admin-form-input { background:#161929; border:1px solid rgba(255,255,255,0.07); border-radius:8px; padding:10px 14px; color:#e2e8f0; font-family:'DM Sans',sans-serif; font-size:13px; outline:none; transition:border-color 0.2s; width:100%; }
    .admin-form-input:focus { border-color:var(--orange); }
    .admin-form-input::placeholder { color:#64748b; }
    .admin-user-cell { display:flex; align-items:center; gap:10px; }
    .admin-user-avatar { width:32px; height:32px; border-radius:8px; background:linear-gradient(135deg,var(--orange),var(--gold)); display:flex; align-items:center; justify-content:center; font-family:'Sora',sans-serif; font-weight:800; font-size:.75rem; color:#fff; flex-shrink:0; }
    .admin-pagination { display:flex; align-items:center; gap:8px; padding:16px 20px; border-top:1px solid rgba(255,255,255,0.07); }
    .admin-page-btn { padding:6px 12px; border-radius:6px; border:1px solid rgba(255,255,255,0.07); background:transparent; color:#94a3b8; font-size:12px; cursor:pointer; transition:all 0.2s; font-family:'DM Sans',sans-serif; }
    .admin-page-btn:hover, .admin-page-btn.active { background:var(--orange); color:#fff; border-color:var(--orange); }
    .admin-page-info { font-size:12px; color:#64748b; margin-left:auto; }
    /* Payment specific */
    .payment-amount { font-family:'Syne',sans-serif; font-weight:700; color:var(--orange); }
    .payment-id { font-size:.72rem; color:#64748b; font-family:monospace; }
    /* User modal */
    .user-detail-modal .modal { max-width:560px; }
    .user-detail-section { margin-bottom:20px; }
    .user-detail-section h4 { font-size:.78rem; font-weight:700; color:#64748b; letter-spacing:.5px; text-transform:uppercase; margin-bottom:12px; display:flex; align-items:center; gap:8px; }
    .user-detail-section h4::after { content:''; flex:1; height:1px; background:rgba(255,255,255,0.07); }
    .user-enroll-item { background:var(--bg3); border:1px solid var(--border); border-radius:8px; padding:12px 14px; display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; font-size:.84rem; }
    /* Wakeup */
    .wakeup-overlay { position:fixed; inset:0; z-index:9990; background:rgba(5,12,23,.92); backdrop-filter:blur(16px); display:flex; align-items:center; justify-content:center; }
    .wakeup-box { background:var(--bg2); border:1px solid var(--border2); border-radius:20px; padding:40px; max-width:380px; width:90%; text-align:center; }
    .wakeup-spinner { width:48px; height:48px; border:3px solid rgba(249,115,22,.2); border-top-color:var(--orange); border-radius:50%; animation:spin .9s linear infinite; margin:0 auto 20px; }
    .wakeup-bar-wrap { background:var(--bg3); border-radius:100px; height:5px; overflow:hidden; margin-top:8px; }
    .wakeup-bar-fill { height:100%; background:linear-gradient(90deg,var(--orange),var(--gold)); border-radius:100px; width:0%; transition:width .5s; }
    .tab-switcher { display:flex; background:var(--bg3); border-radius:var(--radius-sm); padding:4px; gap:4px; margin-bottom:20px; }
    .tab-btn { flex:1; padding:9px; border-radius:6px; border:none; background:transparent; color:var(--text2); font-size:.85rem; font-weight:600; cursor:pointer; transition:var(--transition); font-family:'DM Sans',sans-serif; }
    .tab-btn.active { background:var(--surface2); color:var(--text); box-shadow:0 2px 8px rgba(0,0,0,.3); }
    .enrolled-pkg-item { background:var(--bg3); border:1px solid var(--border2); border-radius:10px; padding:14px 16px; display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
    .enrolled-pkg-name { font-weight:700; font-size:.88rem; }
    .enrolled-pkg-date { font-size:.75rem; color:var(--text2); margin-top:3px; }
    .enrolled-pkg-badge { background:rgba(34,197,94,.15); border:1px solid rgba(34,197,94,.3); color:var(--green); font-size:.7rem; font-weight:700; padding:3px 10px; border-radius:100px; }
    .no-enrollments { text-align:center; padding:24px; color:var(--text2); font-size:.88rem; }
    .toast-container { position:fixed; bottom:90px; right:28px; z-index:9000; display:flex; flex-direction:column; gap:10px; }
    .toast { background:var(--surface); border:1px solid var(--border2); border-radius:12px; padding:14px 18px; display:flex; align-items:center; gap:12px; box-shadow:0 8px 28px rgba(0,0,0,.5); transform:translateX(120%); transition:transform .4s cubic-bezier(.4,0,.2,1); min-width:260px; max-width:320px; }
    .toast.show { transform:none; }
    .toast-icon { width:34px; height:34px; border-radius:9px; display:flex; align-items:center; justify-content:center; flex-shrink:0; }
    .toast-icon.success { background:rgba(34,197,94,.15); }
    .toast-icon.success svg { width:16px; height:16px; fill:none; stroke:#22c55e; stroke-width:2.5; }
    .toast-icon.error { background:rgba(239,68,68,.15); }
    .toast-icon.error svg { width:16px; height:16px; fill:none; stroke:#ef4444; stroke-width:2.5; }
    .toast-icon.info { background:rgba(14,165,233,.15); }
    .toast-icon.info svg { width:16px; height:16px; fill:none; stroke:#0ea5e9; stroke-width:2.5; }
    .toast-text { font-size:.84rem; line-height:1.4; }
    .toast-title { font-weight:700; }
    .toast-sub { color:var(--text2); font-size:.78rem; }
    .spinner { width:18px; height:18px; border:2px solid rgba(255,255,255,.3); border-top-color:#fff; border-radius:50%; animation:spin .7s linear infinite; display:inline-block; }
    @keyframes spin { to { transform:rotate(360deg); } }
    @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
    @keyframes fadeUp { from { opacity:0; transform:translateY(22px); } to { opacity:1; transform:none; } }
    @keyframes float { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-28px); } }
    @keyframes blink { 0%,100% { opacity:1; } 50% { opacity:.35; } }
    @media (max-width:1024px) { .footer-grid { grid-template-columns:1fr 1fr; } .admin-sidebar { width:220px; } .admin-stats-grid { grid-template-columns:repeat(2,1fr); } .admin-analytics-grid { grid-template-columns:repeat(2,1fr); } .admin-packages-grid { grid-template-columns:repeat(2,1fr); } }
    @media (max-width:900px) { .nav-links { display:none; } .hamburger { display:flex; } .stats-bar { grid-template-columns:repeat(2,1fr); } .numbers-grid { grid-template-columns:repeat(2,1fr); gap:30px; } .admin-sidebar { position:absolute; left:-260px; z-index:10; transition:.3s; height:100%; } .admin-sidebar.open { left:0; } .admin-stats-grid { grid-template-columns:repeat(2,1fr); } .admin-manage-pkg-grid { grid-template-columns:repeat(2,1fr); } }
    @media (max-width:600px) { .footer-grid { grid-template-columns:1fr; gap:32px; } .footer-bottom { flex-direction:column; text-align:center; } .numbers-grid { grid-template-columns:repeat(2,1fr); } .admin-content { padding:20px; } .admin-topbar { padding:16px 20px; } .admin-analytics-grid { grid-template-columns:1fr 1fr; } .admin-packages-grid { grid-template-columns:repeat(2,1fr); } .admin-manage-pkg-grid { grid-template-columns:1fr; } .admin-form-grid { grid-template-columns:1fr; } }
  </style>
</head>
<body>

<script>
  const ADMIN_CREDENTIALS = { username:'admin@skillbrzee.in', password:'Admin@Skillbrzee123', name:'Skillbrzee Admin' };
  const API_BASE = 'https://skillset-g4oh.onrender.com/api';

  let authToken   = localStorage.getItem('sb_token') || null;
  let currentUser = JSON.parse(localStorage.getItem('sb_user') || 'null');
  let isAdminMode = false;

  // Admin pagination state
  const adminState = {
    users:    { page:1, total:0, search:'' },
    payments: { page:1, total:0, search:'', status:'', dateFrom:'', dateTo:'' },
    files:    { page:1, total:0, search:'', category:'' },
    dashboard:{ stats:{}, analytics:{} }
  };
  const PAGE_SIZE = 15;

  function authHeaders(json=true) {
    return { ...(json?{'Content-Type':'application/json'}:{}), ...(authToken?{'Authorization':`Bearer ${authToken}`}:{}) };
  }
  function isLoggedIn() { return !!authToken && !!currentUser; }
  function saveAuth(token, user) { authToken=token; currentUser=user; localStorage.setItem('sb_token',token); localStorage.setItem('sb_user',JSON.stringify(user)); }
  function clearAuth() { authToken=null; currentUser=null; localStorage.removeItem('sb_token'); localStorage.removeItem('sb_user'); }

  async function refreshUser() {
    if (!authToken || authToken.startsWith('admin-local')) return;
    try {
      const res = await fetch(`${API_BASE}/auth/me`, {headers:authHeaders()});
      if (!res.ok) { clearAuth(); updateNavAuth(); return; }
      const data = await res.json();
      currentUser = data.user;
      localStorage.setItem('sb_user', JSON.stringify(currentUser));
    } catch {}
  }

  async function isBackendAlive(timeoutMs=15000) {
    try {
      const controller = new AbortController();
      const timer = setTimeout(()=>controller.abort(), timeoutMs);
      const res = await fetch(`${API_BASE}/health`, {signal:controller.signal});
      clearTimeout(timer);
      return res.ok;
    } catch { return false; }
  }

  function showWakeupOverlay() {
    const existing = document.getElementById('wakeupOverlay');
    if (existing) return existing;
    const el = document.createElement('div');
    el.id = 'wakeupOverlay';
    el.className = 'wakeup-overlay';
    el.innerHTML = `<div class="wakeup-box"><div class="wakeup-spinner"></div><div style="font-family:'Sora',sans-serif;font-weight:800;font-size:1.1rem;margin-bottom:8px;">Connecting to Server…</div><div style="color:var(--text2);font-size:.84rem;line-height:1.6;">Our server may be starting up. This takes up to 30 seconds on first load.</div><div style="margin-top:20px;"><div style="font-size:.75rem;color:var(--text2);display:flex;justify-content:space-between;"><span>Waking up server</span><span id="wakeupPct">0%</span></div><div class="wakeup-bar-wrap"><div class="wakeup-bar-fill" id="wakeupFill"></div></div></div></div>`;
    document.body.appendChild(el);
    let pct=0;
    el._timer = setInterval(()=>{pct=Math.min(pct+(pct<70?2:.5),95);const f=document.getElementById('wakeupFill'),t=document.getElementById('wakeupPct');if(f)f.style.width=pct+'%';if(t)t.textContent=Math.floor(pct)+'%';},600);
    return el;
  }
  function hideWakeupOverlay() {
    const el = document.getElementById('wakeupOverlay');
    if (!el) return;
    clearInterval(el._timer);
    const f=document.getElementById('wakeupFill'),t=document.getElementById('wakeupPct');
    if(f)f.style.width='100%';if(t)t.textContent='100%';
    setTimeout(()=>el.remove(),400);
  }
  async function waitForBackend(showOverlay=true) {
    const overlay = showOverlay ? showWakeupOverlay() : null;
    for (let i=0;i<6;i++) {
      const alive = await isBackendAlive(8000);
      if (alive) { if(overlay) hideWakeupOverlay(); return true; }
      await new Promise(r=>setTimeout(r,5000));
    }
    if (overlay) hideWakeupOverlay();
    return false;
  }
</script>

  <div class="cursor-dot" id="cursorDot"></div>
  <div class="cursor-ring" id="cursorRing"></div>

  <div class="topbar" id="topbar">
    🎉 Limited Time Offer — Get 30% OFF on All Packages! Use Code: <strong>SKILL30</strong>
    <button class="topbar-close" id="topbarClose">✕</button>
  </div>

  <nav class="navbar topbar-active" id="navbar">
    <div class="nav-brand" onclick="scrollToTop()">Skillbrzee</div>
    <ul class="nav-links" id="navLinks">
      <li class="active"><a href="#hero">Home</a></li>
      <li><a href="#courses">Courses</a></li>
      <li>
        <a href="#packages">Course Bundles <svg class="chevron" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg></a>
        <div class="dropdown-menu">
          <a href="#packages">STARTER PACKAGE</a>
          <a href="#packages">BASIC PACKAGE</a>
          <a href="#packages">SILVER PACKAGE</a>
          <a href="#packages">GOLD PACKAGE</a>
          <a href="#packages">DIAMOND PACKAGE</a>
          <a href="#packages">PREMIUM PACKAGE</a>
        </div>
      </li>
      <li><a href="#resources">Resources</a></li>
      <li><a href="#instructors">About</a></li>
      <li><a href="#contact">Contact</a></li>
      <li id="navAuthSlot"></li>
    </ul>
    <button class="hamburger" id="hamburger"><span class="bar"></span><span class="bar"></span><span class="bar"></span></button>
  </nav>

  <div class="mobile-drawer" id="mobileDrawer">
    <a href="#hero" onclick="closeDrawer()">Home</a>
    <a href="#courses" onclick="closeDrawer()">Courses</a>
    <a href="#packages" onclick="closeDrawer()">Course Bundles</a>
    <a href="#resources" onclick="closeDrawer()">Resources</a>
    <a href="#instructors" onclick="closeDrawer()">About</a>
    <a href="#contact" onclick="closeDrawer()">Contact</a>
    <a href="#" class="mob-login" id="mobAuthBtn" onclick="handleMobAuth(event)">Login</a>
  </div>

  <section class="hero" id="hero">
    <div class="hero-slides" id="heroSlides">
      <div class="hero-slide active" style="background-image:url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=1800&auto=format&fit=crop&q=80')"></div>
      <div class="hero-slide" style="background-image:url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1800&auto=format&fit=crop&q=80')"></div>
      <div class="hero-slide" style="background-image:url('https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?w=1800&auto=format&fit=crop&q=80')"></div>
    </div>
    <canvas id="particles"></canvas>
    <div class="hero-orb hero-orb-1"></div>
    <div class="hero-orb hero-orb-2"></div>
    <div class="hero-grid"></div>
    <div class="hero-content">
      <div class="hero-badge"><span class="live-dot"></span>LIVE TRAINING AVAILABLE NOW</div>
      <h1 class="hero-title">Level Up Your Skills<br>with <span class="gradient-text">India's Trusted</span><br>Learning Platform</h1>
      <p class="hero-sub">Master digital marketing, graphic design, video editing &amp; more — with expert mentors, live sessions &amp; lifetime access.</p>
      <div class="hero-ctas">
        <a href="#packages" class="btn btn-primary">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
          Explore Packages
        </a>
        <a href="#courses" class="btn btn-ghost">Browse Courses →</a>
      </div>
    </div>
    <div class="slider-arrows">
      <button class="slider-arrow" id="prevSlide"><svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg></button>
      <button class="slider-arrow" id="nextSlide"><svg viewBox="0 0 24 24"><polyline points="9 6 15 12 9 18"/></svg></button>
    </div>
    <div class="slider-dots" id="sliderDots"></div>
  </section>

  <div class="stats-bar">
    <div class="stat-item reveal"><div class="stat-icon-wrap"><img src="https://img.icons8.com/nolan/64/classroom.png" alt="Live"/></div><div class="stat-label">Live Training</div><div class="stat-sub">Training from experts</div></div>
    <div class="stat-item reveal delay-1"><div class="stat-icon-wrap"><img src="https://img.icons8.com/nolan/64/knowledge-sharing.png" alt="Courses"/></div><div class="stat-label">35+ Courses</div><div class="stat-sub">Training from experts</div></div>
    <div class="stat-item reveal delay-2"><div class="stat-icon-wrap"><img src="https://img.icons8.com/nolan/64/technical-support.png" alt="Support"/></div><div class="stat-label">24/7 Support</div><div class="stat-sub">Training from experts</div></div>
    <div class="stat-item reveal delay-3"><div class="stat-icon-wrap"><img src="https://img.icons8.com/nolan/64/certificate.png" alt="Cert"/></div><div class="stat-label">Certification</div><div class="stat-sub">Training from experts</div></div>
  </div>

  <section class="section bg-alt" id="courses">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Our Courses</div>
        <h2 class="section-title">Our Top Courses</h2>
        <p class="section-sub" style="max-width:560px;margin:0 auto;">Skillbrzee envisions providing you with the latest trending courses which make you a proficient leader in your field of expertise.</p>
      </div>
      <div class="courses-grid reveal" id="coursesGrid">
        <div class="skeleton" style="height:180px;"></div><div class="skeleton" style="height:180px;"></div>
        <div class="skeleton" style="height:180px;"></div><div class="skeleton" style="height:180px;"></div>
        <div class="skeleton" style="height:180px;"></div><div class="skeleton" style="height:180px;"></div>
      </div>
    </div>
  </section>

  <section class="section bg-dark" id="packages">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Bundles</div>
        <h2 class="section-title">Digital Growth Bundles</h2>
        <p class="section-sub" style="max-width:520px;margin:0 auto;">Explore our diverse range of courses tailored to your needs</p>
      </div>
      <div class="packages-grid reveal" id="packagesGrid"></div>
    </div>
  </section>

  <section class="numbers-section" id="numbers">
    <div class="container">
      <div class="section-hdr reveal" style="margin-bottom:48px;">
        <div class="section-tag">Our Impact</div>
        <h2 class="section-title">India's Trusted Educational Platform</h2>
        <p class="section-sub" style="max-width:460px;margin:0 auto;">With Skillbrzee, Begin your journey to success.</p>
      </div>
      <div class="numbers-grid reveal">
        <div class="num-item"><div class="num-value" id="n1">0</div><div class="num-label">Enrolled Students</div></div>
        <div class="num-item"><div class="num-value" id="n2">0</div><div class="num-label">Video Courses</div></div>
        <div class="num-item"><div class="num-value" id="n3">0</div><div class="num-label">Expert Mentors</div></div>
        <div class="num-item"><div class="num-value" id="n4">0</div><div class="num-label">Award Achievers</div></div>
      </div>
    </div>
  </section>

  <section class="resources-section" id="resources">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Free Downloads</div>
        <h2 class="section-title">Learning Resources</h2>
        <p class="section-sub" style="max-width:520px;margin:0 auto;">Download free books, study materials, PDFs &amp; guides uploaded by our team.</p>
      </div>
      <div class="resources-grid reveal" id="publicResourcesGrid"><div class="no-resources">📚 Loading resources…</div></div>
    </div>
  </section>

  <section class="section bg-alt" id="instructors">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Mentors</div>
        <h2 class="section-title">Instructors At Skillbrzee</h2>
        <p class="section-sub" style="max-width:580px;margin:0 auto;">At Skillbrzee, you can now be assured to get the top-most training from the leading educators of their respective fields.</p>
      </div>
      <div class="instructors-grid reveal">
        <div class="instructor-card">
          <div class="instructor-img-wrap"><img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400&auto=format&fit=crop&q=80" alt="Penta Kalyani" loading="lazy"/></div>
          <div class="instructor-body">
            <div class="instructor-name">PENTA KALYANI W/O PENTA NAGESH</div>
            <div class="instructor-role">CEO &amp; Founder</div>
            <div class="instructor-socials">
              <a href="#"><svg viewBox="0 0 24 24"><path d="M16 2H8C4.69 2 2 4.69 2 8v8c0 3.31 2.69 6 6 6h8c3.31 0 6-2.69 6-6V8c0-3.31-2.69-6-6-6zm4 14c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4h8c2.21 0 4 1.79 4 4v8zm-8-9a5 5 0 100 10A5 5 0 0012 7zm0 8a3 3 0 110-6 3 3 0 010 6zm5-9.5a1 1 0 110 2 1 1 0 010-2z"/></svg></a>
              <a href="#"><svg viewBox="0 0 24 24"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></svg></a>
            </div>
          </div>
        </div>
        <div class="instructor-card">
          <div class="instructor-img-wrap"><img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&auto=format&fit=crop&q=80" alt="Mr Bunny" loading="lazy"/></div>
          <div class="instructor-body">
            <div class="instructor-name">MR. BUNNY</div>
            <div class="instructor-role">CEO &amp; Co-Founder</div>
            <div class="instructor-socials">
              <a href="#"><svg viewBox="0 0 24 24"><path d="M16 2H8C4.69 2 2 4.69 2 8v8c0 3.31 2.69 6 6 6h8c3.31 0 6-2.69 6-6V8c0-3.31-2.69-6-6-6zm4 14c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4h8c2.21 0 4 1.79 4 4v8zm-8-9a5 5 0 100 10A5 5 0 0012 7zm0 8a3 3 0 110-6 3 3 0 010 6zm5-9.5a1 1 0 110 2 1 1 0 010-2z"/></svg></a>
              <a href="#"><svg viewBox="0 0 24 24"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></svg></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section bg-dark">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Why Skillbrzee</div>
        <h2 class="section-title">Start your Learning Journey Today!</h2>
        <p class="section-sub" style="max-width:520px;margin:0 auto;">Everything you need to grow your career — under one roof.</p>
      </div>
      <div class="features-grid">
        <div class="feature-card reveal"><div class="feature-icon-wrap"><img src="https://img.icons8.com/nolan/80/classroom.png" alt=""/></div><div class="feature-title">Learn with Experts</div><div class="feature-desc">Gain practical insights and hands-on knowledge directly from industry professionals through expert-led live sessions.</div></div>
        <div class="feature-card reveal delay-1"><div class="feature-icon-wrap"><img src="https://img.icons8.com/nolan/80/knowledge-sharing.png" alt=""/></div><div class="feature-title">Learn Anything</div><div class="feature-desc">Explore a vast library of courses covering diverse topics to expand your skills and pursue your interests.</div></div>
        <div class="feature-card reveal delay-2"><div class="feature-icon-wrap"><img src="https://img.icons8.com/nolan/80/certificate.png" alt=""/></div><div class="feature-title">Completion Certificate</div><div class="feature-desc">Earn a verified certificate for each completed course to boost your credibility and career growth.</div></div>
        <div class="feature-card reveal delay-3"><div class="feature-icon-wrap"><img src="https://img.icons8.com/nolan/80/lifecycle.png" alt=""/></div><div class="feature-title">Lifetime Access</div><div class="feature-desc">Enjoy unlimited access to your courses anytime, enabling flexible learning at your own pace, forever.</div></div>
      </div>
    </div>
  </section>

  <section class="section bg-alt">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Testimonials</div>
        <h2 class="section-title">Words From Our Students</h2>
        <p class="section-sub" style="max-width:440px;margin:0 auto;">See what our students say about us</p>
      </div>
    </div>
    <div class="testimonials-track-wrap reveal">
      <div class="testimonials-track" id="testiTrack"></div>
    </div>
  </section>

  <section class="section bg-dark">
    <div class="container">
      <div class="section-hdr reveal">
        <div class="section-tag">Verified</div>
        <h2 class="section-title">Our Legal Certifications</h2>
        <p class="section-sub" style="max-width:440px;margin:0 auto;">Explore our diverse range of courses tailored to your needs</p>
      </div>
      <div class="cert-grid reveal">
        <div class="cert-card"><div style="font-family:'Sora',sans-serif;font-weight:900;font-size:1.4rem;background:linear-gradient(135deg,#f97316,#fbbf24);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">Skillbrzee</div></div>
        <div class="cert-card"><div class="cert-label">🏅 ISO CERTIFIED</div></div>
        <div class="cert-card"><div class="cert-label">🇮🇳 GOVT. REGISTERED</div></div>
        <div class="cert-card"><div class="cert-label">💼 MSME RECOGNIZED</div></div>
        <div class="cert-card"><div class="cert-label">⭐ STARTUP INDIA</div></div>
      </div>
    </div>
  </section>

  <footer id="contact">
    <div class="container">
      <div class="footer-grid">
        <div>
          <div class="footer-brand-name">Skillbrzee</div>
          <p class="footer-tagline">"Live as if you were to die tomorrow.<br>Learn as if you were to live forever…"</p>
          <div class="footer-social">
            <a href="#"><svg viewBox="0 0 24 24"><path d="M16 2H8C4.69 2 2 4.69 2 8v8c0 3.31 2.69 6 6 6h8c3.31 0 6-2.69 6-6V8c0-3.31-2.69-6-6-6zm4 14c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4h8c2.21 0 4 1.79 4 4v8zm-8-9a5 5 0 100 10A5 5 0 0012 7zm0 8a3 3 0 110-6 3 3 0 010 6zm5-9.5a1 1 0 110 2 1 1 0 010-2z"/></svg></a>
            <a href="#"><svg viewBox="0 0 24 24"><path d="M22.54 6.42a2.78 2.78 0 00-1.95-1.96C18.88 4 12 4 12 4s-6.88 0-8.59.46A2.78 2.78 0 001.46 6.42 29.94 29.94 0 001 12a29.94 29.94 0 00.46 5.58A2.78 2.78 0 003.41 19.6C5.12 20.06 12 20.06 12 20.06s6.88 0 8.59-.46a2.78 2.78 0 001.95-1.96A29.94 29.94 0 0023 12a29.94 29.94 0 00-.46-5.58zM9.75 15.02V8.98L15.5 12l-5.75 3.02z"/></svg></a>
            <a href="#"><svg viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></a>
          </div>
        </div>
        <div class="footer-col">
          <h4>Course Links</h4>
          <ul>
            <li><a href="#packages">Starter Package</a></li><li><a href="#packages">Basic Package</a></li>
            <li><a href="#packages">Silver Package</a></li><li><a href="#packages">Gold Package</a></li>
            <li><a href="#packages">Diamond Package</a></li><li><a href="#packages">Premium Package</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="#">Disclaimer</a></li><li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Refund Policy</a></li><li><a href="#">Terms &amp; Conditions</a></li>
            <li><a href="#">About Us</a></li><li><a href="#">Blog</a></li>
          </ul>
        </div>
        <div class="footer-col footer-contact">
          <h4>Contact Us</h4>
          <ul style="gap:16px;">
            <li><div class="icon"><svg viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 015.13 13a19.79 19.79 0 01-3.07-8.67A2 2 0 014.04 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg></div><span>9014427630</span></li>
            <li><div class="icon"><svg viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div><span>skllsbunny@gmail.com</span></li>
            <li><div class="icon"><svg viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg></div><span>Hyderabad, Telangana, India</span></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>Copyright © 2026 Skillbrzee. All rights reserved.</p>
        
      </div>
    </div>
  </footer>

  <button class="back-to-top" id="backToTop"><svg viewBox="0 0 24 24"><polyline points="18 15 12 9 6 15"/></svg></button>

  <!-- ENROLL MODAL -->
  <div class="modal-overlay" id="enrollModal">
    <div class="modal">
      <button class="modal-close" id="modalClose"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
      <p class="section-tag" style="margin-bottom:8px;" id="modalTag">STARTER PACKAGE</p>
      <h3 id="modalTitle">Enroll Now</h3>
      <p id="modalDesc">Begin your digital journey.</p>
      <div class="pkg-price-lg" id="modalPrice">₹500</div>
      <div class="modal-form">
        <input type="text" id="modalName" placeholder="Your Full Name" autocomplete="name"/>
        <input type="email" id="modalEmail" placeholder="Email Address" autocomplete="email"/>
        <input type="tel" id="modalPhone" placeholder="Phone Number" autocomplete="tel"/>
        <input type="password" id="modalPassword" placeholder="Create a Password (min 6 chars)" autocomplete="new-password"/>
        <button class="btn btn-primary" style="width:100%;justify-content:center;" id="enrollBtn" onclick="submitEnroll()">
          Proceed to Payment <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14"/><polyline points="12 5 19 12 12 19"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- USER LOGIN MODAL -->
  <div class="modal-overlay" id="loginModal">
    <div class="modal">
      <button class="modal-close" onclick="closeModal('loginModal')"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
      <div class="section-tag" style="margin-bottom:8px;">STUDENT LOGIN</div>
      <h3 style="margin-bottom:6px;">Welcome Back 👋</h3>
      <p style="margin-bottom:22px;">Log in to access your courses and resources</p>
      <div class="modal-form">
        <input type="email" id="loginEmail" placeholder="Email Address" autocomplete="email"/>
        <input type="password" id="loginPassword" placeholder="Password" autocomplete="current-password"/>
        <button class="btn btn-primary" style="width:100%;justify-content:center;" id="loginBtn" onclick="handleLogin()">Login</button>
        <p style="text-align:center;color:var(--text2);font-size:.82rem;margin-top:6px;">Don't have an account? <a href="#packages" style="color:var(--orange);" onclick="closeModal('loginModal')">Enroll now</a></p>
      </div>
    </div>
  </div>

  <!-- ADMIN LOGIN MODAL -->
  <div class="modal-overlay" id="adminLoginModal">
    <div class="modal" style="max-width:400px;">
      <button class="modal-close" onclick="closeModal('adminLoginModal')"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
      <div style="text-align:center;margin-bottom:24px;">
        <div style="width:60px;height:60px;background:rgba(168,85,247,.15);border:1px solid rgba(168,85,247,.3);border-radius:16px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;font-size:1.8rem;">🛡️</div>
        <div class="section-tag">ADMIN ACCESS</div>
        <h3 style="margin-bottom:4px;">Admin Panel</h3>
        <p style="font-size:.83rem;color:var(--text2);">Restricted area — authorized personnel only</p>
      </div>
      <div class="modal-form">
        <input type="email" id="adminLoginEmail" placeholder="Admin Email" autocomplete="off"/>
        <input type="password" id="adminLoginPass" placeholder="Admin Password" autocomplete="off"/>
        <button class="btn btn-primary" style="width:100%;justify-content:center;background:linear-gradient(135deg,var(--purple),#7c3aed);" id="adminLoginBtn" onclick="handleAdminLogin()">🔐 Enter Admin Panel</button>
      </div>
    </div>
  </div>

  <!-- USER DASHBOARD MODAL -->
  <div class="modal-overlay" id="dashboardModal">
    <div class="modal" style="max-width:520px;">
      <button class="modal-close" onclick="closeModal('dashboardModal')"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
      <div class="section-tag" style="margin-bottom:8px;">MY DASHBOARD</div>
      <h3 id="dashName" style="margin-bottom:4px;">Loading…</h3>
      <p id="dashEmail" style="margin-bottom:20px;font-size:.82rem;"></p>
      <div class="tab-switcher">
        <button class="tab-btn active" onclick="switchDashTab('enrollments',this)">My Courses</button>
        <button class="tab-btn" onclick="switchDashTab('resources',this)">Resources</button>
        <button class="tab-btn" onclick="switchDashTab('payments',this)">Payments</button>
      </div>
      <div id="dashTab-enrollments"><div id="dashEnrollments"></div></div>
      <div id="dashTab-resources" style="display:none;"><div id="dashResources"></div></div>
      <div id="dashTab-payments" style="display:none;"><div id="dashPayments"></div></div>
      <button class="btn btn-ghost" style="width:100%;justify-content:center;margin-top:16px;border-color:rgba(239,68,68,.3);color:#f87171;" onclick="handleLogout()">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
        Logout
      </button>
    </div>
  </div>

  <!-- USER DETAIL MODAL (Admin) -->
  <div class="modal-overlay user-detail-modal" id="userDetailModal">
    <div class="modal" style="max-width:560px;">
      <button class="modal-close" onclick="closeModal('userDetailModal')"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
      <div id="userDetailContent"></div>
    </div>
  </div>

  <!-- ════════════════════════════════
       ADMIN PANEL
  ════════════════════════════════ -->
  <div class="admin-overlay" id="adminPanel">
    <div class="admin-sidebar" id="adminSidebar">
      <div class="admin-sidebar-logo">⚡ Skillbrzee</div>
      <div class="admin-panel-badge">⚡ Admin Panel</div>
      <nav class="admin-nav-section">
        <button class="admin-nav-item active" onclick="switchAdminSection('dashboard',this)">
          <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
          Dashboard
        </button>
        <button class="admin-nav-item" onclick="switchAdminSection('upload',this)">
          <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/></svg>
          Upload Files
        </button>
        <button class="admin-nav-item" onclick="switchAdminSection('files',this)">
          <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/></svg>
          Manage Files
        </button>
        <button class="admin-nav-item" onclick="switchAdminSection('users',this)">
          <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197"/></svg>
          Users
        </button>
        <button class="admin-nav-item" onclick="switchAdminSection('payments',this)">
          <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
          Payments
        </button>
        <button class="admin-nav-item" onclick="switchAdminSection('packages',this)">
          <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"/></svg>
          Packages
        </button>
        <div class="admin-nav-label">Requests</div>
        <button class="admin-nav-item" onclick="switchAdminSection('kyc',this)">
          <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
          KYC Request
        </button>
        <button class="admin-nav-item" onclick="switchAdminSection('payout',this)">
          <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2z"/></svg>
          Payout Request
        </button>
        <hr class="admin-nav-divider"/>
        <button class="admin-nav-item exit-btn" onclick="exitAdmin()">
          <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
          Exit Panel
        </button>
      </nav>
      <div class="admin-sidebar-footer">
        <div class="admin-sidebar-user">
          <div class="admin-avatar-icon">SA</div>
          <div><div class="admin-user-name">Skillbrzee Admin</div><div class="admin-user-role">Super Admin</div></div>
        </div>
      </div>
    </div>

    <div class="admin-main">
      <div class="admin-topbar">
        <h1 id="adminSectionTitle">Dashboard</h1>
        <div class="admin-topbar-right">
          <span id="adminClock"></span>
          <button class="admin-btn-secondary" onclick="refreshCurrentSection()" title="Refresh data">↻ Refresh</button>
          <button class="admin-btn-secondary" onclick="exitAdmin()">← Back to Site</button>
        </div>
      </div>

      <div class="admin-content">

        <!-- ── DASHBOARD ── -->
        <div class="admin-section active" id="admin-dashboard">
          <div class="admin-stats-grid" id="dashStatsGrid">
            <div class="admin-stat-card blue"><div class="admin-stat-label">Total Users</div><div class="admin-stat-value blue" id="ds-users">—</div><div class="admin-stat-sub">All registered students</div></div>
            <div class="admin-stat-card orange"><div class="admin-stat-label">Total Revenue</div><div class="admin-stat-value orange" id="ds-revenue">—</div><div class="admin-stat-sub">All-time sales</div></div>
            <div class="admin-stat-card green"><div class="admin-stat-label">Total Enrollments</div><div class="admin-stat-value green" id="ds-enrollments">—</div><div class="admin-stat-sub">Paid enrollments</div></div>
            <div class="admin-stat-card purple"><div class="admin-stat-label">Total Files</div><div class="admin-stat-value purple" id="ds-files">—</div><div class="admin-stat-sub">Uploaded resources</div></div>
          </div>

          <div class="admin-section-heading">Revenue Analytics</div>
          <div class="admin-filter-row">
            <input type="date" class="admin-date-input" id="analyticsFrom" placeholder="From Date"/>
            <input type="date" class="admin-date-input" id="analyticsTo" placeholder="To Date"/>
            <button class="admin-btn-primary" onclick="loadAnalytics()">Search</button>
            <button class="admin-btn-secondary" onclick="clearAnalyticsFilter()">Clear</button>
          </div>
          <div class="admin-analytics-grid" id="analyticsGrid">
            <div class="admin-analytics-card"><div class="admin-analytics-label">Including GST Sale</div><div class="admin-analytics-value" id="an-gst-incl">—</div></div>
            <div class="admin-analytics-card"><div class="admin-analytics-label">Without GST Sale</div><div class="admin-analytics-value" id="an-gst-excl">—</div></div>
            <div class="admin-analytics-card"><div class="admin-analytics-label">GST Amount</div><div class="admin-analytics-value" id="an-gst-amt">—</div></div>
            <div class="admin-analytics-card"><div class="admin-analytics-label">Total Payments</div><div class="admin-analytics-value" id="an-payments">—</div></div>
            <div class="admin-analytics-card"><div class="admin-analytics-label">Paid Orders</div><div class="admin-analytics-value" id="an-paid">—</div></div>
            <div class="admin-analytics-card"><div class="admin-analytics-label">Failed Orders</div><div class="admin-analytics-value" id="an-failed">—</div></div>
            <div class="admin-analytics-card"><div class="admin-analytics-label">Avg Order Value</div><div class="admin-analytics-value" id="an-avg">—</div></div>
            <div class="admin-analytics-card"><div class="admin-analytics-label">New Users (Period)</div><div class="admin-analytics-value" id="an-new-users">—</div></div>
          </div>

          <div class="admin-section-heading">Package Breakdown</div>
          <div class="admin-packages-grid" id="pkgBreakdownGrid">
            <div class="admin-loading"><div class="admin-spinner"></div> Loading…</div>
          </div>

          <div class="admin-section-heading">Recent Payments</div>
          <div class="admin-table-container">
            <table class="data-table">
              <thead><tr><th>User</th><th>Package</th><th>Amount</th><th>Status</th><th>Date</th></tr></thead>
              <tbody id="recentPaymentsBody"><tr><td colspan="5" class="admin-table-empty"><div class="admin-loading"><div class="admin-spinner"></div> Loading payments…</div></td></tr></tbody>
            </table>
          </div>
        </div>

        <!-- ── UPLOAD FILES ── -->
        <div class="admin-section" id="admin-upload">
          <div class="admin-upload-zone" onclick="document.getElementById('adminFileInput').click()">
            <input type="file" id="adminFileInput" multiple style="display:none" onchange="handleAdminFileSelect(this.files)"/>
            <div class="admin-upload-zone-icon">📁</div>
            <div class="admin-upload-zone-text" id="adminUploadAreaTitle">Drag &amp; drop files here</div>
            <div class="admin-upload-zone-sub">Supports PDF, MP4, JPG, PNG, ZIP and more</div>
            <button class="admin-btn-primary" type="button" style="margin-top:16px;">Browse Files</button>
          </div>
          <div class="admin-form-grid">
            <div class="admin-form-group">
              <label>File Title *</label>
              <input type="text" class="admin-form-input" id="uploadTitle" placeholder="e.g. Digital Marketing Guide 2026"/>
            </div>
            <div class="admin-form-group">
              <label>Category</label>
              <select class="admin-form-input" id="uploadCategory">
                <option value="General">General</option>
                <option value="Digital Marketing">Digital Marketing</option>
                <option value="Graphic Design">Graphic Design</option>
                <option value="Video Editing">Video Editing</option>
                <option value="Social Media">Social Media</option>
                <option value="eCommerce">eCommerce</option>
                <option value="Freelancing">Freelancing</option>
                <option value="Study Material">Study Material</option>
                <option value="Books">Books</option>
              </select>
            </div>
            <div class="admin-form-group">
              <label>Visibility</label>
              <select class="admin-form-input" id="uploadVisibility">
                <option value="public">🌍 Public (Everyone)</option>
                <option value="enrolled">🔒 Enrolled Students Only</option>
              </select>
            </div>
            <div class="admin-form-group">
              <label>File URL / Google Drive Link</label>
              <input type="url" class="admin-form-input" id="uploadUrl" placeholder="https://drive.google.com/file/..."/>
            </div>
          </div>
          <div style="display:flex;gap:12px;margin-bottom:28px;">
            <button class="admin-btn-primary" id="uploadSubmitBtn" onclick="submitUpload()">✅ Save File</button>
            <button class="admin-btn-secondary" onclick="resetUploadForm()">🔄 Reset</button>
          </div>
          <div class="admin-section-heading">Recently Uploaded</div>
          <div class="admin-table-container">
            <table class="data-table">
              <thead><tr><th>File Name</th><th>Category</th><th>Type</th><th>Visibility</th><th>Uploaded</th><th>Action</th></tr></thead>
              <tbody id="uploadTableBody"><tr><td colspan="6" class="admin-table-empty">No files uploaded yet.</td></tr></tbody>
            </table>
          </div>
        </div>

        <!-- ── MANAGE FILES ── -->
        <div class="admin-section" id="admin-files">
          <div class="admin-filter-row">
            <input type="text" class="admin-search-input" id="filesSearch" placeholder="🔍 Search files…" oninput="adminLoadFiles()" style="flex:1;"/>
            <select class="admin-search-input" id="filesFilterCat" onchange="adminLoadFiles()">
              <option value="">All Categories</option>
              <option value="Digital Marketing">Digital Marketing</option>
              <option value="Graphic Design">Graphic Design</option>
              <option value="Video Editing">Video Editing</option>
              <option value="Social Media">Social Media</option>
              <option value="eCommerce">eCommerce</option>
              <option value="Freelancing">Freelancing</option>
              <option value="Study Material">Study Material</option>
              <option value="Books">Books</option>
              <option value="General">General</option>
            </select>
            <select class="admin-search-input" id="filesFilterVis" onchange="adminLoadFiles()">
              <option value="">All Visibility</option>
              <option value="public">Public</option>
              <option value="enrolled">Enrolled Only</option>
            </select>
          </div>
          <div class="admin-table-container">
            <div class="admin-table-header">
              <div class="admin-table-title">All Files</div>
              <span id="filesCount" style="font-size:12px;color:#64748b;"></span>
            </div>
            <table class="data-table">
              <thead><tr><th>#</th><th>File Name</th><th>Category</th><th>Type</th><th>Visibility</th><th>Downloads</th><th>Uploaded</th><th>Actions</th></tr></thead>
              <tbody id="adminFilesBody"><tr><td colspan="8" class="admin-table-empty"><div class="admin-loading"><div class="admin-spinner"></div> Loading files…</div></td></tr></tbody>
            </table>
            <div class="admin-pagination" id="filesPagination"></div>
          </div>
        </div>

        <!-- ── USERS ── -->
        <div class="admin-section" id="admin-users">
          <div class="admin-filter-row">
            <input type="text" class="admin-search-input" id="usersSearch" placeholder="🔍 Search by name, email, phone…" style="flex:1;"/>
            <button class="admin-btn-primary" onclick="adminLoadUsers()">Search</button>
            <button class="admin-btn-secondary" onclick="document.getElementById('usersSearch').value='';adminLoadUsers()">Clear</button>
            <span id="usersCount" style="font-size:12px;color:#64748b;margin-left:auto;"></span>
          </div>
          <div class="admin-table-container">
            <div class="admin-table-header"><div class="admin-table-title">All Users</div></div>
            <table class="data-table">
              <thead><tr><th>#</th><th>User</th><th>Email</th><th>Phone</th><th>Enrolled Packages</th><th>Status</th><th>Joined</th><th>Actions</th></tr></thead>
              <tbody id="adminUsersBody"><tr><td colspan="8" class="admin-table-empty"><div class="admin-loading"><div class="admin-spinner"></div> Loading users…</div></td></tr></tbody>
            </table>
            <div class="admin-pagination" id="usersPagination"></div>
          </div>
        </div>

        <!-- ── PAYMENTS ── -->
        <div class="admin-section" id="admin-payments">
          <div class="admin-stats-grid" style="grid-template-columns:repeat(4,1fr);">
            <div class="admin-stat-card green"><div class="admin-stat-label">Total Collected</div><div class="admin-stat-value green" id="pay-total">—</div></div>
            <div class="admin-stat-card blue"><div class="admin-stat-label">Paid Orders</div><div class="admin-stat-value blue" id="pay-paid">—</div></div>
            <div class="admin-stat-card red"><div class="admin-stat-label">Failed Orders</div><div class="admin-stat-value red" id="pay-failed">—</div></div>
            <div class="admin-stat-card orange"><div class="admin-stat-label">Pending Orders</div><div class="admin-stat-value orange" id="pay-pending">—</div></div>
          </div>
          <div class="admin-filter-row">
            <input type="text" class="admin-search-input" id="paymentsSearch" placeholder="🔍 Search by name, email, payment ID…" style="flex:1;"/>
            <input type="date" class="admin-date-input" id="paymentsFrom"/>
            <input type="date" class="admin-date-input" id="paymentsTo"/>
            <select class="admin-search-input" id="paymentsStatus">
              <option value="">All Status</option>
              <option value="paid">Paid</option>
              <option value="failed">Failed</option>
              <option value="created">Pending</option>
            </select>
            <select class="admin-search-input" id="paymentsPackage">
              <option value="">All Packages</option>
              <option value="1">Starter</option>
              <option value="2">Basic</option>
              <option value="3">Silver</option>
              <option value="4">Gold</option>
              <option value="5">Diamond</option>
              <option value="6">Premium</option>
            </select>
            <button class="admin-btn-primary" onclick="adminLoadPayments()">Search</button>
            <button class="admin-btn-secondary" onclick="clearPaymentsFilter()">Clear</button>
          </div>
          <div class="admin-table-container">
            <div class="admin-table-header">
              <div class="admin-table-title">All Payments</div>
              <div style="display:flex;gap:8px;align-items:center;">
                <span id="paymentsCount" style="font-size:12px;color:#64748b;"></span>
                <button class="admin-btn-sm admin-btn-success" onclick="exportPaymentsCSV()">⬇ Export CSV</button>
              </div>
            </div>
            <table class="data-table">
              <thead><tr><th>#</th><th>User</th><th>Package</th><th>Amount</th><th>Payment ID</th><th>Method</th><th>Status</th><th>Date</th><th>Actions</th></tr></thead>
              <tbody id="adminPaymentsBody"><tr><td colspan="9" class="admin-table-empty"><div class="admin-loading"><div class="admin-spinner"></div> Loading payments…</div></td></tr></tbody>
            </table>
            <div class="admin-pagination" id="paymentsPagination"></div>
          </div>
        </div>

        <!-- ── PACKAGES ── -->
        <div class="admin-section" id="admin-packages">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
            <span style="font-family:'Syne',sans-serif;font-size:15px;font-weight:700;color:#e2e8f0;">Manage Packages</span>
          </div>
          <div class="admin-manage-pkg-grid" id="adminPackagesGrid">
            <!-- Populated dynamically -->
          </div>
        </div>

        <!-- ── KYC ── -->
        <div class="admin-section" id="admin-kyc">
          <div class="admin-table-container">
            <div class="admin-table-header"><div class="admin-table-title">KYC Requests</div></div>
            <table class="data-table">
              <thead><tr><th>User</th><th>Email</th><th>Document</th><th>Submitted</th><th>Status</th><th>Actions</th></tr></thead>
              <tbody id="kycBody">
                <tr><td colspan="6" class="admin-table-empty">No KYC requests found.</td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- ── PAYOUT ── -->
        <div class="admin-section" id="admin-payout">
          <div class="admin-table-container">
            <div class="admin-table-header"><div class="admin-table-title">Payout Requests</div></div>
            <table class="data-table">
              <thead><tr><th>User</th><th>Amount</th><th>Method</th><th>Account</th><th>Status</th><th>Requested</th><th>Actions</th></tr></thead>
              <tbody id="payoutBody">
                <tr><td colspan="7" class="admin-table-empty">No payout requests found.</td></tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="toast-container" id="toastContainer"></div>

<script>
/* ════════════════════════════════════════════════════
   STATIC DATA
════════════════════════════════════════════════════ */
const COURSES_FALLBACK = [
  { name:'AFFILIATE MARKETING',     tag:'Marketing',    thumbnail:{url:'https://images.unsplash.com/photo-1563986768609-322da13575f3?w=400&auto=format&fit=crop&q=80'} },
  { name:'INSTAGRAM MARKETING',     tag:'Social Media', thumbnail:{url:'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400&auto=format&fit=crop&q=80'} },
  { name:'GRAPHIC DESIGNING',       tag:'Design',       thumbnail:{url:'https://images.unsplash.com/photo-1561070791-2526d30994b5?w=400&auto=format&fit=crop&q=80'} },
  { name:'VIDEO EDITING',           tag:'Creative',     thumbnail:{url:'https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=400&auto=format&fit=crop&q=80'} },
  { name:'FACEBOOK ADS',            tag:'Advertising',  thumbnail:{url:'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&auto=format&fit=crop&q=80'} },
  { name:'GOOGLE ADS',              tag:'Advertising',  thumbnail:{url:'https://images.unsplash.com/photo-1573804633927-bfcbcd909acd?w=400&auto=format&fit=crop&q=80'} },
  { name:'YOUTUBE MASTERY',         tag:'Content',      thumbnail:{url:'https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=400&auto=format&fit=crop&q=80'} },
  { name:'CONTENT CREATION',        tag:'Creative',     thumbnail:{url:'https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=400&auto=format&fit=crop&q=80'} },
  { name:'SOCIAL MEDIA MANAGEMENT', tag:'Social Media', thumbnail:{url:'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=400&auto=format&fit=crop&q=80'} },
  { name:'DROP SHIPPING',           tag:'eCommerce',    thumbnail:{url:'https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=400&auto=format&fit=crop&q=80'} },
  { name:'FREELANCING',             tag:'Career',       thumbnail:{url:'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400&auto=format&fit=crop&q=80'} },
  { name:'WHATSAPP MARKETING',      tag:'Marketing',    thumbnail:{url:'https://images.unsplash.com/photo-1611944212129-29977ae1398c?w=400&auto=format&fit=crop&q=80'} },
];
const PACKAGES = [
  { id:1, name:'STARTER PACKAGE',  price:'₹500',    rawPrice:500,   sub:'/ one-time', desc:'Begin your digital journey with the most fundamental digital skills and tools.',                  img:'https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=500&auto=format&fit=crop&q=80', featured:false },
  { id:2, name:'BASIC PACKAGE',    price:'₹1,499',  rawPrice:1499,  sub:'/ one-time', desc:'Expand your knowledge base with essential digital marketing modules and templates.',             img:'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=500&auto=format&fit=crop&q=80', featured:false },
  { id:3, name:'SILVER PACKAGE',   price:'₹2,999',  rawPrice:2999,  sub:'/ one-time', desc:'Build intermediate expertise with hands-on projects, live mentoring and resources.',             img:'https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?w=500&auto=format&fit=crop&q=80', featured:false },
  { id:4, name:'GOLD PACKAGE',     price:'₹5,499',  rawPrice:5499,  sub:'/ one-time', desc:'Master advanced strategies with live sessions, real-world case studies and 1:1 mentoring.',      img:'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=500&auto=format&fit=crop&q=80', featured:true  },
  { id:5, name:'DIAMOND PACKAGE',  price:'₹9,999',  rawPrice:9999,  sub:'/ one-time', desc:'Full suite of professional-grade courses with personal mentoring access and exclusive content.', img:'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=500&auto=format&fit=crop&q=80', featured:false },
  { id:6, name:'PREMIUM PACKAGE',  price:'₹14,999', rawPrice:14999, sub:'/ one-time', desc:'The ultimate package — all courses, all features, lifetime access and dedicated support.',       img:'https://images.unsplash.com/photo-1552664730-d307ca884978?w=500&auto=format&fit=crop&q=80', featured:false },
];
const TESTIMONIALS = [
  { name:'Ananya Reddy',  loc:'Hyderabad, Telangana', rating:5, text:'"Skillbrzee changed my life! The courses are well-structured and the mentors are incredibly knowledgeable. I landed my first freelance client within a month."' },
  { name:'Rahul Sharma',  loc:'Delhi',                rating:5, text:'"The Gold Package was absolutely worth every rupee. Live sessions, real-time feedback, and a supportive community — everything you need to grow your digital career."' },
  { name:'Priya Nair',    loc:'Bangalore, Karnataka', rating:5, text:'"I started with zero knowledge of digital marketing. Today I run my own agency. Skillbrzee gave me the confidence and tools to make it happen."' },
  { name:'Karan Mehta',   loc:'Mumbai, Maharashtra',  rating:5, text:'"The video editing course was absolutely top-notch. Practical, in-depth, and easy to follow. Got my first paid project within 3 weeks."' },
  { name:'Sneha Pillai',  loc:'Chennai, Tamil Nadu',  rating:5, text:'"Best investment I made this year. The freelancing course taught me exactly how to find clients and price my services. Already earning ₹40K/month from home!"' },
  { name:'Arjun Das',     loc:'Kolkata, West Bengal', rating:5, text:'"The Facebook Ads course alone was worth the entire Premium Package price. The ROI knowledge I gained is incredible."' },
];

/* ════════════════════════════════════════════════════
   UTILITIES
════════════════════════════════════════════════════ */
function fmtMoney(paise) { return '₹' + (paise/100).toLocaleString('en-IN'); }
function fmtDate(d) { if(!d) return '—'; return new Date(d).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'}); }
function fmtDateTime(d) { if(!d) return '—'; return new Date(d).toLocaleString('en-IN',{day:'numeric',month:'short',year:'numeric',hour:'2-digit',minute:'2-digit'}); }
function getInitials(name='') { return (name||'').split(' ').map(w=>w[0]).filter(Boolean).join('').slice(0,2).toUpperCase()||'U'; }
function formatBytes(b){ if(b<1024) return b+'B'; if(b<1048576) return (b/1024).toFixed(1)+'KB'; return (b/1048576).toFixed(1)+'MB'; }

function getFileTypeInfo(url='', name='') {
  const ext = ((url.split('.').pop()||'').split('?')[0]||name.split('.').pop()||'').toLowerCase();
  if (ext==='pdf') return {cls:'pdf',icon:'📕',label:'PDF'};
  if (['doc','docx'].includes(ext)) return {cls:'doc',icon:'📘',label:'DOC'};
  if (['ppt','pptx'].includes(ext)) return {cls:'doc',icon:'📙',label:'PPT'};
  if (['xls','xlsx'].includes(ext)) return {cls:'doc',icon:'📗',label:'XLS'};
  if (['jpg','jpeg','png','gif','webp','svg'].includes(ext)) return {cls:'img',icon:'🖼️',label:'IMG'};
  if (['mp4','mov','avi','mkv'].includes(ext)) return {cls:'other',icon:'🎬',label:'VID'};
  if (['zip','rar','7z'].includes(ext)) return {cls:'other',icon:'🗜️',label:'ZIP'};
  return {cls:'other',icon:'📄',label:'FILE'};
}

function setLoading(btnId, loading, label='Loading…') {
  const btn = document.getElementById(btnId);
  if (!btn) return;
  btn.disabled = loading;
  if (loading) { btn._original = btn.innerHTML; btn.innerHTML = `<span class="spinner"></span> ${label}`; }
  else { btn.innerHTML = btn._original || label; }
}
function closeModal(id) { document.getElementById(id)?.classList.remove('open'); document.body.style.overflow=''; }
function openModal(id) { document.getElementById(id)?.classList.add('open'); document.body.style.overflow='hidden'; }

const TOAST_ICONS = {
  success: '<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>',
  error:   '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>',
  info:    '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>',
};
function showToast(type, title, message, duration=4500) {
  const c = document.getElementById('toastContainer');
  const t = document.createElement('div');
  t.className='toast';
  t.innerHTML=`<div class="toast-icon ${type}">${TOAST_ICONS[type]||TOAST_ICONS.info}</div><div class="toast-text"><div class="toast-title">${title}</div><div class="toast-sub">${message}</div></div>`;
  c.appendChild(t);
  requestAnimationFrame(()=>requestAnimationFrame(()=>t.classList.add('show')));
  setTimeout(()=>{t.classList.remove('show');setTimeout(()=>t.remove(),420);},duration);
}

/* ════════════════════════════════════════════════════
   AUTH / NAV
════════════════════════════════════════════════════ */
function updateNavAuth() {
  const slot = document.getElementById('navAuthSlot');
  const mob  = document.getElementById('mobAuthBtn');
  if (isLoggedIn()) {
    const initials = getInitials(currentUser.name);
    slot.innerHTML = `<div class="nav-user-wrap" id="navUserWrap">
      <button class="nav-user-btn" onclick="toggleUserDropdown()">
        <div class="nav-user-avatar">${initials}</div>
        <span>${(currentUser.name||'').split(' ')[0]}</span>
        <svg viewBox="0 0 24 24" width="13" height="13" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </button>
      <div class="user-dropdown">
        <div class="user-dropdown-header">
          <div class="user-dropdown-name">${currentUser.name}</div>
          <div class="user-dropdown-email">${currentUser.email}</div>
        </div>
        <a onclick="openDashboard()">📊 My Dashboard</a>
        <a onclick="openDashboard()">🎓 My Courses</a>
        <a class="logout-btn" onclick="handleLogout()">↩ Logout</a>
      </div>
    </div>`;
    if (mob) mob.textContent='My Dashboard';
  } else {
    slot.innerHTML = `<a href="#" class="btn-nav-login" onclick="openLoginModal(event)">Login</a>`;
    if (mob) mob.textContent='Login';
  }
  initCursorTargets();
  renderPackages();
}
function toggleUserDropdown() { document.getElementById('navUserWrap')?.classList.toggle('open'); }
document.addEventListener('click', e=>{
  const w=document.getElementById('navUserWrap');
  if(w&&!w.contains(e.target)) w.classList.remove('open');
});
function handleMobAuth(e) { e.preventDefault(); closeDrawer(); if(isLoggedIn()) openDashboard(); else openLoginModal(e); }

/* ════════════════════════════════════════════════════
   PUBLIC CONTENT
════════════════════════════════════════════════════ */
async function renderCourses() {
  let courses = COURSES_FALLBACK;
  try {
    const res = await fetch(`${API_BASE}/courses`,{signal:AbortSignal.timeout(10000)});
    if(res.ok){const d=await res.json();if(Array.isArray(d.courses)&&d.courses.length>0)courses=d.courses;}
  } catch {}
  document.getElementById('coursesGrid').innerHTML = courses.map(c=>`
    <div class="course-card" tabindex="0" onclick="scrollToSection('packages')">
      <div class="course-badge-overlay">${c.tag}</div>
      <img class="course-img" src="${c.thumbnail?.url||''}" alt="${c.name}" loading="lazy"/>
      <div class="course-body"><div class="course-name">${c.name}</div><div class="course-tag">Beginner → Advanced</div></div>
    </div>`).join('');
  observeReveal();
}

function isEnrolledIn(pkgId) {
  if(!currentUser?.enrolledPackages) return false;
  return currentUser.enrolledPackages.some(ep=>Number(ep.packageId)===Number(pkgId));
}
function renderPackages() {
  const grid = document.getElementById('packagesGrid');
  if(!grid) return;
  grid.innerHTML = PACKAGES.map(p=>{
    const enrolled = isEnrolledIn(p.id);
    return `<div class="pkg-card ${p.featured?'featured':''}" id="pkg-${p.id}">
      ${p.featured?'<div class="pkg-badge">⭐ Most Popular</div>':''}
      <div class="pkg-img-wrap"><img src="${p.img}" alt="${p.name}" loading="lazy"/></div>
      <div class="pkg-body">
        <div class="pkg-name">${p.name}</div>
        <div class="pkg-desc">${p.desc}</div>
        <hr class="pkg-divider"/>
        <div class="pkg-price">${p.price} <sub>${p.sub}</sub></div>
        ${enrolled
          ? `<div class="enrolled-badge">✅ Already Enrolled</div>`
          : `<button class="btn-enroll" onclick="openEnrollModal(${p.id})">Enroll Now <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14"/><polyline points="12 5 19 12 12 19"/></svg></button>`}
      </div>
    </div>`;
  }).join('');
}

async function renderPublicResources() {
  const grid = document.getElementById('publicResourcesGrid');
  try {
    const res = await fetch(`${API_BASE}/resources`,{signal:AbortSignal.timeout(12000)});
    if(!res.ok) throw new Error('Failed');
    const data = await res.json();
    const pub = data.resources||[];
    if(!pub.length){grid.innerHTML='<div class="no-resources">📚 Resources are being added. Check back soon!</div>';return;}
    grid.innerHTML = pub.map(r=>{
      const info = getFileTypeInfo(r.fileUrl||'',r.fileName||'');
      return `<div class="resource-card" onclick="downloadResource('${r._id}')">
        <div class="resource-icon ${info.cls}">${info.icon}</div>
        <div class="resource-info">
          <div class="resource-name">${r.title}</div>
          <div class="resource-meta">${r.category} · ${info.label} · ${r.downloads||0} downloads</div>
        </div>
        <div class="resource-dl">⬇ Download</div>
      </div>`;
    }).join('');
  } catch {
    grid.innerHTML='<div class="no-resources">📚 Resources are being added. Check back soon!</div>';
  }
}

async function downloadResource(id) {
  try {
    const res = await fetch(`${API_BASE}/resources/${id}/download`,{method:'POST',headers:authHeaders()});
    if(!res.ok){
      if(res.status===401){showToast('info','Login Required','Please login to download this resource.');openModal('loginModal');return;}
      throw new Error('Failed');
    }
    const data = await res.json();
    if(data.fileUrl){window.open(data.fileUrl.startsWith('http')?data.fileUrl:`https://skillset-g4oh.onrender.com${data.fileUrl}`,'_blank');showToast('success','Download Started',data.fileName||'Resource');}
    else showToast('info','No Download URL','This file has no download link configured.');
  } catch { showToast('error','Download Failed','Could not download resource.'); }
}

function renderTestimonials() {
  const track = document.getElementById('testiTrack');
  const cards = TESTIMONIALS.map(t=>`
    <div class="testi-card">
      <div class="stars">${'★'.repeat(t.rating)}</div>
      <div class="testi-text">${t.text}</div>
      <div class="testi-author"><div class="testi-avatar">${t.name[0]}</div><div><div class="testi-name">${t.name}</div><div class="testi-loc">📍 ${t.loc}</div></div></div>
    </div>`).join('');
  track.innerHTML = cards+cards;
}

/* ════════════════════════════════════════════════════
   ENROLL FLOW
════════════════════════════════════════════════════ */
let currentPkgId = 1;
function openEnrollModal(pkgId) {
  const pkg = PACKAGES.find(p=>p.id===pkgId);
  if(!pkg) return;
  currentPkgId = pkgId;
  if(isLoggedIn()){
    document.getElementById('modalName').value=currentUser.name||'';
    document.getElementById('modalEmail').value=currentUser.email||'';
    document.getElementById('modalPhone').value=currentUser.phone||'';
    document.getElementById('modalPassword').value='••••••••';
    ['modalName','modalEmail','modalPassword'].forEach(id=>document.getElementById(id).disabled=true);
    document.getElementById('modalPhone').disabled=false;
  } else {
    ['modalName','modalEmail','modalPhone','modalPassword'].forEach(id=>{document.getElementById(id).value='';document.getElementById(id).disabled=false;});
  }
  document.getElementById('modalTag').textContent=pkg.name;
  document.getElementById('modalTitle').textContent='Enroll in '+pkg.name.split(' ').slice(0,2).join(' ');
  document.getElementById('modalDesc').textContent=pkg.desc;
  document.getElementById('modalPrice').textContent=pkg.price;
  openModal('enrollModal');
}
document.getElementById('modalClose').addEventListener('click',()=>closeModal('enrollModal'));
document.getElementById('enrollModal').addEventListener('click',e=>{if(e.target===document.getElementById('enrollModal'))closeModal('enrollModal');});

async function submitEnroll() {
  const name=document.getElementById('modalName').value.trim();
  const email=document.getElementById('modalEmail').value.trim();
  const phone=document.getElementById('modalPhone').value.trim();
  const password=document.getElementById('modalPassword').value.trim();
  if(!name){showToast('error','Missing Name','Please enter your full name.');return;}
  if(!email||!email.includes('@')){showToast('error','Invalid Email','Enter a valid email address.');return;}
  if(!phone||phone.replace(/\D/g,'').length<10){showToast('error','Invalid Phone','Enter a valid 10-digit phone number.');return;}
  if(!isLoggedIn()&&(!password||password.length<6)){showToast('error','Weak Password','Password must be at least 6 characters.');return;}
  setLoading('enrollBtn',true,'Connecting…');
  try {
    let token=authToken;
    if(!token){
      setLoading('enrollBtn',true,'Creating account…');
      const regRes=await fetch(`${API_BASE}/auth/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,phone,password})});
      const regData=await regRes.json();
      if(regRes.status===409||regData.error?.toLowerCase().includes('already')){
        setLoading('enrollBtn',true,'Logging in…');
        const logRes=await fetch(`${API_BASE}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
        const logData=await logRes.json();
        if(!logRes.ok){setLoading('enrollBtn',false);closeModal('enrollModal');showToast('info','Account Exists','This email is already registered. Please log in.');document.getElementById('loginEmail').value=email;openModal('loginModal');return;}
        saveAuth(logData.accessToken,logData.user);token=logData.accessToken;
      } else if(regRes.ok){saveAuth(regData.accessToken,regData.user);token=regData.accessToken;}
      else{showToast('error','Registration Failed',regData.error||'Please try again.');setLoading('enrollBtn',false);return;}
    }
    setLoading('enrollBtn',true,'Creating order…');
    const orderRes=await fetch(`${API_BASE}/payments/create-order`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({packageId:currentPkgId})});
    const orderData=await orderRes.json();
    if(!orderRes.ok){showToast('error','Order Error',orderData.error||'Could not create order.');setLoading('enrollBtn',false);return;}
    setLoading('enrollBtn',false);
    closeModal('enrollModal');
    if(orderData.mock){
      const devRes=await fetch(`${API_BASE}/payments/dev-confirm`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({paymentId:orderData.paymentId})});
      const devData=await devRes.json();
      if(devRes.ok){await refreshUser();updateNavAuth();showToast('success','🎓 Enrolled!',`${orderData.packageName} — Dev payment confirmed.`);}
      else showToast('error','Dev Payment Failed',devData.error||'Could not confirm payment.');
      return;
    }
    if(typeof Razorpay==='undefined'){showToast('error','Payment Error','Razorpay SDK failed to load.');return;}
    const rzp=new Razorpay({
      key:orderData.keyId,amount:orderData.amount,currency:'INR',name:'Skillbrzee',description:orderData.packageName,order_id:orderData.orderId,
      prefill:orderData.prefill,theme:{color:'#f97316'},
      handler:async(response)=>{
        try{
          const verRes=await fetch(`${API_BASE}/payments/verify`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({razorpay_order_id:response.razorpay_order_id,razorpay_payment_id:response.razorpay_payment_id,razorpay_signature:response.razorpay_signature,paymentId:orderData.paymentId})});
          const verData=await verRes.json();
          if(verRes.ok){await refreshUser();updateNavAuth();showToast('success','🎓 Enrolled!',`${orderData.packageName} — Check your email!`);}
          else showToast('error','Verification Failed',verData.error||'Contact support@skillbrzee.in');
        }catch{showToast('error','Network Error','Could not verify payment.');}
      },
      modal:{ondismiss:()=>showToast('info','Payment Cancelled','You can try again anytime.')}
    });
    rzp.open();
  } catch(err){console.error('[enrollFlow]',err);showToast('error','Connection Error','Please check your internet and try again.');setLoading('enrollBtn',false);}
}

/* ════════════════════════════════════════════════════
   USER AUTH
════════════════════════════════════════════════════ */
function openLoginModal(e){e&&e.preventDefault();openModal('loginModal');}
document.getElementById('loginModal').addEventListener('click',e=>{if(e.target===document.getElementById('loginModal'))closeModal('loginModal');});

async function handleLogin() {
  const email=document.getElementById('loginEmail').value.trim();
  const password=document.getElementById('loginPassword').value.trim();
  if(!email||!password){showToast('error','Missing Fields','Enter your email and password.');return;}
  setLoading('loginBtn',true,'Logging in…');
  try {
    const res=await fetch(`${API_BASE}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
    const data=await res.json();
    if(!res.ok){showToast('error','Login Failed',data.error||'Invalid email or password.');setLoading('loginBtn',false);return;}
    saveAuth(data.accessToken,data.user);
    closeModal('loginModal');updateNavAuth();
    showToast('success','Login Successful!',`Welcome back, ${data.user.name} 🎉`);
    document.getElementById('loginEmail').value='';document.getElementById('loginPassword').value='';
  } catch{showToast('error','Connection Error','Could not reach server.');}
  finally{setLoading('loginBtn',false);}
}
function handleLogout(){clearAuth();closeModal('dashboardModal');updateNavAuth();showToast('success','Logged Out','See you soon! 👋');}

/* ════════════════════════════════════════════════════
   USER DASHBOARD
════════════════════════════════════════════════════ */
function switchDashTab(tab, btn) {
  document.querySelectorAll('[id^="dashTab-"]').forEach(el=>el.style.display='none');
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('dashTab-'+tab).style.display='';
  btn.classList.add('active');
  if(tab==='payments') loadPaymentHistory();
  if(tab==='resources') renderDashResources();
}
async function openDashboard() {
  if(!isLoggedIn()){openModal('loginModal');return;}
  document.getElementById('navUserWrap')?.classList.remove('open');
  document.getElementById('dashName').textContent=currentUser.name;
  document.getElementById('dashEmail').textContent=currentUser.email;
  openModal('dashboardModal');
  await refreshUser();
  renderDashEnrollments();
}
function renderDashEnrollments() {
  const el=document.getElementById('dashEnrollments');
  const eps=currentUser?.enrolledPackages||[];
  if(!eps.length){el.innerHTML=`<div class="no-enrollments">No enrollments yet. <a onclick="closeModal('dashboardModal');scrollToSection('packages')" style="color:var(--orange);cursor:pointer;">Browse packages →</a></div>`;return;}
  el.innerHTML=eps.map(ep=>`<div class="enrolled-pkg-item"><div><div class="enrolled-pkg-name">${ep.packageName||'Package #'+ep.packageId}</div><div class="enrolled-pkg-date">Enrolled ${fmtDate(ep.enrolledAt)}</div></div><span class="enrolled-pkg-badge">✅ Active</span></div>`).join('');
}
function renderDashResources() {
  const el=document.getElementById('dashResources');
  el.innerHTML='<p style="color:var(--text2);font-size:.85rem;text-align:center;padding:20px;">Loading…</p>';
  fetch(`${API_BASE}/resources`,{headers:authHeaders()})
    .then(r=>r.json())
    .then(data=>{
      const files=data.resources||[];
      if(!files.length){el.innerHTML='<p style="color:var(--text2);font-size:.85rem;text-align:center;padding:20px;">No resources available.</p>';return;}
      el.innerHTML=files.map(r=>{
        const info=getFileTypeInfo(r.fileUrl||'',r.title);
        return `<div class="enrolled-pkg-item" onclick="downloadResource('${r._id}')" style="cursor:pointer;">
          <div style="display:flex;align-items:center;gap:10px;"><span style="font-size:1.4rem;">${info.icon}</span><div><div class="enrolled-pkg-name">${r.title}</div><div class="enrolled-pkg-date">${r.category}</div></div></div>
          <span class="enrolled-pkg-badge" style="background:rgba(249,115,22,.15);border-color:rgba(249,115,22,.3);color:var(--orange);">⬇ Download</span>
        </div>`;
      }).join('');
    })
    .catch(()=>{el.innerHTML='<p style="color:var(--text2);font-size:.85rem;text-align:center;padding:20px;">Could not load resources.</p>';});
}
async function loadPaymentHistory() {
  const el=document.getElementById('dashPayments');
  el.innerHTML='<div style="text-align:center;padding:20px;color:var(--text2);">Loading…</div>';
  try {
    const res=await fetch(`${API_BASE}/payments/my-payments`,{headers:authHeaders()});
    const data=await res.json();
    if(!res.ok) throw new Error(data.error);
    const payments=data.payments||[];
    if(!payments.length){el.innerHTML=`<p style="color:var(--text2);font-size:.84rem;text-align:center;padding:16px;">No payment records yet.</p>`;return;}
    el.innerHTML=payments.slice(0,10).map(p=>{
      const sc=p.status==='paid'?'var(--green)':p.status==='failed'?'var(--red)':'var(--text2)';
      return `<div style="display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;margin-bottom:6px;font-size:.82rem;">
        <div><div style="font-weight:600;">${p.packageName||'—'}</div><div style="color:var(--text2);font-size:.74rem;">${fmtDate(p.createdAt)}</div></div>
        <div style="text-align:right;"><div style="font-weight:700;color:var(--orange);">${p.amount?fmtMoney(p.amount):'—'}</div><div style="font-size:.72rem;color:${sc};text-transform:uppercase;font-weight:700;">${p.status}</div></div>
      </div>`;
    }).join('');
  } catch {
    const eps=currentUser?.enrolledPackages||[];
    if(!eps.length){el.innerHTML=`<p style="color:var(--text2);font-size:.84rem;text-align:center;padding:16px;">No payment records yet.</p>`;return;}
    el.innerHTML=eps.map(ep=>`<div style="display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;margin-bottom:6px;font-size:.82rem;"><div><div style="font-weight:600;">${ep.packageName}</div><div style="color:var(--text2);font-size:.74rem;">${fmtDate(ep.enrolledAt)}</div></div><div style="font-weight:700;color:var(--green);">✅ Enrolled</div></div>`).join('');
  }
}

/* ════════════════════════════════════════════════════
   ADMIN LOGIN
════════════════════════════════════════════════════ */
function openAdminLogin(e){e&&e.preventDefault();openModal('adminLoginModal');}
document.getElementById('adminLoginModal').addEventListener('click',e=>{if(e.target===document.getElementById('adminLoginModal'))closeModal('adminLoginModal');});

async function handleAdminLogin() {
  const email = document.getElementById('adminLoginEmail').value.trim();
  const pass  = document.getElementById('adminLoginPass').value;
  if (!email || !pass) { showToast('error','Missing Fields','Please enter email and password.'); return; }
  setLoading('adminLoginBtn', true, 'Verifying…');
  try {
    // ✅ ALWAYS hit real API — no fake local token
    const res  = await fetch(`${API_BASE}/auth/login`, {
      method : 'POST',
      headers: { 'Content-Type': 'application/json' },
      body   : JSON.stringify({ email, password: pass })
    });
    const data = await res.json();
    if (!res.ok) {
      showToast('error', 'Access Denied', data.error || 'Invalid credentials.');
      document.getElementById('adminLoginPass').value = '';
      setLoading('adminLoginBtn', false);
      return;
    }
    if (data.user?.role !== 'admin') {
      showToast('error', 'Access Denied', 'Admin privileges required.');
      document.getElementById('adminLoginPass').value = '';
      setLoading('adminLoginBtn', false);
      return;
    }
    // ✅ Real JWT token — all API calls will work
    saveAuth(data.accessToken, data.user);
    closeModal('adminLoginModal');
    document.getElementById('adminLoginEmail').value = '';
    document.getElementById('adminLoginPass').value  = '';
    setLoading('adminLoginBtn', false);
    await openAdminPanel();
  } catch (err) {
    showToast('error', 'Connection Error', 'Could not reach server.');
    document.getElementById('adminLoginPass').value = '';
    setLoading('adminLoginBtn', false);
  }
}
/* ════════════════════════════════════════════════════
   ADMIN PANEL — CORE
════════════════════════════════════════════════════ */
let currentAdminSection = 'dashboard';

async function openAdminPanel() {
  isAdminMode=true;
  document.getElementById('adminPanel').classList.add('open');
  document.body.style.overflow='hidden';
  startAdminClock();
  await adminLoadDashboard();
  renderAdminPackages();
  showToast('success','Admin Access Granted','Welcome to the Admin Panel 🛡️');
}
function exitAdmin(){isAdminMode=false;document.getElementById('adminPanel').classList.remove('open');document.body.style.overflow='';}

const ADMIN_TITLES = {dashboard:'Dashboard',upload:'Upload Files',files:'Manage Files',users:'Users',payments:'Payments',packages:'Packages',kyc:'KYC Request',payout:'Payout Request'};

function switchAdminSection(section, el) {
  document.querySelectorAll('.admin-section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.admin-nav-item').forEach(i=>i.classList.remove('active'));
  document.getElementById('admin-'+section).classList.add('active');
  if(el) el.classList.add('active');
  document.getElementById('adminSectionTitle').textContent=ADMIN_TITLES[section]||section;
  currentAdminSection=section;
  // Load data for section
  if(section==='dashboard') adminLoadDashboard();
  if(section==='files') adminLoadFiles();
  if(section==='users') adminLoadUsers();
  if(section==='payments') adminLoadPayments();
  if(section==='upload') adminLoadRecentUploads();
  if(section==='packages') renderAdminPackages();
}

function refreshCurrentSection() { switchAdminSection(currentAdminSection, document.querySelector('.admin-nav-item.active')); }

function startAdminClock() {
  const el=document.getElementById('adminClock');
  function tick(){el.textContent=new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit',second:'2-digit'});}
  tick(); setInterval(tick,1000);
}

/* ════════════════════════════════════════════════════
   ADMIN — DASHBOARD (fully dynamic)
════════════════════════════════════════════════════ */
async function adminLoadDashboard() {
  // Load stats
  try {
    const res = await fetch(`${API_BASE}/admin/stats`,{headers:authHeaders()});
    if(res.ok){
      const data = await res.json();
      document.getElementById('ds-users').textContent = (data.totalUsers??data.enrolledCount??'—').toLocaleString?.('en-IN')||data.totalUsers;
      document.getElementById('ds-revenue').textContent = data.totalRevenue!=null ? fmtMoney(data.totalRevenue) : '—';
      document.getElementById('ds-enrollments').textContent = (data.totalEnrollments??data.enrolledCount??'—');
      document.getElementById('ds-files').textContent = (data.totalFiles??'—');
    }
  } catch {}

  // Load analytics
  await loadAnalytics();

  // Load package breakdown
  await loadPkgBreakdown();

  // Load recent payments
  await loadRecentPayments();
}

async function loadAnalytics() {
  const from = document.getElementById('analyticsFrom')?.value||'';
  const to   = document.getElementById('analyticsTo')?.value||'';
  try {
    const qs = new URLSearchParams();
    if(from) qs.set('from',from);
    if(to)   qs.set('to',to);
    const res = await fetch(`${API_BASE}/admin/analytics?${qs}`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const d = await res.json();
    const totalPaise = d.totalRevenue||0;
    const gstAmt     = Math.round(totalPaise*0.18/1.18);
    const excl       = totalPaise - gstAmt;
    document.getElementById('an-gst-incl').textContent  = fmtMoney(totalPaise);
    document.getElementById('an-gst-excl').textContent  = fmtMoney(excl);
    document.getElementById('an-gst-amt').textContent   = fmtMoney(gstAmt);
    document.getElementById('an-payments').textContent  = d.totalPayments||0;
    document.getElementById('an-paid').textContent      = d.paidPayments||0;
    document.getElementById('an-failed').textContent    = d.failedPayments||0;
    const avg = d.paidPayments>0 ? Math.round(totalPaise/d.paidPayments) : 0;
    document.getElementById('an-avg').textContent       = avg>0?fmtMoney(avg):'—';
    document.getElementById('an-new-users').textContent = d.newUsers||'—';
  } catch(e) {
    // Fallback: compute from payments list
    try {
      const res2 = await fetch(`${API_BASE}/admin/payments?limit=1000`,{headers:authHeaders()});
      if(!res2.ok) throw new Error('Failed');
      const d2 = await res2.json();
      const pays = d2.payments||[];
      const paid = pays.filter(p=>p.status==='paid');
      const failed = pays.filter(p=>p.status==='failed');
      const totalPaise = paid.reduce((s,p)=>s+(p.amount||0),0);
      const gstAmt = Math.round(totalPaise*0.18/1.18);
      document.getElementById('an-gst-incl').textContent  = fmtMoney(totalPaise);
      document.getElementById('an-gst-excl').textContent  = fmtMoney(totalPaise-gstAmt);
      document.getElementById('an-gst-amt').textContent   = fmtMoney(gstAmt);
      document.getElementById('an-payments').textContent  = pays.length;
      document.getElementById('an-paid').textContent      = paid.length;
      document.getElementById('an-failed').textContent    = failed.length;
      const avg = paid.length>0?Math.round(totalPaise/paid.length):0;
      document.getElementById('an-avg').textContent       = avg>0?fmtMoney(avg):'—';
      document.getElementById('an-new-users').textContent = '—';
    } catch { ['an-gst-incl','an-gst-excl','an-gst-amt','an-payments','an-paid','an-failed','an-avg','an-new-users'].forEach(id=>{const el=document.getElementById(id);if(el)el.textContent='—';}); }
  }
}

function clearAnalyticsFilter() {
  document.getElementById('analyticsFrom').value='';
  document.getElementById('analyticsTo').value='';
  loadAnalytics();
}

async function loadPkgBreakdown() {
  const grid = document.getElementById('pkgBreakdownGrid');
  try {
    const res = await fetch(`${API_BASE}/admin/payments?limit=10000`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const data = await res.json();
    const pays = (data.payments||[]).filter(p=>p.status==='paid');
    // Group by package
    const breakdown = {};
    PACKAGES.forEach(p=>{ breakdown[p.id]={name:p.name,count:0,total:0}; });
    pays.forEach(p=>{
      const pid = p.packageId;
      if(breakdown[pid]){breakdown[pid].count++;breakdown[pid].total+=(p.amount||0);}
      else { breakdown['other']=(breakdown['other']||{name:'Other',count:0,total:0}); breakdown['other'].count++;breakdown['other'].total+=(p.amount||0); }
    });
    grid.innerHTML = Object.values(breakdown).map(b=>`
      <div class="admin-pkg-card">
        <div class="admin-pkg-name">${b.name}</div>
        <div class="admin-pkg-count">${b.count} sale${b.count!==1?'s':''}</div>
        <div class="admin-pkg-value">${fmtMoney(b.total)}</div>
      </div>`).join('');
  } catch {
    grid.innerHTML='<p style="color:#64748b;font-size:13px;grid-column:1/-1;">Could not load package breakdown.</p>';
  }
}

async function loadRecentPayments() {
  const tbody = document.getElementById('recentPaymentsBody');
  try {
    const res = await fetch(`${API_BASE}/admin/payments?limit=8&sort=-createdAt`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const data = await res.json();
    const pays = data.payments||[];
    if(!pays.length){tbody.innerHTML='<tr><td colspan="5" class="admin-table-empty">No payments yet.</td></tr>';return;}
    tbody.innerHTML = pays.map(p=>{
      const sc = p.status==='paid'?'paid':p.status==='failed'?'failed':'pending';
      return `<tr>
        <td><div class="admin-user-cell"><div class="admin-user-avatar">${getInitials(p.userName||p.user?.name)}</div><div style="font-size:.84rem;font-weight:600;">${p.userName||p.user?.name||'—'}</div></div></td>
        <td style="font-size:.83rem;">${p.packageName||'—'}</td>
        <td class="payment-amount">${p.amount?fmtMoney(p.amount):'—'}</td>
        <td><span class="admin-badge ${sc}">${p.status||'—'}</span></td>
        <td style="color:#64748b;font-size:.8rem;">${fmtDate(p.createdAt)}</td>
      </tr>`;
    }).join('');
  } catch {
    tbody.innerHTML='<tr><td colspan="5" class="admin-table-empty">Could not load payments.</td></tr>';
  }
}

/* ════════════════════════════════════════════════════
   ADMIN — PAYMENTS (full section)
════════════════════════════════════════════════════ */
async function adminLoadPayments() {
  const tbody = document.getElementById('adminPaymentsBody');
  tbody.innerHTML=`<tr><td colspan="9" class="admin-table-empty"><div class="admin-loading"><div class="admin-spinner"></div> Loading payments…</div></td></tr>`;

  const search   = document.getElementById('paymentsSearch')?.value.trim()||'';
  const dateFrom = document.getElementById('paymentsFrom')?.value||'';
  const dateTo   = document.getElementById('paymentsTo')?.value||'';
  const status   = document.getElementById('paymentsStatus')?.value||'';
  const pkgId    = document.getElementById('paymentsPackage')?.value||'';
  const page     = adminState.payments.page;

  try {
    const qs = new URLSearchParams({limit:PAGE_SIZE,page,sort:'-createdAt'});
    if(search)   qs.set('search',search);
    if(dateFrom) qs.set('from',dateFrom);
    if(dateTo)   qs.set('to',dateTo);
    if(status)   qs.set('status',status);
    if(pkgId)    qs.set('packageId',pkgId);

    const res = await fetch(`${API_BASE}/admin/payments?${qs}`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const data = await res.json();
    const pays = data.payments||[];
    const total = data.total||pays.length;
    adminState.payments.total=total;

    // Update stats
    const paidCount = pays.filter(p=>p.status==='paid').length;
    const failCount = pays.filter(p=>p.status==='failed').length;
    const pendCount = pays.filter(p=>p.status==='created'||p.status==='pending').length;
    const totalAmt  = pays.filter(p=>p.status==='paid').reduce((s,p)=>s+(p.amount||0),0);

    // Try to get full stats
    try {
      const statsRes = await fetch(`${API_BASE}/admin/payment-stats`,{headers:authHeaders()});
      if(statsRes.ok){
        const sd = await statsRes.json();
        document.getElementById('pay-total').textContent  = sd.totalRevenue!=null?fmtMoney(sd.totalRevenue):fmtMoney(totalAmt);
        document.getElementById('pay-paid').textContent   = sd.paidCount??paidCount;
        document.getElementById('pay-failed').textContent = sd.failedCount??failCount;
        document.getElementById('pay-pending').textContent= sd.pendingCount??pendCount;
      } else throw new Error();
    } catch {
      document.getElementById('pay-total').textContent  = fmtMoney(totalAmt);
      document.getElementById('pay-paid').textContent   = paidCount;
      document.getElementById('pay-failed').textContent = failCount;
      document.getElementById('pay-pending').textContent= pendCount;
    }

    document.getElementById('paymentsCount').textContent = `${total} total`;

    if(!pays.length){tbody.innerHTML='<tr><td colspan="9" class="admin-table-empty">No payments found.</td></tr>';renderPagination('paymentsPagination',0,page);return;}

    tbody.innerHTML = pays.map((p,i)=>{
      const sc=p.status==='paid'?'paid':p.status==='failed'?'failed':'pending';
      const offset=(page-1)*PAGE_SIZE+i+1;
      return `<tr>
        <td style="color:#64748b;">${offset}</td>
        <td><div class="admin-user-cell"><div class="admin-user-avatar">${getInitials(p.userName||p.user?.name)}</div><div><div style="font-size:.84rem;font-weight:600;">${p.userName||p.user?.name||'—'}</div><div style="font-size:.72rem;color:#64748b;">${p.userEmail||p.user?.email||'—'}</div></div></div></td>
        <td style="font-size:.83rem;">${p.packageName||'Package #'+p.packageId}</td>
        <td class="payment-amount">${p.amount?fmtMoney(p.amount):'—'}</td>
        <td><div class="payment-id">${p.razorpayPaymentId||p.paymentId||'—'}</div></td>
        <td style="color:#64748b;font-size:.82rem;">${p.paymentMethod||p.method||'—'}</td>
        <td><span class="admin-badge ${sc}">${p.status||'—'}</span></td>
        <td style="color:#64748b;font-size:.8rem;">${fmtDate(p.createdAt)}</td>
        <td>
          <button class="admin-btn-sm admin-btn-info" onclick="viewPaymentDetail('${p._id}')">👁 View</button>
          ${p.status!=='paid'?`<button class="admin-btn-sm admin-btn-success" onclick="markPaymentPaid('${p._id}')">✔ Mark Paid</button>`:''}
        </td>
      </tr>`;
    }).join('');
    renderPagination('paymentsPagination',total,page,(p)=>{adminState.payments.page=p;adminLoadPayments();});
  } catch(err) {
    tbody.innerHTML='<tr><td colspan="9" class="admin-table-empty">❌ Could not load payments. Check your connection.</td></tr>';
  }
}

function clearPaymentsFilter() {
  ['paymentsSearch','paymentsFrom','paymentsTo'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});
  ['paymentsStatus','paymentsPackage'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});
  adminState.payments.page=1;
  adminLoadPayments();
}

async function viewPaymentDetail(id) {
  try {
    const res = await fetch(`${API_BASE}/admin/payments/${id}`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const p = (await res.json()).payment||await res.json();
    showToast('info','Payment Detail',`${p.packageName||'Package'} · ${p.amount?fmtMoney(p.amount):'—'} · ${p.status}`);
  } catch {
    showToast('info','Payment',`ID: ${id}`);
  }
}

async function markPaymentPaid(id) {
  if(!confirm('Mark this payment as paid?')) return;
  try {
    const res = await fetch(`${API_BASE}/admin/payments/${id}/mark-paid`,{method:'PATCH',headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    showToast('success','Updated','Payment marked as paid.');
    adminLoadPayments();
  } catch {
    showToast('error','Failed','Could not update payment status.');
  }
}

function exportPaymentsCSV() {
  const tbody = document.getElementById('adminPaymentsBody');
  const rows = Array.from(tbody.querySelectorAll('tr')).map(tr=>{
    const cells = Array.from(tr.querySelectorAll('td')).map(td=>'"'+td.innerText.replace(/"/g,'""')+'"');
    return cells.join(',');
  });
  const header = '"#","User","Package","Amount","Payment ID","Method","Status","Date","Actions"';
  const csv = [header,...rows.filter(r=>r&&!r.includes('Loading')&&!r.includes('No payments'))].join('\n');
  const blob = new Blob([csv],{type:'text/csv'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href=url; a.download='skillbrzee_payments_'+new Date().toISOString().split('T')[0]+'.csv';
  a.click(); URL.revokeObjectURL(url);
  showToast('success','Exported','Payments CSV downloaded.');
}

/* ════════════════════════════════════════════════════
   ADMIN — USERS (fully dynamic)
════════════════════════════════════════════════════ */
async function adminLoadUsers() {
  const tbody = document.getElementById('adminUsersBody');
  tbody.innerHTML=`<tr><td colspan="8" class="admin-table-empty"><div class="admin-loading"><div class="admin-spinner"></div> Loading users…</div></td></tr>`;
  const search = document.getElementById('usersSearch')?.value.trim()||'';
  const page   = adminState.users.page;
  try {
    const qs = new URLSearchParams({limit:PAGE_SIZE,page});
    if(search) qs.set('search',search);
    const res = await fetch(`${API_BASE}/admin/users?${qs}`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const data = await res.json();
    const users = data.users||[];
    const total = data.total||users.length;
    adminState.users.total=total;
    document.getElementById('usersCount').textContent=`${total} total`;
    if(!users.length){tbody.innerHTML='<tr><td colspan="8" class="admin-table-empty">No users found.</td></tr>';renderPagination('usersPagination',0,page);return;}
    tbody.innerHTML = users.map((u,i)=>{
      const offset=(page-1)*PAGE_SIZE+i+1;
      const pkgs = (u.enrolledPackages||[]).map(ep=>ep.packageName||'Pkg #'+ep.packageId).join(', ')||'None';
      return `<tr>
        <td style="color:#64748b;">${offset}</td>
        <td><div class="admin-user-cell"><div class="admin-user-avatar">${getInitials(u.name)}</div><div style="font-size:.84rem;font-weight:600;">${u.name||'—'}</div></div></td>
        <td style="font-size:.83rem;color:#64748b;">${u.email||'—'}</td>
        <td style="font-size:.83rem;color:#64748b;">${u.phone||'—'}</td>
        <td style="font-size:.8rem;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="${pkgs}">${pkgs}</td>
        <td><span class="admin-badge ${u.isActive!==false?'active':'pending'}">${u.isActive!==false?'Active':'Inactive'}</span></td>
        <td style="color:#64748b;font-size:.8rem;">${fmtDate(u.createdAt)}</td>
        <td>
          <button class="admin-btn-sm admin-btn-info" onclick="viewUserDetail('${u._id}')">👁 View</button>
          <button class="admin-btn-sm admin-btn-danger" onclick="deleteUser('${u._id}','${u.name?.replace(/'/g,'')||''}')">🗑</button>
        </td>
      </tr>`;
    }).join('');
    renderPagination('usersPagination',total,page,(p)=>{adminState.users.page=p;adminLoadUsers();});
  } catch {
    tbody.innerHTML='<tr><td colspan="8" class="admin-table-empty">❌ Could not load users.</td></tr>';
  }
}

async function viewUserDetail(id) {
  const content = document.getElementById('userDetailContent');
  content.innerHTML='<div class="admin-loading"><div class="admin-spinner"></div> Loading user details…</div>';
  openModal('userDetailModal');
  try {
    const res = await fetch(`${API_BASE}/admin/users/${id}`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const u = (await res.json()).user||await res.json();
    const eps = u.enrolledPackages||[];
    content.innerHTML = `
      <div class="section-tag" style="margin-bottom:8px;">USER PROFILE</div>
      <div style="display:flex;align-items:center;gap:16px;margin-bottom:20px;">
        <div class="admin-avatar-icon" style="width:52px;height:52px;font-size:18px;">${getInitials(u.name)}</div>
        <div><h3 style="margin-bottom:4px;">${u.name||'—'}</h3><p style="font-size:.82rem;margin-bottom:0;">${u.email||'—'}</p></div>
      </div>
      <div class="user-detail-section">
        <h4>Contact</h4>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:.84rem;">
          <div><div style="color:#64748b;font-size:.72rem;margin-bottom:4px;">PHONE</div>${u.phone||'—'}</div>
          <div><div style="color:#64748b;font-size:.72rem;margin-bottom:4px;">JOINED</div>${fmtDate(u.createdAt)}</div>
          <div><div style="color:#64748b;font-size:.72rem;margin-bottom:4px;">STATUS</div><span class="admin-badge ${u.isActive!==false?'active':'pending'}">${u.isActive!==false?'Active':'Inactive'}</span></div>
          <div><div style="color:#64748b;font-size:.72rem;margin-bottom:4px;">ROLE</div>${u.role||'student'}</div>
        </div>
      </div>
      <div class="user-detail-section">
        <h4>Enrolled Packages (${eps.length})</h4>
        ${eps.length?eps.map(ep=>`<div class="user-enroll-item"><span>${ep.packageName||'Package #'+ep.packageId}</span><span style="color:var(--text2);font-size:.75rem;">${fmtDate(ep.enrolledAt)}</span></div>`).join(''):'<p style="color:#64748b;font-size:.84rem;">No enrollments yet.</p>'}
      </div>`;
  } catch {
    content.innerHTML='<p style="color:var(--text2);">Could not load user details.</p>';
  }
}

async function deleteUser(id, name) {
  if(!confirm(`Delete user "${name}"? This cannot be undone.`)) return;
  try {
    const res = await fetch(`${API_BASE}/admin/users/${id}`,{method:'DELETE',headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    showToast('success','Deleted',`User "${name}" removed.`);
    adminLoadUsers();
  } catch {
    showToast('error','Failed','Could not delete user.');
  }
}

/* ════════════════════════════════════════════════════
   ADMIN — FILES
════════════════════════════════════════════════════ */
async function adminLoadFiles() {
  const tbody = document.getElementById('adminFilesBody');
  tbody.innerHTML=`<tr><td colspan="8" class="admin-table-empty"><div class="admin-loading"><div class="admin-spinner"></div> Loading files…</div></td></tr>`;
  const search = document.getElementById('filesSearch')?.value.toLowerCase()||'';
  const cat    = document.getElementById('filesFilterCat')?.value||'';
  const vis    = document.getElementById('filesFilterVis')?.value||'';
  const page   = adminState.files.page;
  try {
    const qs = new URLSearchParams({limit:PAGE_SIZE,page});
    if(search) qs.set('search',search);
    if(cat)    qs.set('category',cat);
    if(vis)    qs.set('visibility',vis);
    const res = await fetch(`${API_BASE}/admin/resources?${qs}`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const data = await res.json();
    const files = data.resources||[];
    const total = data.total||files.length;
    adminState.files.total=total;
    document.getElementById('filesCount').textContent=`${total} files`;
    if(!files.length){tbody.innerHTML='<tr><td colspan="8" class="admin-table-empty">No files found.</td></tr>';return;}
    tbody.innerHTML = files.map((f,i)=>{
      const info = getFileTypeInfo(f.fileUrl||'',f.fileName||f.title||'');
      const visClass = f.visibility==='public'?'public':'enrolled-only';
      const visLabel = f.visibility==='public'?'🌍 Public':'🔒 Enrolled';
      const offset=(page-1)*PAGE_SIZE+i+1;
      return `<tr>
        <td style="color:#64748b;">${offset}</td>
        <td><div style="font-weight:600;font-size:.85rem;">${f.title}</div><div style="font-size:.73rem;color:#64748b;">${f.fileName||''}</div></td>
        <td style="color:#64748b;font-size:.83rem;">${f.category||'—'}</td>
        <td><span class="file-badge ${info.cls}">${info.label}</span></td>
        <td><span class="admin-badge ${visClass}">${visLabel}</span></td>
        <td style="color:#64748b;font-size:.83rem;">${f.downloads||0}</td>
        <td style="color:#64748b;font-size:.8rem;">${fmtDate(f.createdAt)}</td>
        <td>
          <button class="admin-btn-sm admin-btn-info" onclick="previewFile('${f.fileUrl||''}')">👁 View</button>
          <button class="admin-btn-sm admin-btn-danger" onclick="deleteFile('${f._id}','${(f.title||'').replace(/'/g,'')}')">🗑</button>
        </td>
      </tr>`;
    }).join('');
    renderPagination('filesPagination',total,page,(p)=>{adminState.files.page=p;adminLoadFiles();});
  } catch(err) {
    tbody.innerHTML='<tr><td colspan="8" class="admin-table-empty">❌ Could not load files.</td></tr>';
  }
}

function previewFile(url) {
  if(!url){showToast('info','No URL','No download link for this file.');return;}
  window.open(url.startsWith('http')?url:`https://skillset-g4oh.onrender.com${url}`,'_blank');
}

async function deleteFile(id, title) {
  if(!confirm(`Delete file "${title}"?`)) return;
  try {
    const res = await fetch(`${API_BASE}/resources/${id}`,{method:'DELETE',headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    showToast('success','Deleted',`"${title}" removed.`);
    adminLoadFiles();
    adminLoadRecentUploads();
    renderPublicResources();
  } catch {
    showToast('error','Failed','Could not delete file.');
  }
}

/* ════════════════════════════════════════════════════
   ADMIN — UPLOAD
════════════════════════════════════════════════════ */
let selectedFileData = null;

function handleAdminFileSelect(files) {
  const file = files[0];
  if(!file) return;
  selectedFileData = file;
  document.getElementById('adminUploadAreaTitle').textContent='📎 '+file.name+' ('+formatBytes(file.size)+')';
  if(!document.getElementById('uploadTitle').value) document.getElementById('uploadTitle').value=file.name.replace(/\.[^.]+$/,'');
}

async function submitUpload() {
  const title = document.getElementById('uploadTitle').value.trim();
  const url   = document.getElementById('uploadUrl').value.trim();
  const cat   = document.getElementById('uploadCategory').value;
  const vis   = document.getElementById('uploadVisibility').value;
  if(!title){showToast('error','Missing Title','Please enter a file title.');return;}
  if(!url&&!selectedFileData){showToast('error','No File','Please enter a URL or select a file.');return;}
  setLoading('uploadSubmitBtn',true,'Uploading…');
  try {
    let res;
    if(selectedFileData&&!url){
      const fd = new FormData();
      fd.append('file',selectedFileData);fd.append('title',title);fd.append('category',cat);fd.append('visibility',vis);
      res = await fetch(`${API_BASE}/resources/upload`,{method:'POST',headers:{...(authToken?{'Authorization':`Bearer ${authToken}`}:{})},body:fd});
    } else {
      res = await fetch(`${API_BASE}/resources/add-url`,{method:'POST',headers:authHeaders(),body:JSON.stringify({title,fileUrl:url,category:cat,visibility:vis})});
    }
    if(!res.ok){const err=await res.json();throw new Error(err.error||'Upload failed');}
    showToast('success','File Saved!',title+' added successfully.');
    resetUploadForm();
    await adminLoadRecentUploads();
    await adminLoadFiles();
    await renderPublicResources();
    // Update file count in dashboard
    document.getElementById('ds-files').textContent = ((parseInt(document.getElementById('ds-files').textContent)||0)+1);
  } catch(err){
    showToast('error','Upload Failed',err.message||'Could not upload file.');
  } finally { setLoading('uploadSubmitBtn',false); }
}

function resetUploadForm() {
  ['uploadTitle','uploadUrl'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});
  const c=document.getElementById('uploadCategory');if(c)c.value='General';
  const v=document.getElementById('uploadVisibility');if(v)v.value='public';
  document.getElementById('adminUploadAreaTitle').textContent='Drag & drop files here';
  document.getElementById('adminFileInput').value='';
  selectedFileData=null;
}

async function adminLoadRecentUploads() {
  const tbody = document.getElementById('uploadTableBody');
  if(!tbody) return;
  try {
    const res = await fetch(`${API_BASE}/admin/resources?limit=10&sort=-createdAt`,{headers:authHeaders()});
    if(!res.ok) throw new Error('Failed');
    const data = await res.json();
    const files = data.resources||[];
    if(!files.length){tbody.innerHTML='<tr><td colspan="6" class="admin-table-empty">No files uploaded yet.</td></tr>';return;}
    tbody.innerHTML = files.map(f=>{
      const info = getFileTypeInfo(f.fileUrl||'',f.fileName||f.title||'');
      const visClass = f.visibility==='public'?'public':'enrolled-only';
      const visLabel = f.visibility==='public'?'🌍 Public':'🔒 Enrolled';
      return `<tr>
        <td style="font-weight:600;font-size:.85rem;">${f.title}</td>
        <td style="color:#64748b;font-size:.83rem;">${f.category||'—'}</td>
        <td><span class="file-badge ${info.cls}">${info.label}</span></td>
        <td><span class="admin-badge ${visClass}">${visLabel}</span></td>
        <td style="color:#64748b;font-size:.8rem;">${fmtDate(f.createdAt)}</td>
        <td><button class="admin-btn-sm admin-btn-danger" onclick="deleteFile('${f._id}','${(f.title||'').replace(/'/g,'')}')">🗑 Delete</button></td>
      </tr>`;
    }).join('');
  } catch {
    tbody.innerHTML='<tr><td colspan="6" class="admin-table-empty">No files uploaded yet.</td></tr>';
  }
}

/* ════════════════════════════════════════════════════
   ADMIN — PACKAGES
════════════════════════════════════════════════════ */
function renderAdminPackages() {
  const grid = document.getElementById('adminPackagesGrid');
  grid.innerHTML = PACKAGES.map(p=>`
    <div class="admin-manage-pkg-card ${p.featured?'featured':''}">
      <div class="admin-manage-pkg-name ${p.featured?'featured':''}">${p.name}${p.featured?' ⭐':''}</div>
      <div class="admin-manage-pkg-price ${p.featured?'featured':''}">${p.price}</div>
      <div class="admin-manage-pkg-sub">${p.desc.slice(0,60)}…</div>
      <div class="admin-manage-pkg-actions">
        <button class="admin-btn-sm admin-btn-info" onclick="editPackage(${p.id})">✏ Edit</button>
        <button class="admin-btn-sm admin-btn-danger" onclick="showToast('info','Coming Soon','Package deletion is disabled to protect enrollments.')">🗑</button>
      </div>
    </div>`).join('');
}

function editPackage(pkgId) {
  const pkg = PACKAGES.find(p=>p.id===pkgId);
  if(!pkg) return;
  const newPrice = prompt(`Edit price for ${pkg.name} (current: ${pkg.price}):`, pkg.price.replace('₹','').replace(',',''));
  if(newPrice===null) return;
  const parsed = parseInt(newPrice.replace(/[^0-9]/g,''));
  if(isNaN(parsed)||parsed<=0){showToast('error','Invalid Price','Please enter a valid price.');return;}
  pkg.rawPrice = parsed;
  pkg.price = '₹'+parsed.toLocaleString('en-IN');
  renderAdminPackages();
  renderPackages();
  showToast('success','Updated',`${pkg.name} price updated to ₹${parsed.toLocaleString('en-IN')} (frontend only)`);
}

/* ════════════════════════════════════════════════════
   PAGINATION HELPER
════════════════════════════════════════════════════ */
function renderPagination(containerId, total, currentPage, onPageChange) {
  const container = document.getElementById(containerId);
  if(!container) return;
  const totalPages = Math.ceil(total/PAGE_SIZE);
  if(totalPages<=1){container.innerHTML='';return;}
  let html='';
  // Prev
  html+=`<button class="admin-page-btn" ${currentPage<=1?'disabled':''} onclick="(${onPageChange.toString()})(${currentPage-1})">← Prev</button>`;
  // Page buttons (max 7)
  const start=Math.max(1,currentPage-3), end=Math.min(totalPages,currentPage+3);
  if(start>1) html+=`<button class="admin-page-btn" onclick="(${onPageChange.toString()})(1)">1</button>${start>2?'<span style="color:#64748b;padding:0 4px;">…</span>':''}`;
  for(let i=start;i<=end;i++) html+=`<button class="admin-page-btn ${i===currentPage?'active':''}" onclick="(${onPageChange.toString()})(${i})">${i}</button>`;
  if(end<totalPages) html+=`${end<totalPages-1?'<span style="color:#64748b;padding:0 4px;">…</span>':''}<button class="admin-page-btn" onclick="(${onPageChange.toString()})(${totalPages})">${totalPages}</button>`;
  // Next
  html+=`<button class="admin-page-btn" ${currentPage>=totalPages?'disabled':''} onclick="(${onPageChange.toString()})(${currentPage+1})">Next →</button>`;
  html+=`<span class="admin-page-info">Page ${currentPage} of ${totalPages} · ${total} records</span>`;
  container.innerHTML=html;
}

/* ════════════════════════════════════════════════════
   HERO / SLIDER
════════════════════════════════════════════════════ */
let sliderIdx=0, sliderTimer=null;
const slides=document.querySelectorAll('.hero-slide'),dotsWrap=document.getElementById('sliderDots');
function buildDots(){
  dotsWrap.innerHTML='';
  slides.forEach((_,i)=>{const btn=document.createElement('button');btn.className='slider-dot'+(i===0?' active':'');btn.addEventListener('click',()=>goToSlide(i));dotsWrap.appendChild(btn);});
}
function goToSlide(n){
  slides[sliderIdx].classList.remove('active');
  document.querySelectorAll('.slider-dot')[sliderIdx].classList.remove('active');
  sliderIdx=(n+slides.length)%slides.length;
  slides[sliderIdx].classList.add('active');
  document.querySelectorAll('.slider-dot')[sliderIdx].classList.add('active');
}
function startSlider(){sliderTimer=setInterval(()=>goToSlide(sliderIdx+1),5500);}
function restartSlider(){clearInterval(sliderTimer);startSlider();}
document.getElementById('prevSlide').addEventListener('click',()=>{goToSlide(sliderIdx-1);restartSlider();});
document.getElementById('nextSlide').addEventListener('click',()=>{goToSlide(sliderIdx+1);restartSlider();});

/* ════════════════════════════════════════════════════
   PARTICLES
════════════════════════════════════════════════════ */
(function(){
  const canvas=document.getElementById('particles'),ctx=canvas.getContext('2d');
  let W,H,particles;
  function resize(){W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;}
  function createParticles(){particles=Array.from({length:55},()=>({x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.8+0.4,dx:(Math.random()-.5)*.45,dy:(Math.random()-.5)*.45,a:Math.random()*.55+.1}));}
  function draw(){
    ctx.clearRect(0,0,W,H);
    particles.forEach(p=>{ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle=`rgba(249,115,22,${p.a})`;ctx.fill();p.x+=p.dx;p.y+=p.dy;if(p.x<0||p.x>W)p.dx*=-1;if(p.y<0||p.y>H)p.dy*=-1;});
    for(let i=0;i<particles.length;i++)for(let j=i+1;j<particles.length;j++){const d=Math.hypot(particles[i].x-particles[j].x,particles[i].y-particles[j].y);if(d<110){ctx.beginPath();ctx.strokeStyle=`rgba(249,115,22,${.07*(1-d/110)})`;ctx.lineWidth=.5;ctx.moveTo(particles[i].x,particles[i].y);ctx.lineTo(particles[j].x,particles[j].y);ctx.stroke();}}
    requestAnimationFrame(draw);
  }
  resize();createParticles();draw();
  window.addEventListener('resize',()=>{resize();createParticles();});
})();

/* ════════════════════════════════════════════════════
   CURSOR
════════════════════════════════════════════════════ */
(function(){
  const dot=document.getElementById('cursorDot'),ring=document.getElementById('cursorRing');
  let mx=-100,my=-100,rx=-100,ry=-100;
  document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;});
  (function loop(){rx+=(mx-rx)*.14;ry+=(my-ry)*.14;dot.style.left=mx+'px';dot.style.top=my+'px';ring.style.left=rx+'px';ring.style.top=ry+'px';requestAnimationFrame(loop);})();
})();
function initCursorTargets(){
  const ring=document.getElementById('cursorRing');
  document.querySelectorAll('a,button,[role="button"]').forEach(el=>{
    if(el._cursorBound) return; el._cursorBound=true;
    el.addEventListener('mouseenter',()=>{ring.style.width='52px';ring.style.height='52px';});
    el.addEventListener('mouseleave',()=>{ring.style.width='36px';ring.style.height='36px';});
  });
}

/* ════════════════════════════════════════════════════
   SCROLL / NAV
════════════════════════════════════════════════════ */
const navbar=document.getElementById('navbar');
const sections=document.querySelectorAll('section[id],footer[id]');
window.addEventListener('scroll',()=>{
  const y=window.scrollY;
  navbar.classList.toggle('scrolled',y>60);
  document.getElementById('backToTop').classList.toggle('visible',y>400);
  let current='';
  sections.forEach(s=>{if(y+100>=s.offsetTop)current=s.id;});
  document.querySelectorAll('.nav-links > li').forEach(li=>{const a=li.querySelector(':scope > a');if(!a)return;li.classList.toggle('active',a.getAttribute('href')==='#'+current);});
},{passive:true});
function scrollToTop(){window.scrollTo({top:0,behavior:'smooth'});}
function scrollToSection(id){const el=document.getElementById(id);if(el)window.scrollTo({top:el.offsetTop-80,behavior:'smooth'});}
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click',e=>{
    const href = a.getAttribute('href');
    if (!href || href === '#') return; // ← add this guard
    const t = document.querySelector(href);
    if(!t) return;
    e.preventDefault();
    window.scrollTo({top:t.offsetTop-80,behavior:'smooth'});
  });
});

document.getElementById('topbarClose').addEventListener('click',()=>{
  const bar=document.getElementById('topbar');
  bar.style.cssText+='transition:height .35s,opacity .35s,padding .35s;height:0;opacity:0;padding:0;';
  navbar.classList.remove('topbar-active');
  setTimeout(()=>bar.remove(),380);
});

const hamburger=document.getElementById('hamburger'),mobileDrawer=document.getElementById('mobileDrawer');
hamburger.addEventListener('click',()=>{const open=mobileDrawer.classList.toggle('open');hamburger.classList.toggle('open',open);document.body.style.overflow=open?'hidden':'';});
function closeDrawer(){mobileDrawer.classList.remove('open');hamburger.classList.remove('open');document.body.style.overflow='';}
mobileDrawer.addEventListener('click',e=>{if(e.target===mobileDrawer)closeDrawer();});

const revealObs=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('in');revealObs.unobserve(e.target);}});},{threshold:.08,rootMargin:'0px 0px -40px 0px'});
function observeReveal(){document.querySelectorAll('.reveal').forEach(el=>revealObs.observe(el));}

const NUM_TARGETS=[{id:'n1',target:5465,suffix:'+'},{id:'n2',target:64,suffix:'+'},{id:'n3',target:24,suffix:'+'},{id:'n4',target:100,suffix:'+'}];
let counted=false;
new IntersectionObserver(entries=>{
  if(!entries[0].isIntersecting||counted) return; counted=true;
  NUM_TARGETS.forEach(({id,target,suffix})=>{const el=document.getElementById(id);let cur=0;const step=target/75;const t=setInterval(()=>{cur=Math.min(cur+step,target);el.textContent=Math.floor(cur).toLocaleString('en-IN')+suffix;if(cur>=target)clearInterval(t);},18);});
},{threshold:.3}).observe(document.getElementById('numbers'));

document.getElementById('backToTop').addEventListener('click',scrollToTop);
document.getElementById('loginPassword').addEventListener('keydown',e=>{if(e.key==='Enter')handleLogin();});
document.getElementById('loginEmail').addEventListener('keydown',e=>{if(e.key==='Enter')handleLogin();});
document.getElementById('adminLoginPass').addEventListener('keydown',e=>{if(e.key==='Enter')handleAdminLogin();});
document.addEventListener('keydown',e=>{
  if(e.key!=='Escape') return;
  ['enrollModal','loginModal','dashboardModal','adminLoginModal','userDetailModal'].forEach(closeModal);
  closeDrawer();
  if(isAdminMode) exitAdmin();
});

/* PRELOADER */
(function(){
  const loader=document.createElement('div');
  loader.id='preloader';
  loader.style.cssText='position:fixed;inset:0;z-index:99999;background:var(--bg0);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;transition:opacity .5s ease;';
  loader.innerHTML=`<div style="font-family:'Sora',sans-serif;font-size:2.2rem;font-weight:900;background:linear-gradient(135deg,#f97316,#fbbf24);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">Skillbrzee</div><div style="width:48px;height:3px;background:var(--bg3);border-radius:2px;overflow:hidden;"><div id="loaderBar" style="height:100%;background:linear-gradient(90deg,#f97316,#fbbf24);width:0%;border-radius:2px;transition:width .05s;"></div></div>`;
  document.body.appendChild(loader);
  let progress=0;const bar=document.getElementById('loaderBar');
  const tick=setInterval(()=>{progress+=Math.random()*18;if(progress>=100){progress=100;clearInterval(tick);}bar.style.width=progress+'%';},60);
  window.addEventListener('load',()=>{setTimeout(()=>{loader.style.opacity='0';setTimeout(()=>loader.remove(),520);},300);});
})();

/* ════════════════════════════════════════════════════
   INIT
════════════════════════════════════════════════════ */
document.addEventListener('DOMContentLoaded', async ()=>{
  updateNavAuth();
  renderPackages();
  renderTestimonials();
  buildDots();
  startSlider();
  observeReveal();
  initCursorTargets();
  Promise.allSettled([refreshUser(), renderCourses(), renderPublicResources()]).then(()=>{updateNavAuth();});
});
</script>
</body>
</html>
